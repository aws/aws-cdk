{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"},"children":{"aws-cdk-bedrock-agentcore-memory-1":{"id":"aws-cdk-bedrock-agentcore-memory-1","path":"aws-cdk-bedrock-agentcore-memory-1","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"Memory":{"id":"Memory","path":"aws-cdk-bedrock-agentcore-memory-1/Memory","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-agentcore-alpha.Memory","version":"0.0.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"aws-cdk-bedrock-agentcore-memory-1/Memory/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/Memory/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock-agentcore.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"Memory":{"id":"Memory","path":"aws-cdk-bedrock-agentcore-memory-1/Memory/Memory","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrockagentcore.CfnMemory","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::BedrockAgentCore::Memory","aws:cdk:cloudformation:props":{"eventExpiryDuration":90,"memoryExecutionRoleArn":{"Fn::GetAtt":["MemoryServiceRoleC95D1642","Arn"]},"name":"memory"}}}}},"MyEncryptionKey":{"id":"MyEncryptionKey","path":"aws-cdk-bedrock-agentcore-memory-1/MyEncryptionKey","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Key","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MyEncryptionKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnKey","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Key","aws:cdk:cloudformation:props":{"keyPolicy":{"Statement":[{"Action":"kms:*","Effect":"Allow","Principal":{"AWS":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":root"]]}},"Resource":"*"}],"Version":"2012-10-17"}}}}}},"MemoryWithBuiltinStrategies":{"id":"MemoryWithBuiltinStrategies","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithBuiltinStrategies","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-agentcore-alpha.Memory","version":"0.0.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithBuiltinStrategies/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithBuiltinStrategies/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock-agentcore.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithBuiltinStrategies/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithBuiltinStrategies/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["kms:CreateGrant","kms:Decrypt","kms:DescribeKey","kms:GenerateDataKey","kms:GenerateDataKeyWithoutPlaintext","kms:ReEncrypt*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MyEncryptionKeyD795679F","Arn"]}}],"Version":"2012-10-17"},"policyName":"MemoryWithBuiltinStrategiesServiceRoleDefaultPolicy99037030","roles":[{"Ref":"MemoryWithBuiltinStrategiesServiceRole9D3D59C7"}]}}}}}}},"Memory":{"id":"Memory","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithBuiltinStrategies/Memory","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrockagentcore.CfnMemory","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::BedrockAgentCore::Memory","aws:cdk:cloudformation:props":{"description":"A test memory with built-in strategies","encryptionKeyArn":{"Fn::GetAtt":["MyEncryptionKeyD795679F","Arn"]},"eventExpiryDuration":60,"memoryExecutionRoleArn":{"Fn::GetAtt":["MemoryWithBuiltinStrategiesServiceRole9D3D59C7","Arn"]},"memoryStrategies":[{"summaryMemoryStrategy":{"name":"summary_builtin_cdkGen0001","description":"Summarize interactions to preserve critical context and key insights","namespaces":["/strategies/{memoryStrategyId}/actors/{actorId}/sessions/{sessionId}"],"type":"SUMMARIZATION"}},{"semanticMemoryStrategy":{"name":"semantic_builtin_cdkGen0001","description":"Extract general factual knowledge, concepts and meanings from raw conversations in a context-independent format.","namespaces":["/strategies/{memoryStrategyId}/actors/{actorId}"],"type":"SEMANTIC"}},{"userPreferenceMemoryStrategy":{"name":"preference_builtin_cdkGen0001","description":"Capture individual preferences, interaction patterns, and personalized settings to enhance future experiences.","namespaces":["/strategies/{memoryStrategyId}/actors/{actorId}"],"type":"USER_PREFERENCE"}}],"name":"memory_with_builtin_strategies"}}}}},"MemoryWithCustomStrategies":{"id":"MemoryWithCustomStrategies","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithCustomStrategies","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-agentcore-alpha.Memory","version":"0.0.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithCustomStrategies/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithCustomStrategies/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock-agentcore.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithCustomStrategies/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithCustomStrategies/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock:GetFoundationModel","bedrock:InvokeModel*"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},"::foundation-model/anthropic.claude-3-5-sonnet-20240620-v1:0"]]}}],"Version":"2012-10-17"},"policyName":"MemoryWithCustomStrategiesServiceRoleDefaultPolicyB8522B1A","roles":[{"Ref":"MemoryWithCustomStrategiesServiceRole8BB48B33"}]}}}}}}},"Memory":{"id":"Memory","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithCustomStrategies/Memory","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrockagentcore.CfnMemory","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::BedrockAgentCore::Memory","aws:cdk:cloudformation:props":{"description":"A long term memory with consolidation","eventExpiryDuration":60,"memoryExecutionRoleArn":{"Fn::GetAtt":["MemoryWithCustomStrategiesServiceRole8BB48B33","Arn"]},"memoryStrategies":[{"customMemoryStrategy":{"name":"customSemanticStrategy","description":"Custom semantic memory strategy","namespaces":["/custom/strategies/{memoryStrategyId}/actors/{actorId}"],"type":"SEMANTIC","configuration":{"semanticOverride":{"consolidation":{"modelId":"anthropic.claude-3-5-sonnet-20240620-v1:0","appendToPrompt":"Custom consolidation prompt for semantic memory"},"extraction":{"modelId":"anthropic.claude-3-5-sonnet-20240620-v1:0","appendToPrompt":"Custom extraction prompt for semantic memory"}}}}}],"name":"memory_with_custom_strategies"}}}}},"MemoryBucket":{"id":"MemoryBucket","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"MemoryBucket34BAD4CD"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["MemoryBucket34BAD4CD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MemoryBucket34BAD4CD","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"0.0.0"},"children":{"Default":{"id":"Default","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"aws-cdk-bedrock-agentcore-memory-1/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"0.0.0"},"children":{"Staging":{"id":"Staging","path":"aws-cdk-bedrock-agentcore-memory-1/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"0.0.0"}},"Role":{"id":"Role","path":"aws-cdk-bedrock-agentcore-memory-1/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}},"Handler":{"id":"Handler","path":"aws-cdk-bedrock-agentcore-memory-1/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}}}},"MemoryTopic":{"id":"MemoryTopic","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{}}}}},"MemoryWithSelfManagedStrategy":{"id":"MemoryWithSelfManagedStrategy","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithSelfManagedStrategy","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-agentcore-alpha.Memory","version":"0.0.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithSelfManagedStrategy/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithSelfManagedStrategy/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock-agentcore.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithSelfManagedStrategy/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithSelfManagedStrategy/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sns:GetTopicAttributes","sns:Publish"],"Effect":"Allow","Resource":{"Ref":"MemoryTopic5EB6DDE2"}},{"Action":["s3:GetBucketLocation","s3:PutObject"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::",{"Ref":"MemoryBucket34BAD4CD"},"/*"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::",{"Ref":"MemoryBucket34BAD4CD"}]]}]}],"Version":"2012-10-17"},"policyName":"MemoryWithSelfManagedStrategyServiceRoleDefaultPolicy8649CA0E","roles":[{"Ref":"MemoryWithSelfManagedStrategyServiceRole9A484437"}]}}}}}}},"Memory":{"id":"Memory","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithSelfManagedStrategy/Memory","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrockagentcore.CfnMemory","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::BedrockAgentCore::Memory","aws:cdk:cloudformation:props":{"description":"A test memory with a self managed strategy","eventExpiryDuration":60,"memoryExecutionRoleArn":{"Fn::GetAtt":["MemoryWithSelfManagedStrategyServiceRole9A484437","Arn"]},"memoryStrategies":[{"summaryMemoryStrategy":{"name":"summary_builtin_cdkGen0001","description":"Summarize interactions to preserve critical context and key insights","namespaces":["/strategies/{memoryStrategyId}/actors/{actorId}/sessions/{sessionId}"],"type":"SUMMARIZATION"}},{"customMemoryStrategy":{"name":"selfManagedStrategy","description":"Self managed memory strategy","type":"CUSTOM","configuration":{"selfManagedConfiguration":{"historicalContextWindowSize":4,"invocationConfiguration":{"topicArn":{"Ref":"MemoryTopic5EB6DDE2"},"payloadDeliveryBucketName":{"Ref":"MemoryBucket34BAD4CD"}},"triggerConditions":[{"messageBasedTrigger":{"messageCount":1}},{"timeBasedTrigger":{"idleSessionTimeout":10}},{"tokenBasedTrigger":{"tokenCount":100}}]}}}}],"name":"memory_with_self_managed_strategy"}}}}},"MemoryWithBuiltinEpisodicEx":{"id":"MemoryWithBuiltinEpisodicEx","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithBuiltinEpisodicEx","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-agentcore-alpha.Memory","version":"0.0.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithBuiltinEpisodicEx/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithBuiltinEpisodicEx/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"bedrock-agentcore.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"Memory":{"id":"Memory","path":"aws-cdk-bedrock-agentcore-memory-1/MemoryWithBuiltinEpisodicEx/Memory","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrockagentcore.CfnMemory","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::BedrockAgentCore::Memory","aws:cdk:cloudformation:props":{"description":"A test memory with built-in episodic strategy","eventExpiryDuration":90,"memoryExecutionRoleArn":{"Fn::GetAtt":["MemoryWithBuiltinEpisodicExServiceRoleB89EDF28","Arn"]},"memoryStrategies":[{"episodicMemoryStrategy":{"name":"episodic_builtin_cdkGen0001","description":"Captures meaningful slices of user and system interactions.","namespaces":["/strategy/{memoryStrategyId}/actor/{actorId}/session/{sessionId}"],"type":"EPISODIC","reflectionConfiguration":{"namespaces":["/strategy/{memoryStrategyId}/actor/{actorId}"]}}}],"name":"memory_with_builtin_episodic_example"}}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"aws-cdk-bedrock-agentcore-memory-1/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"aws-cdk-bedrock-agentcore-memory-1/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}},"BedrockAgentCoreMemory":{"id":"BedrockAgentCoreMemory","path":"BedrockAgentCoreMemory","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"BedrockAgentCoreMemory/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"},"children":{"Default":{"id":"Default","path":"BedrockAgentCoreMemory/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"DeployAssert":{"id":"DeployAssert","path":"BedrockAgentCoreMemory/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"BedrockAgentCoreMemory/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BedrockAgentCoreMemory/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}