"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = handler;
const handler_name_1 = require("./handler-name");
const privileges_1 = require("./privileges");
const table_1 = require("./table");
const user_1 = require("./user");
const HANDLERS = {
    [handler_name_1.HandlerName.Table]: table_1.handler,
    [handler_name_1.HandlerName.User]: user_1.handler,
    [handler_name_1.HandlerName.UserTablePrivileges]: privileges_1.handler,
};
async function handler(event) {
    const subHandler = HANDLERS[event.ResourceProperties.handler];
    if (!subHandler) {
        throw new Error(`Requested handler ${event.ResourceProperties.handler} is not in supported set: ${JSON.stringify(Object.keys(HANDLERS))}`);
    }
    return subHandler(event.ResourceProperties, event);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQWFBLDBCQU1DO0FBakJELGlEQUE2QztBQUM3Qyw2Q0FBMkQ7QUFDM0QsbUNBQWlEO0FBQ2pELGlDQUErQztBQUUvQyxNQUFNLFFBQVEsR0FBaUg7SUFDN0gsQ0FBQywwQkFBVyxDQUFDLEtBQUssQ0FBQyxFQUFFLGVBQVc7SUFDaEMsQ0FBQywwQkFBVyxDQUFDLElBQUksQ0FBQyxFQUFFLGNBQVU7SUFDOUIsQ0FBQywwQkFBVyxDQUFDLG1CQUFtQixDQUFDLEVBQUUsb0JBQWdCO0NBQ3BELENBQUM7QUFFSyxLQUFLLFVBQVUsT0FBTyxDQUFDLEtBQWtEO0lBQzlFLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsT0FBc0IsQ0FBQyxDQUFDO0lBQzdFLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNoQixNQUFNLElBQUksS0FBSyxDQUFDLHFCQUFxQixLQUFLLENBQUMsa0JBQWtCLENBQUMsT0FBTyw2QkFBNkIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzdJLENBQUM7SUFDRCxPQUFPLFVBQVUsQ0FBQyxLQUFLLENBQUMsa0JBQWtCLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDckQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHR5cGUgKiBhcyBBV1NMYW1iZGEgZnJvbSAnYXdzLWxhbWJkYSc7XG5pbXBvcnQgeyBIYW5kbGVyTmFtZSB9IGZyb20gJy4vaGFuZGxlci1uYW1lJztcbmltcG9ydCB7IGhhbmRsZXIgYXMgbWFuYWdlUHJpdmlsZWdlcyB9IGZyb20gJy4vcHJpdmlsZWdlcyc7XG5pbXBvcnQgeyBoYW5kbGVyIGFzIG1hbmFnZVRhYmxlIH0gZnJvbSAnLi90YWJsZSc7XG5pbXBvcnQgeyBoYW5kbGVyIGFzIG1hbmFnZVVzZXIgfSBmcm9tICcuL3VzZXInO1xuXG5jb25zdCBIQU5ETEVSUzogeyBba2V5IGluIEhhbmRsZXJOYW1lXTogKChwcm9wczogYW55LCBldmVudDogQVdTTGFtYmRhLkNsb3VkRm9ybWF0aW9uQ3VzdG9tUmVzb3VyY2VFdmVudCkgPT4gUHJvbWlzZTxhbnk+KSB9ID0ge1xuICBbSGFuZGxlck5hbWUuVGFibGVdOiBtYW5hZ2VUYWJsZSxcbiAgW0hhbmRsZXJOYW1lLlVzZXJdOiBtYW5hZ2VVc2VyLFxuICBbSGFuZGxlck5hbWUuVXNlclRhYmxlUHJpdmlsZWdlc106IG1hbmFnZVByaXZpbGVnZXMsXG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihldmVudDogQVdTTGFtYmRhLkNsb3VkRm9ybWF0aW9uQ3VzdG9tUmVzb3VyY2VFdmVudCkge1xuICBjb25zdCBzdWJIYW5kbGVyID0gSEFORExFUlNbZXZlbnQuUmVzb3VyY2VQcm9wZXJ0aWVzLmhhbmRsZXIgYXMgSGFuZGxlck5hbWVdO1xuICBpZiAoIXN1YkhhbmRsZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFJlcXVlc3RlZCBoYW5kbGVyICR7ZXZlbnQuUmVzb3VyY2VQcm9wZXJ0aWVzLmhhbmRsZXJ9IGlzIG5vdCBpbiBzdXBwb3J0ZWQgc2V0OiAke0pTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKEhBTkRMRVJTKSl9YCk7XG4gIH1cbiAgcmV0dXJuIHN1YkhhbmRsZXIoZXZlbnQuUmVzb3VyY2VQcm9wZXJ0aWVzLCBldmVudCk7XG59XG4iXX0=