"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const iam = require("@aws-cdk/aws-iam");
const cdk = require("@aws-cdk/core");
const sfn = require("../lib");
describe('TaskRole', () => {
    let stack;
    beforeEach(() => {
        stack = new cdk.Stack();
    });
    describe('fromRole()', () => {
        test('returns expected roleArn and resource', () => {
            const iamRole = iam.Role.fromRoleArn(stack, 'Role', 'arn:aws:iam::123456789012:role/example-role');
            const role = sfn.TaskRole.fromRole(iamRole);
            expect(stack.resolve(role.roleArn)).toEqual('arn:aws:iam::123456789012:role/example-role');
            expect(role.resource).toEqual('arn:aws:iam::123456789012:role/example-role');
        });
    });
    describe('fromRoleArnJsonPath()', () => {
        test('returns expected roleArn and resource', () => {
            const role = sfn.TaskRole.fromRoleArnJsonPath('$.RoleArn');
            expect(stack.resolve(role.roleArn)).toEqual('$.RoleArn');
            expect(role.resource).toEqual('*');
        });
        test('returns expected roleArn and resource', () => {
            expect(() => sfn.TaskRole.fromRoleArnJsonPath('RoleArn')).toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay1jcmVkZW50aWFscy50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidGFzay1jcmVkZW50aWFscy50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsd0NBQXdDO0FBQ3hDLHFDQUFxQztBQUNyQyw4QkFBOEI7QUFFOUIsUUFBUSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7SUFDeEIsSUFBSSxLQUFnQixDQUFDO0lBRXJCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDMUIsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtRQUMxQixJQUFJLENBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO1lBQ2pELE1BQU0sT0FBTyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsNkNBQTZDLENBQUMsQ0FBQztZQUNuRyxNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUU1QyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsNkNBQTZDLENBQUMsQ0FBQztZQUMzRixNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFDO1FBQy9FLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFO1FBQ3JDLElBQUksQ0FBQyx1Q0FBdUMsRUFBRSxHQUFHLEVBQUU7WUFDakQsTUFBTSxJQUFJLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUUzRCxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDekQsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUUsR0FBRyxDQUFDLENBQUM7UUFDdEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO1lBQ2pELE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDdEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgaWFtIGZyb20gJ0Bhd3MtY2RrL2F3cy1pYW0nO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ0Bhd3MtY2RrL2NvcmUnO1xuaW1wb3J0ICogYXMgc2ZuIGZyb20gJy4uL2xpYic7XG5cbmRlc2NyaWJlKCdUYXNrUm9sZScsICgpID0+IHtcbiAgbGV0IHN0YWNrOiBjZGsuU3RhY2s7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmcm9tUm9sZSgpJywgKCkgPT4ge1xuICAgIHRlc3QoJ3JldHVybnMgZXhwZWN0ZWQgcm9sZUFybiBhbmQgcmVzb3VyY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpYW1Sb2xlID0gaWFtLlJvbGUuZnJvbVJvbGVBcm4oc3RhY2ssICdSb2xlJywgJ2Fybjphd3M6aWFtOjoxMjM0NTY3ODkwMTI6cm9sZS9leGFtcGxlLXJvbGUnKTtcbiAgICAgIGNvbnN0IHJvbGUgPSBzZm4uVGFza1JvbGUuZnJvbVJvbGUoaWFtUm9sZSk7XG5cbiAgICAgIGV4cGVjdChzdGFjay5yZXNvbHZlKHJvbGUucm9sZUFybikpLnRvRXF1YWwoJ2Fybjphd3M6aWFtOjoxMjM0NTY3ODkwMTI6cm9sZS9leGFtcGxlLXJvbGUnKTtcbiAgICAgIGV4cGVjdChyb2xlLnJlc291cmNlKS50b0VxdWFsKCdhcm46YXdzOmlhbTo6MTIzNDU2Nzg5MDEyOnJvbGUvZXhhbXBsZS1yb2xlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmcm9tUm9sZUFybkpzb25QYXRoKCknLCAoKSA9PiB7XG4gICAgdGVzdCgncmV0dXJucyBleHBlY3RlZCByb2xlQXJuIGFuZCByZXNvdXJjZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJvbGUgPSBzZm4uVGFza1JvbGUuZnJvbVJvbGVBcm5Kc29uUGF0aCgnJC5Sb2xlQXJuJyk7XG5cbiAgICAgIGV4cGVjdChzdGFjay5yZXNvbHZlKHJvbGUucm9sZUFybikpLnRvRXF1YWwoJyQuUm9sZUFybicpO1xuICAgICAgZXhwZWN0KHJvbGUucmVzb3VyY2UpLnRvRXF1YWwoICcqJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdyZXR1cm5zIGV4cGVjdGVkIHJvbGVBcm4gYW5kIHJlc291cmNlJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KCgpID0+IHNmbi5UYXNrUm9sZS5mcm9tUm9sZUFybkpzb25QYXRoKCdSb2xlQXJuJykpLnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==