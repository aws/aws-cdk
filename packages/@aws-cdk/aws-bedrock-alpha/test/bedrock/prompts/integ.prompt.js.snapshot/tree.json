{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"},"children":{"aws-cdk-bedrock-prompt-1":{"id":"aws-cdk-bedrock-prompt-1","path":"aws-cdk-bedrock-prompt-1","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"SimplePrompt":{"id":"SimplePrompt","path":"aws-cdk-bedrock-prompt-1/SimplePrompt","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.Prompt","version":"0.0.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/SimplePrompt/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnPrompt","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Prompt","aws:cdk:cloudformation:props":{"description":"A simple prompt for integration testing","name":"simple-test-prompt","variants":[]}}}}},"TextPrompt":{"id":"TextPrompt","path":"aws-cdk-bedrock-prompt-1/TextPrompt","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.Prompt","version":"0.0.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/TextPrompt/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnPrompt","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Prompt","aws:cdk:cloudformation:props":{"tags":{"Environment":"test","Purpose":"integration-testing","Team":"bedrock-team","Type":"text"},"defaultVariant":"text-variant","description":"A text prompt for comprehensive testing","name":"text-test-prompt","variants":[{"name":"text-variant","templateType":"TEXT","templateConfiguration":{"text":{"inputVariables":[{"name":"name"},{"name":"topic"}],"text":"Hello {{name}}, how can I help you with {{topic}} today?"}},"modelId":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},"::foundation-model/anthropic.claude-3-5-sonnet-20241022-v2:0"]]},"inferenceConfiguration":{"text":{"maxTokens":200,"temperature":0.7,"topP":0.9}}}]}}},"PromptVersion-a9d8ed0d16ecad41aa9a65941b3b315c":{"id":"PromptVersion-a9d8ed0d16ecad41aa9a65941b3b315c","path":"aws-cdk-bedrock-prompt-1/TextPrompt/PromptVersion-a9d8ed0d16ecad41aa9a65941b3b315c","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.PromptVersion","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/TextPrompt/PromptVersion-a9d8ed0d16ecad41aa9a65941b3b315c/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnPromptVersion","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::PromptVersion","aws:cdk:cloudformation:props":{"description":"Version 1.1 created via prompt method","promptArn":{"Fn::GetAtt":["TextPrompt9846B9B3","Arn"]}}}}}}}},"ChatPrompt":{"id":"ChatPrompt","path":"aws-cdk-bedrock-prompt-1/ChatPrompt","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.Prompt","version":"0.0.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/ChatPrompt/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnPrompt","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Prompt","aws:cdk:cloudformation:props":{"tags":{"Environment":"test","Purpose":"integration-testing","Team":"bedrock-team","Type":"chat"},"defaultVariant":"chat-variant","description":"A chat prompt for comprehensive testing","name":"chat-test-prompt","variants":[{"name":"chat-variant","templateType":"CHAT","templateConfiguration":{"chat":{"inputVariables":[{"name":"topic"},{"name":"concept"}],"messages":[{"role":"user","content":[{"text":"Hello, I need help with {{topic}}"}]},{"role":"assistant","content":[{"text":"I'd be happy to help you with that topic. What specific questions do you have?"}]},{"role":"user","content":[{"text":"Please explain {{concept}} in simple terms"}]}],"system":[{"text":"You are a helpful assistant that explains complex topics in simple, easy-to-understand language."}]}},"modelId":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},"::foundation-model/anthropic.claude-3-5-sonnet-20241022-v2:0"]]},"inferenceConfiguration":{"text":{"maxTokens":300,"temperature":0.8}}}]}}},"PromptVersion-a6be9dc24f50fe69e0c02a396d5256e2":{"id":"PromptVersion-a6be9dc24f50fe69e0c02a396d5256e2","path":"aws-cdk-bedrock-prompt-1/ChatPrompt/PromptVersion-a6be9dc24f50fe69e0c02a396d5256e2","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.PromptVersion","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/ChatPrompt/PromptVersion-a6be9dc24f50fe69e0c02a396d5256e2/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnPromptVersion","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::PromptVersion","aws:cdk:cloudformation:props":{"description":"Version 1.1 created via prompt method","promptArn":{"Fn::GetAtt":["ChatPrompt7050E95A","Arn"]}}}}}}}},"TextPromptVersion":{"id":"TextPromptVersion","path":"aws-cdk-bedrock-prompt-1/TextPromptVersion","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.PromptVersion","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/TextPromptVersion/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnPromptVersion","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::PromptVersion","aws:cdk:cloudformation:props":{"description":"Version 1.0 of the text prompt for production deployment","promptArn":{"Fn::GetAtt":["TextPrompt9846B9B3","Arn"]}}}}}},"ChatPromptVersion":{"id":"ChatPromptVersion","path":"aws-cdk-bedrock-prompt-1/ChatPromptVersion","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.PromptVersion","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/ChatPromptVersion/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnPromptVersion","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::PromptVersion","aws:cdk:cloudformation:props":{"description":"Version 1.0 of the chat prompt for production deployment","promptArn":{"Fn::GetAtt":["ChatPrompt7050E95A","Arn"]}}}}}},"EncryptedPrompt":{"id":"EncryptedPrompt","path":"aws-cdk-bedrock-prompt-1/EncryptedPrompt","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.Prompt","version":"0.0.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/EncryptedPrompt/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnPrompt","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Prompt","aws:cdk:cloudformation:props":{"description":"A prompt encrypted with customer-managed KMS key","name":"encrypted-test-prompt","variants":[{"name":"encrypted-variant","templateType":"TEXT","templateConfiguration":{"text":{"inputVariables":[{"name":"data"}],"text":"This is an encrypted prompt with sensitive data: {{data}}"}},"modelId":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},"::foundation-model/anthropic.claude-3-5-sonnet-20241022-v2:0"]]}}]}}}}},"ToolPrompt":{"id":"ToolPrompt","path":"aws-cdk-bedrock-prompt-1/ToolPrompt","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.Prompt","version":"0.0.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/ToolPrompt/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnPrompt","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Prompt","aws:cdk:cloudformation:props":{"defaultVariant":"chat-with-tools","description":"A prompt that demonstrates tool usage capabilities","name":"tool-enabled-prompt","variants":[{"name":"chat-with-tools","templateType":"CHAT","templateConfiguration":{"chat":{"inputVariables":[{"name":"request"}],"messages":[{"role":"user","content":[{"text":"I need help with {{request}}. Please use the appropriate tools if needed."}]}],"system":[{"text":"You are a helpful assistant with access to weather and calculator tools. Use them when appropriate to help users."}],"toolConfiguration":{"toolChoice":{"auto":{}},"tools":[{"toolSpec":{"name":"weather_tool","description":"Get current weather information for a location","inputSchema":{"json":{"type":"object","properties":{"location":{"type":"string","description":"The city and state, e.g. San Francisco, CA"},"unit":{"type":"string","enum":["celsius","fahrenheit"],"description":"The unit for temperature"}},"required":["location"]}}}},{"toolSpec":{"name":"calculator","description":"Perform mathematical calculations","inputSchema":{"json":{"type":"object","properties":{"expression":{"type":"string","description":"Mathematical expression to evaluate"}},"required":["expression"]}}}}]}}},"modelId":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},"::foundation-model/anthropic.claude-3-5-sonnet-20241022-v2:0"]]},"inferenceConfiguration":{"text":{"maxTokens":500,"temperature":0.6}}}]}}}}},"TestAgent":{"id":"TestAgent","path":"aws-cdk-bedrock-prompt-1/TestAgent","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.Agent","version":"0.0.0","metadata":["*","*","*"]},"children":{"Role":{"id":"Role","path":"aws-cdk-bedrock-prompt-1/TestAgent/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportRole":{"id":"ImportRole","path":"aws-cdk-bedrock-prompt-1/TestAgent/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/TestAgent/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Condition":{"StringEquals":{"aws:SourceAccount":{"Ref":"AWS::AccountId"}},"ArnLike":{"aws:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":agent/*"]]}}},"Effect":"Allow","Principal":{"Service":"bedrock.amazonaws.com"}}],"Version":"2012-10-17"},"roleName":"agent-awscdkbedrockprompt1-testagent-18c0dbd9-bedrockagent"}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-bedrock-prompt-1/TestAgent/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/TestAgent/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock:GetFoundationModel","bedrock:InvokeModel*"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},"::foundation-model/anthropic.claude-3-5-sonnet-20241022-v2:0"]]}}],"Version":"2012-10-17"},"policyName":"TestAgentRoleDefaultPolicy0A38CDBA","roles":[{"Ref":"TestAgentRole522C6259"}]}}}}}}},"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/TestAgent/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgent","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Agent","aws:cdk:cloudformation:props":{"actionGroups":[{"actionGroupName":"UserInputAction","actionGroupState":"DISABLED","parentActionGroupSignature":"AMAZON.UserInput","skipResourceInUseCheckOnDelete":false},{"actionGroupName":"CodeInterpreterAction","actionGroupState":"DISABLED","parentActionGroupSignature":"AMAZON.CodeInterpreter","skipResourceInUseCheckOnDelete":false}],"agentName":"integration-test-agent","agentResourceRoleArn":{"Fn::GetAtt":["TestAgentRole522C6259","Arn"]},"autoPrepare":false,"foundationModel":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},"::foundation-model/anthropic.claude-3-5-sonnet-20241022-v2:0"]]},"idleSessionTtlInSeconds":600,"instruction":"This is a test agent for integration testing prompt variants with agent capabilities","orchestrationType":"DEFAULT","skipResourceInUseCheckOnDelete":true}}},"DefaultAlias":{"id":"DefaultAlias","path":"aws-cdk-bedrock-prompt-1/TestAgent/DefaultAlias","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.AgentAliasBase","version":"0.0.0","metadata":[]}}}},"TestAgentAlias":{"id":"TestAgentAlias","path":"aws-cdk-bedrock-prompt-1/TestAgentAlias","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.AgentAlias","version":"0.0.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/TestAgentAlias/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnAgentAlias","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::AgentAlias","aws:cdk:cloudformation:props":{"agentAliasName":"test-alias","agentId":{"Fn::GetAtt":["TestAgent44AF1AE6","AgentId"]}}}}}},"AgentPrompt":{"id":"AgentPrompt","path":"aws-cdk-bedrock-prompt-1/AgentPrompt","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.Prompt","version":"0.0.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/AgentPrompt/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnPrompt","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::Prompt","aws:cdk:cloudformation:props":{"defaultVariant":"agent-variant","description":"A prompt that uses an agent variant for specialized task handling","name":"agent-integration-prompt","variants":[{"name":"agent-variant","templateType":"TEXT","templateConfiguration":{"text":{"inputVariables":[{"name":"task"}],"text":"Agent, please help the user with {{task}} using your specialized capabilities."}},"genAiResource":{"agent":{"agentIdentifier":{"Fn::GetAtt":["TestAgentAliasB1EC95BA","AgentAliasArn"]}}}}]}}}}},"ImportedPrompt":{"id":"ImportedPrompt","path":"aws-cdk-bedrock-prompt-1/ImportedPrompt","constructInfo":{"fqn":"@aws-cdk/aws-bedrock-alpha.PromptBase","version":"0.0.0","metadata":[]}},"TestRole":{"id":"TestRole","path":"aws-cdk-bedrock-prompt-1/TestRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"description":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportTestRole":{"id":"ImportTestRole","path":"aws-cdk-bedrock-prompt-1/TestRole/ImportTestRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/TestRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Role for testing prompt permissions"}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-bedrock-prompt-1/TestRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-bedrock-prompt-1/TestRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"bedrock:GetPrompt","Effect":"Allow","Resource":["arn:aws:bedrock:us-east-1:123456789012:prompt/IMPORTED12345",{"Fn::GetAtt":["ChatPrompt7050E95A","Arn"]},{"Fn::GetAtt":["EncryptedPromptDF76BEA0","Arn"]},{"Fn::GetAtt":["TextPrompt9846B9B3","Arn"]}]}],"Version":"2012-10-17"},"policyName":"TestRoleDefaultPolicyD1C92014","roles":[{"Ref":"TestRole6C9272DF"}]}}}}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"aws-cdk-bedrock-prompt-1/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"aws-cdk-bedrock-prompt-1/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}},"BedrockPrompt":{"id":"BedrockPrompt","path":"BedrockPrompt","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"BedrockPrompt/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"},"children":{"Default":{"id":"Default","path":"BedrockPrompt/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"BedrockPrompt/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"BedrockPrompt/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BedrockPrompt/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}