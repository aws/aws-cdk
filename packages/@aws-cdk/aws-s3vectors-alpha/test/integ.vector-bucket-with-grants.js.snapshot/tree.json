{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"},"children":{"VectorBucketWithGrantsTestStack":{"id":"VectorBucketWithGrantsTestStack","path":"VectorBucketWithGrantsTestStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"VectorBucket":{"id":"VectorBucket","path":"VectorBucketWithGrantsTestStack/VectorBucket","constructInfo":{"fqn":"@aws-cdk/aws-s3vectors-alpha.VectorBucket","version":"0.0.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VectorBucketWithGrantsTestStack/VectorBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3vectors.CfnVectorBucket","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3Vectors::VectorBucket","aws:cdk:cloudformation:props":{"vectorBucketName":"vector-bucket-with-grants"}}}}},"Index":{"id":"Index","path":"VectorBucketWithGrantsTestStack/Index","constructInfo":{"fqn":"@aws-cdk/aws-s3vectors-alpha.Index","version":"0.0.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"VectorBucketWithGrantsTestStack/Index/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3vectors.CfnIndex","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3Vectors::Index","aws:cdk:cloudformation:props":{"dataType":"float32","dimension":1536,"distanceMetric":"cosine","indexName":"test-index","vectorBucketArn":{"Fn::GetAtt":["VectorBucket7AA37AC5","VectorBucketArn"]}}}}}},"ReadRole":{"id":"ReadRole","path":"VectorBucketWithGrantsTestStack/ReadRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"description":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportReadRole":{"id":"ImportReadRole","path":"VectorBucketWithGrantsTestStack/ReadRole/ImportReadRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"VectorBucketWithGrantsTestStack/ReadRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Role with read permissions to vector bucket"}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VectorBucketWithGrantsTestStack/ReadRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"VectorBucketWithGrantsTestStack/ReadRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3vectors:GetIndex","s3vectors:GetVectors","s3vectors:ListIndexes","s3vectors:ListVectors"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["VectorBucket7AA37AC5","VectorBucketArn"]},{"Fn::Join":["",[{"Fn::GetAtt":["VectorBucket7AA37AC5","VectorBucketArn"]},"/index/*"]]},{"Fn::Join":["",[{"Fn::GetAtt":["VectorBucket7AA37AC5","VectorBucketArn"]},"/index/test-index"]]}]}],"Version":"2012-10-17"},"policyName":"ReadRoleDefaultPolicy8F6E34EE","roles":[{"Ref":"ReadRoleF724156F"}]}}}}}}},"WriteRole":{"id":"WriteRole","path":"VectorBucketWithGrantsTestStack/WriteRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"description":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportWriteRole":{"id":"ImportWriteRole","path":"VectorBucketWithGrantsTestStack/WriteRole/ImportWriteRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"VectorBucketWithGrantsTestStack/WriteRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Role with write permissions to vector bucket"}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VectorBucketWithGrantsTestStack/WriteRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"VectorBucketWithGrantsTestStack/WriteRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3vectors:CreateIndex","s3vectors:DeleteIndex","s3vectors:DeleteVectors","s3vectors:PutVectors"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["VectorBucket7AA37AC5","VectorBucketArn"]},{"Fn::Join":["",[{"Fn::GetAtt":["VectorBucket7AA37AC5","VectorBucketArn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"WriteRoleDefaultPolicy7F8B4A73","roles":[{"Ref":"WriteRoleDF5CC624"}]}}}}}}},"ReadWriteRole":{"id":"ReadWriteRole","path":"VectorBucketWithGrantsTestStack/ReadWriteRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"description":"*"},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportReadWriteRole":{"id":"ImportReadWriteRole","path":"VectorBucketWithGrantsTestStack/ReadWriteRole/ImportReadWriteRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"VectorBucketWithGrantsTestStack/ReadWriteRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Role with read/write permissions to vector bucket"}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"VectorBucketWithGrantsTestStack/ReadWriteRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"VectorBucketWithGrantsTestStack/ReadWriteRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3vectors:CreateIndex","s3vectors:DeleteIndex","s3vectors:DeleteVectors","s3vectors:GetIndex","s3vectors:GetVectors","s3vectors:ListIndexes","s3vectors:ListVectors","s3vectors:PutVectors"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["VectorBucket7AA37AC5","VectorBucketArn"]},{"Fn::Join":["",[{"Fn::GetAtt":["VectorBucket7AA37AC5","VectorBucketArn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ReadWriteRoleDefaultPolicy82ECA137","roles":[{"Ref":"ReadWriteRole39A63897"}]}}}}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"VectorBucketWithGrantsTestStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"VectorBucketWithGrantsTestStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}},"VectorBucketWithGrantsIntegTest":{"id":"VectorBucketWithGrantsIntegTest","path":"VectorBucketWithGrantsIntegTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"VectorBucketWithGrantsIntegTest/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"},"children":{"Default":{"id":"Default","path":"VectorBucketWithGrantsIntegTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"VectorBucketWithGrantsIntegTest/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"VectorBucketWithGrantsIntegTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"VectorBucketWithGrantsIntegTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}