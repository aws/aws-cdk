{
  "Resources": {
    "integrationtesteksclusterDefaultVpc395E1A86": {
      "Type": "AWS::EC2::VPC",
      "Properties": {
        "CidrBlock": "10.0.0.0/16",
        "EnableDnsHostnames": true,
        "EnableDnsSupport": true,
        "InstanceTenancy": "default",
        "Tags": [
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet1Subnet58061317": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "CidrBlock": "10.0.0.0/19",
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "AvailabilityZone": "test-region-1a",
        "MapPublicIpOnLaunch": true,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Public"
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Public"
          },
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet1"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet1RouteTable1D5A7569": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "Tags": [
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet1"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet1RouteTableAssociation4831B6A7": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet1RouteTable1D5A7569"
        },
        "SubnetId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet1Subnet58061317"
        }
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet1DefaultRoute33CE7FC3": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet1RouteTable1D5A7569"
        },
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "integrationtesteksclusterDefaultVpcIGW9ADAFE6F"
        }
      },
      "DependsOn": [
        "integrationtesteksclusterDefaultVpcVPCGWE4DC2204"
      ]
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet1EIP62A0A17B": {
      "Type": "AWS::EC2::EIP",
      "Properties": {
        "Domain": "vpc",
        "Tags": [
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet1"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet1NATGatewayC9C984F9": {
      "Type": "AWS::EC2::NatGateway",
      "Properties": {
        "SubnetId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet1Subnet58061317"
        },
        "AllocationId": {
          "Fn::GetAtt": [
            "integrationtesteksclusterDefaultVpcPublicSubnet1EIP62A0A17B",
            "AllocationId"
          ]
        },
        "Tags": [
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet1"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet2Subnet68EAAF11": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "CidrBlock": "10.0.32.0/19",
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "AvailabilityZone": "test-region-1b",
        "MapPublicIpOnLaunch": true,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Public"
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Public"
          },
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet2"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet2RouteTableA4C7B327": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "Tags": [
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet2"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet2RouteTableAssociation62710C52": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet2RouteTableA4C7B327"
        },
        "SubnetId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet2Subnet68EAAF11"
        }
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet2DefaultRoute253A231E": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet2RouteTableA4C7B327"
        },
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "integrationtesteksclusterDefaultVpcIGW9ADAFE6F"
        }
      },
      "DependsOn": [
        "integrationtesteksclusterDefaultVpcVPCGWE4DC2204"
      ]
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet2EIPFC53AC43": {
      "Type": "AWS::EC2::EIP",
      "Properties": {
        "Domain": "vpc",
        "Tags": [
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet2"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet2NATGatewayE109B761": {
      "Type": "AWS::EC2::NatGateway",
      "Properties": {
        "SubnetId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet2Subnet68EAAF11"
        },
        "AllocationId": {
          "Fn::GetAtt": [
            "integrationtesteksclusterDefaultVpcPublicSubnet2EIPFC53AC43",
            "AllocationId"
          ]
        },
        "Tags": [
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet2"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet3Subnet4307D52D": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "CidrBlock": "10.0.64.0/19",
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "AvailabilityZone": "test-region-1c",
        "MapPublicIpOnLaunch": true,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Public"
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Public"
          },
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet3"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet3RouteTable51E9DA7C": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "Tags": [
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet3"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet3RouteTableAssociation14A23BAF": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet3RouteTable51E9DA7C"
        },
        "SubnetId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet3Subnet4307D52D"
        }
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet3DefaultRouteB0117918": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet3RouteTable51E9DA7C"
        },
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "integrationtesteksclusterDefaultVpcIGW9ADAFE6F"
        }
      },
      "DependsOn": [
        "integrationtesteksclusterDefaultVpcVPCGWE4DC2204"
      ]
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet3EIP33828C59": {
      "Type": "AWS::EC2::EIP",
      "Properties": {
        "Domain": "vpc",
        "Tags": [
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet3"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPublicSubnet3NATGateway01B2F0F1": {
      "Type": "AWS::EC2::NatGateway",
      "Properties": {
        "SubnetId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet3Subnet4307D52D"
        },
        "AllocationId": {
          "Fn::GetAtt": [
            "integrationtesteksclusterDefaultVpcPublicSubnet3EIP33828C59",
            "AllocationId"
          ]
        },
        "Tags": [
          {
            "Key": "kubernetes.io/role/elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PublicSubnet3"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet1Subnet4E00CAFB": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "CidrBlock": "10.0.96.0/19",
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "AvailabilityZone": "test-region-1a",
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Private"
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Private"
          },
          {
            "Key": "kubernetes.io/role/internal-elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PrivateSubnet1"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet1RouteTable4A47F4AC": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "Tags": [
          {
            "Key": "kubernetes.io/role/internal-elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PrivateSubnet1"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet1RouteTableAssociation7482DD1E": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet1RouteTable4A47F4AC"
        },
        "SubnetId": {
          "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet1Subnet4E00CAFB"
        }
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet1DefaultRouteCC99A72C": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet1RouteTable4A47F4AC"
        },
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet1NATGatewayC9C984F9"
        }
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet2Subnet0C3539A8": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "CidrBlock": "10.0.128.0/19",
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "AvailabilityZone": "test-region-1b",
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Private"
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Private"
          },
          {
            "Key": "kubernetes.io/role/internal-elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PrivateSubnet2"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet2RouteTableD7E59903": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "Tags": [
          {
            "Key": "kubernetes.io/role/internal-elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PrivateSubnet2"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet2RouteTableAssociation99F934D5": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet2RouteTableD7E59903"
        },
        "SubnetId": {
          "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet2Subnet0C3539A8"
        }
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet2DefaultRoute50FF167F": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet2RouteTableD7E59903"
        },
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet2NATGatewayE109B761"
        }
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet3SubnetD17D4AF1": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "CidrBlock": "10.0.160.0/19",
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "AvailabilityZone": "test-region-1c",
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "aws-cdk:subnet-name",
            "Value": "Private"
          },
          {
            "Key": "aws-cdk:subnet-type",
            "Value": "Private"
          },
          {
            "Key": "kubernetes.io/role/internal-elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PrivateSubnet3"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet3RouteTableA2B42791": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "Tags": [
          {
            "Key": "kubernetes.io/role/internal-elb",
            "Value": "1"
          },
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc/PrivateSubnet3"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet3RouteTableAssociationB70598F3": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet3RouteTableA2B42791"
        },
        "SubnetId": {
          "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet3SubnetD17D4AF1"
        }
      }
    },
    "integrationtesteksclusterDefaultVpcPrivateSubnet3DefaultRoute6DE23E60": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "RouteTableId": {
          "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet3RouteTableA2B42791"
        },
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": {
          "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet3NATGateway01B2F0F1"
        }
      }
    },
    "integrationtesteksclusterDefaultVpcIGW9ADAFE6F": {
      "Type": "AWS::EC2::InternetGateway",
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": "aws-stepfunctions-tasks-emr-containers-all-services-integ/integration-test-eks-cluster/DefaultVpc"
          }
        ]
      }
    },
    "integrationtesteksclusterDefaultVpcVPCGWE4DC2204": {
      "Type": "AWS::EC2::VPCGatewayAttachment",
      "Properties": {
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        },
        "InternetGatewayId": {
          "Ref": "integrationtesteksclusterDefaultVpcIGW9ADAFE6F"
        }
      }
    },
    "integrationtesteksclusterRole03F70AF0": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "eks.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/AmazonEKSClusterPolicy"
              ]
            ]
          }
        ]
      }
    },
    "integrationtesteksclusterControlPlaneSecurityGroup6E92F333": {
      "Type": "AWS::EC2::SecurityGroup",
      "Properties": {
        "GroupDescription": "EKS Control Plane Security Group",
        "SecurityGroupEgress": [
          {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1"
          }
        ],
        "VpcId": {
          "Ref": "integrationtesteksclusterDefaultVpc395E1A86"
        }
      }
    },
    "integrationtesteksclusterCreationRoleB98FE02A": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":root"
                    ]
                  ]
                }
              }
            }
          ],
          "Version": "2012-10-17"
        }
      },
      "DependsOn": [
        "integrationtesteksclusterDefaultVpcIGW9ADAFE6F",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1DefaultRouteCC99A72C",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1RouteTable4A47F4AC",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1RouteTableAssociation7482DD1E",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1Subnet4E00CAFB",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2DefaultRoute50FF167F",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2RouteTableD7E59903",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2RouteTableAssociation99F934D5",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2Subnet0C3539A8",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3DefaultRoute6DE23E60",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3RouteTableA2B42791",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3RouteTableAssociationB70598F3",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3SubnetD17D4AF1",
        "integrationtesteksclusterDefaultVpcPublicSubnet1DefaultRoute33CE7FC3",
        "integrationtesteksclusterDefaultVpcPublicSubnet1EIP62A0A17B",
        "integrationtesteksclusterDefaultVpcPublicSubnet1NATGatewayC9C984F9",
        "integrationtesteksclusterDefaultVpcPublicSubnet1RouteTable1D5A7569",
        "integrationtesteksclusterDefaultVpcPublicSubnet1RouteTableAssociation4831B6A7",
        "integrationtesteksclusterDefaultVpcPublicSubnet1Subnet58061317",
        "integrationtesteksclusterDefaultVpcPublicSubnet2DefaultRoute253A231E",
        "integrationtesteksclusterDefaultVpcPublicSubnet2EIPFC53AC43",
        "integrationtesteksclusterDefaultVpcPublicSubnet2NATGatewayE109B761",
        "integrationtesteksclusterDefaultVpcPublicSubnet2RouteTableA4C7B327",
        "integrationtesteksclusterDefaultVpcPublicSubnet2RouteTableAssociation62710C52",
        "integrationtesteksclusterDefaultVpcPublicSubnet2Subnet68EAAF11",
        "integrationtesteksclusterDefaultVpcPublicSubnet3DefaultRouteB0117918",
        "integrationtesteksclusterDefaultVpcPublicSubnet3EIP33828C59",
        "integrationtesteksclusterDefaultVpcPublicSubnet3NATGateway01B2F0F1",
        "integrationtesteksclusterDefaultVpcPublicSubnet3RouteTable51E9DA7C",
        "integrationtesteksclusterDefaultVpcPublicSubnet3RouteTableAssociation14A23BAF",
        "integrationtesteksclusterDefaultVpcPublicSubnet3Subnet4307D52D",
        "integrationtesteksclusterDefaultVpc395E1A86",
        "integrationtesteksclusterDefaultVpcVPCGWE4DC2204"
      ]
    },
    "integrationtesteksclusterCreationRoleDefaultPolicy5417802D": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "iam:PassRole",
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "integrationtesteksclusterRole03F70AF0",
                  "Arn"
                ]
              }
            },
            {
              "Action": [
                "ec2:DescribeDhcpOptions",
                "ec2:DescribeInstances",
                "ec2:DescribeNetworkInterfaces",
                "ec2:DescribeRouteTables",
                "ec2:DescribeSecurityGroups",
                "ec2:DescribeSubnets",
                "ec2:DescribeVpcs",
                "eks:CreateCluster",
                "eks:CreateFargateProfile",
                "eks:DeleteCluster",
                "eks:DeleteFargateProfile",
                "eks:DescribeCluster",
                "eks:DescribeFargateProfile",
                "eks:DescribeUpdate",
                "eks:TagResource",
                "eks:UntagResource",
                "eks:UpdateClusterConfig",
                "eks:UpdateClusterVersion",
                "iam:CreateServiceLinkedRole",
                "iam:GetRole",
                "iam:listAttachedRolePolicies"
              ],
              "Effect": "Allow",
              "Resource": "*"
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "integrationtesteksclusterCreationRoleDefaultPolicy5417802D",
        "Roles": [
          {
            "Ref": "integrationtesteksclusterCreationRoleB98FE02A"
          }
        ]
      },
      "DependsOn": [
        "integrationtesteksclusterDefaultVpcIGW9ADAFE6F",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1DefaultRouteCC99A72C",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1RouteTable4A47F4AC",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1RouteTableAssociation7482DD1E",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1Subnet4E00CAFB",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2DefaultRoute50FF167F",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2RouteTableD7E59903",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2RouteTableAssociation99F934D5",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2Subnet0C3539A8",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3DefaultRoute6DE23E60",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3RouteTableA2B42791",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3RouteTableAssociationB70598F3",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3SubnetD17D4AF1",
        "integrationtesteksclusterDefaultVpcPublicSubnet1DefaultRoute33CE7FC3",
        "integrationtesteksclusterDefaultVpcPublicSubnet1EIP62A0A17B",
        "integrationtesteksclusterDefaultVpcPublicSubnet1NATGatewayC9C984F9",
        "integrationtesteksclusterDefaultVpcPublicSubnet1RouteTable1D5A7569",
        "integrationtesteksclusterDefaultVpcPublicSubnet1RouteTableAssociation4831B6A7",
        "integrationtesteksclusterDefaultVpcPublicSubnet1Subnet58061317",
        "integrationtesteksclusterDefaultVpcPublicSubnet2DefaultRoute253A231E",
        "integrationtesteksclusterDefaultVpcPublicSubnet2EIPFC53AC43",
        "integrationtesteksclusterDefaultVpcPublicSubnet2NATGatewayE109B761",
        "integrationtesteksclusterDefaultVpcPublicSubnet2RouteTableA4C7B327",
        "integrationtesteksclusterDefaultVpcPublicSubnet2RouteTableAssociation62710C52",
        "integrationtesteksclusterDefaultVpcPublicSubnet2Subnet68EAAF11",
        "integrationtesteksclusterDefaultVpcPublicSubnet3DefaultRouteB0117918",
        "integrationtesteksclusterDefaultVpcPublicSubnet3EIP33828C59",
        "integrationtesteksclusterDefaultVpcPublicSubnet3NATGateway01B2F0F1",
        "integrationtesteksclusterDefaultVpcPublicSubnet3RouteTable51E9DA7C",
        "integrationtesteksclusterDefaultVpcPublicSubnet3RouteTableAssociation14A23BAF",
        "integrationtesteksclusterDefaultVpcPublicSubnet3Subnet4307D52D",
        "integrationtesteksclusterDefaultVpc395E1A86",
        "integrationtesteksclusterDefaultVpcVPCGWE4DC2204"
      ]
    },
    "integrationtesteksclusterE5C0ED98": {
      "Type": "Custom::AWSCDK-EKS-Cluster",
      "Properties": {
        "ServiceToken": {
          "Fn::GetAtt": [
            "awscdkawseksClusterResourceProviderNestedStackawscdkawseksClusterResourceProviderNestedStackResource9827C454",
            "Outputs.awsstepfunctionstasksemrcontainersallservicesintegawscdkawseksClusterResourceProviderframeworkonEventFF3F425BArn"
          ]
        },
        "Config": {
          "version": "1.21",
          "roleArn": {
            "Fn::GetAtt": [
              "integrationtesteksclusterRole03F70AF0",
              "Arn"
            ]
          },
          "resourcesVpcConfig": {
            "subnetIds": [
              {
                "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet1Subnet58061317"
              },
              {
                "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet2Subnet68EAAF11"
              },
              {
                "Ref": "integrationtesteksclusterDefaultVpcPublicSubnet3Subnet4307D52D"
              },
              {
                "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet1Subnet4E00CAFB"
              },
              {
                "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet2Subnet0C3539A8"
              },
              {
                "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet3SubnetD17D4AF1"
              }
            ],
            "securityGroupIds": [
              {
                "Fn::GetAtt": [
                  "integrationtesteksclusterControlPlaneSecurityGroup6E92F333",
                  "GroupId"
                ]
              }
            ],
            "endpointPublicAccess": true,
            "endpointPrivateAccess": true
          }
        },
        "AssumeRoleArn": {
          "Fn::GetAtt": [
            "integrationtesteksclusterCreationRoleB98FE02A",
            "Arn"
          ]
        },
        "AttributesRevision": 2
      },
      "DependsOn": [
        "integrationtesteksclusterDefaultVpcIGW9ADAFE6F",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1DefaultRouteCC99A72C",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1RouteTable4A47F4AC",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1RouteTableAssociation7482DD1E",
        "integrationtesteksclusterDefaultVpcPrivateSubnet1Subnet4E00CAFB",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2DefaultRoute50FF167F",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2RouteTableD7E59903",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2RouteTableAssociation99F934D5",
        "integrationtesteksclusterDefaultVpcPrivateSubnet2Subnet0C3539A8",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3DefaultRoute6DE23E60",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3RouteTableA2B42791",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3RouteTableAssociationB70598F3",
        "integrationtesteksclusterDefaultVpcPrivateSubnet3SubnetD17D4AF1",
        "integrationtesteksclusterDefaultVpcPublicSubnet1DefaultRoute33CE7FC3",
        "integrationtesteksclusterDefaultVpcPublicSubnet1EIP62A0A17B",
        "integrationtesteksclusterDefaultVpcPublicSubnet1NATGatewayC9C984F9",
        "integrationtesteksclusterDefaultVpcPublicSubnet1RouteTable1D5A7569",
        "integrationtesteksclusterDefaultVpcPublicSubnet1RouteTableAssociation4831B6A7",
        "integrationtesteksclusterDefaultVpcPublicSubnet1Subnet58061317",
        "integrationtesteksclusterDefaultVpcPublicSubnet2DefaultRoute253A231E",
        "integrationtesteksclusterDefaultVpcPublicSubnet2EIPFC53AC43",
        "integrationtesteksclusterDefaultVpcPublicSubnet2NATGatewayE109B761",
        "integrationtesteksclusterDefaultVpcPublicSubnet2RouteTableA4C7B327",
        "integrationtesteksclusterDefaultVpcPublicSubnet2RouteTableAssociation62710C52",
        "integrationtesteksclusterDefaultVpcPublicSubnet2Subnet68EAAF11",
        "integrationtesteksclusterDefaultVpcPublicSubnet3DefaultRouteB0117918",
        "integrationtesteksclusterDefaultVpcPublicSubnet3EIP33828C59",
        "integrationtesteksclusterDefaultVpcPublicSubnet3NATGateway01B2F0F1",
        "integrationtesteksclusterDefaultVpcPublicSubnet3RouteTable51E9DA7C",
        "integrationtesteksclusterDefaultVpcPublicSubnet3RouteTableAssociation14A23BAF",
        "integrationtesteksclusterDefaultVpcPublicSubnet3Subnet4307D52D",
        "integrationtesteksclusterDefaultVpc395E1A86",
        "integrationtesteksclusterDefaultVpcVPCGWE4DC2204",
        "integrationtesteksclusterCreationRoleDefaultPolicy5417802D",
        "integrationtesteksclusterCreationRoleB98FE02A"
      ],
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete"
    },
    "integrationtesteksclusterKubectlReadyBarrier0D4A21B0": {
      "Type": "AWS::SSM::Parameter",
      "Properties": {
        "Type": "String",
        "Value": "aws:cdk:eks:kubectl-ready"
      },
      "DependsOn": [
        "integrationtesteksclusterCreationRoleDefaultPolicy5417802D",
        "integrationtesteksclusterCreationRoleB98FE02A",
        "integrationtesteksclusterE5C0ED98"
      ]
    },
    "integrationtesteksclusterMastersRole63B9B0BF": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "AWS": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":iam::",
                      {
                        "Ref": "AWS::AccountId"
                      },
                      ":root"
                    ]
                  ]
                }
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "integrationtesteksclusterAwsAuthmanifestAEF9C6DF": {
      "Type": "Custom::AWSCDK-EKS-KubernetesResource",
      "Properties": {
        "ServiceToken": {
          "Fn::GetAtt": [
            "awscdkawseksKubectlProviderNestedStackawscdkawseksKubectlProviderNestedStackResourceA7AEBA6B",
            "Outputs.awsstepfunctionstasksemrcontainersallservicesintegawscdkawseksKubectlProviderframeworkonEvent3B33A326Arn"
          ]
        },
        "Manifest": {
          "Fn::Join": [
            "",
            [
              "[{\"apiVersion\":\"v1\",\"kind\":\"ConfigMap\",\"metadata\":{\"name\":\"aws-auth\",\"namespace\":\"kube-system\",\"labels\":{\"aws.cdk.eks/prune-c89f1e1be2a935f1b46af591dd13f7d1a5d084570d\":\"\"}},\"data\":{\"mapRoles\":\"[{\\\"rolearn\\\":\\\"",
              {
                "Fn::GetAtt": [
                  "integrationtesteksclusterMastersRole63B9B0BF",
                  "Arn"
                ]
              },
              "\\\",\\\"username\\\":\\\"",
              {
                "Fn::GetAtt": [
                  "integrationtesteksclusterMastersRole63B9B0BF",
                  "Arn"
                ]
              },
              "\\\",\\\"groups\\\":[\\\"system:masters\\\"]},{\\\"rolearn\\\":\\\"",
              {
                "Fn::GetAtt": [
                  "integrationtesteksclusterNodegroupDefaultCapacityNodeGroupRole75D45BA7",
                  "Arn"
                ]
              },
              "\\\",\\\"username\\\":\\\"system:node:{{EC2PrivateDNSName}}\\\",\\\"groups\\\":[\\\"system:bootstrappers\\\",\\\"system:nodes\\\"]}]\",\"mapUsers\":\"[]\",\"mapAccounts\":\"[]\"}}]"
            ]
          ]
        },
        "ClusterName": {
          "Ref": "integrationtesteksclusterE5C0ED98"
        },
        "RoleArn": {
          "Fn::GetAtt": [
            "integrationtesteksclusterCreationRoleB98FE02A",
            "Arn"
          ]
        },
        "PruneLabel": "aws.cdk.eks/prune-c89f1e1be2a935f1b46af591dd13f7d1a5d084570d",
        "Overwrite": true
      },
      "DependsOn": [
        "integrationtesteksclusterKubectlReadyBarrier0D4A21B0"
      ],
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete"
    },
    "integrationtesteksclusterNodegroupDefaultCapacityNodeGroupRole75D45BA7": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": {
                  "Fn::Join": [
                    "",
                    [
                      "ec2.",
                      {
                        "Ref": "AWS::URLSuffix"
                      }
                    ]
                  ]
                }
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/AmazonEKSWorkerNodePolicy"
              ]
            ]
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/AmazonEKS_CNI_Policy"
              ]
            ]
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"
              ]
            ]
          }
        ]
      }
    },
    "integrationtesteksclusterNodegroupDefaultCapacity536CF32C": {
      "Type": "AWS::EKS::Nodegroup",
      "Properties": {
        "ClusterName": {
          "Ref": "integrationtesteksclusterE5C0ED98"
        },
        "NodeRole": {
          "Fn::GetAtt": [
            "integrationtesteksclusterNodegroupDefaultCapacityNodeGroupRole75D45BA7",
            "Arn"
          ]
        },
        "Subnets": [
          {
            "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet1Subnet4E00CAFB"
          },
          {
            "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet2Subnet0C3539A8"
          },
          {
            "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet3SubnetD17D4AF1"
          }
        ],
        "AmiType": "AL2_x86_64",
        "ForceUpdateEnabled": true,
        "InstanceTypes": [
          "m5.xlarge"
        ],
        "ScalingConfig": {
          "DesiredSize": 3,
          "MaxSize": 3,
          "MinSize": 3
        }
      }
    },
    "awscdkawseksClusterResourceProviderNestedStackawscdkawseksClusterResourceProviderNestedStackResource9827C454": {
      "Type": "AWS::CloudFormation::Stack",
      "Properties": {
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.",
              {
                "Ref": "AWS::Region"
              },
              ".",
              {
                "Ref": "AWS::URLSuffix"
              },
              "/",
              {
                "Ref": "AssetParameters2a5ab35f4420d68f96a6e36cc4fc8d320de3bcf01199547acb57af0530db174aS3Bucket2F5D4D08"
              },
              "/",
              {
                "Fn::Select": [
                  0,
                  {
                    "Fn::Split": [
                      "||",
                      {
                        "Ref": "AssetParameters2a5ab35f4420d68f96a6e36cc4fc8d320de3bcf01199547acb57af0530db174aS3VersionKeyA75A8D2B"
                      }
                    ]
                  }
                ]
              },
              {
                "Fn::Select": [
                  1,
                  {
                    "Fn::Split": [
                      "||",
                      {
                        "Ref": "AssetParameters2a5ab35f4420d68f96a6e36cc4fc8d320de3bcf01199547acb57af0530db174aS3VersionKeyA75A8D2B"
                      }
                    ]
                  }
                ]
              }
            ]
          ]
        },
        "Parameters": {
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParameters4288ebb3652acdf2d828b7db7ca44a7162a401ace50ebb4026e84b18a02a06eeS3BucketE001F8ECRef": {
            "Ref": "AssetParameters4288ebb3652acdf2d828b7db7ca44a7162a401ace50ebb4026e84b18a02a06eeS3Bucket4E7CD097"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParameters4288ebb3652acdf2d828b7db7ca44a7162a401ace50ebb4026e84b18a02a06eeS3VersionKey112AFD6DRef": {
            "Ref": "AssetParameters4288ebb3652acdf2d828b7db7ca44a7162a401ace50ebb4026e84b18a02a06eeS3VersionKey93D16224"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegintegrationtesteksclusterCreationRole78F8A91EArn": {
            "Fn::GetAtt": [
              "integrationtesteksclusterCreationRoleB98FE02A",
              "Arn"
            ]
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParameters8b11ea303df4b9db9feef6ed5f901a2d1185023a40c80c9630cf5c36559ae647S3Bucket970D47D8Ref": {
            "Ref": "AssetParameters8b11ea303df4b9db9feef6ed5f901a2d1185023a40c80c9630cf5c36559ae647S3Bucket05488C5E"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParameters8b11ea303df4b9db9feef6ed5f901a2d1185023a40c80c9630cf5c36559ae647S3VersionKey130969C4Ref": {
            "Ref": "AssetParameters8b11ea303df4b9db9feef6ed5f901a2d1185023a40c80c9630cf5c36559ae647S3VersionKey174B23DF"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391S3Bucket3AEB52A5Ref": {
            "Ref": "AssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391S3BucketB4102E9A"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391S3VersionKey7B083B20Ref": {
            "Ref": "AssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391S3VersionKeyC1EC3ED6"
          }
        }
      },
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete"
    },
    "awscdkawseksKubectlProviderNestedStackawscdkawseksKubectlProviderNestedStackResourceA7AEBA6B": {
      "Type": "AWS::CloudFormation::Stack",
      "Properties": {
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.",
              {
                "Ref": "AWS::Region"
              },
              ".",
              {
                "Ref": "AWS::URLSuffix"
              },
              "/",
              {
                "Ref": "AssetParameters55ab944087ff7fca11470005814dff76a703d8bf01b6f1569046163522029e67S3Bucket7A7690F3"
              },
              "/",
              {
                "Fn::Select": [
                  0,
                  {
                    "Fn::Split": [
                      "||",
                      {
                        "Ref": "AssetParameters55ab944087ff7fca11470005814dff76a703d8bf01b6f1569046163522029e67S3VersionKeyC21848A0"
                      }
                    ]
                  }
                ]
              },
              {
                "Fn::Select": [
                  1,
                  {
                    "Fn::Split": [
                      "||",
                      {
                        "Ref": "AssetParameters55ab944087ff7fca11470005814dff76a703d8bf01b6f1569046163522029e67S3VersionKeyC21848A0"
                      }
                    ]
                  }
                ]
              }
            ]
          ]
        },
        "Parameters": {
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegintegrationtestekscluster4FFBB19EArn": {
            "Fn::GetAtt": [
              "integrationtesteksclusterE5C0ED98",
              "Arn"
            ]
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegintegrationtesteksclusterCreationRole78F8A91EArn": {
            "Fn::GetAtt": [
              "integrationtesteksclusterCreationRoleB98FE02A",
              "Arn"
            ]
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParametersa70c48e7047fb793b2378668accb1dc2d92f2d7b1fff80c9c718f4964dc69cb8S3BucketA20ABE41Ref": {
            "Ref": "AssetParametersa70c48e7047fb793b2378668accb1dc2d92f2d7b1fff80c9c718f4964dc69cb8S3Bucket4CD5FFC3"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParametersa70c48e7047fb793b2378668accb1dc2d92f2d7b1fff80c9c718f4964dc69cb8S3VersionKey968B9973Ref": {
            "Ref": "AssetParametersa70c48e7047fb793b2378668accb1dc2d92f2d7b1fff80c9c718f4964dc69cb8S3VersionKeyE06BA291"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegintegrationtesteksclusterDefaultVpcPrivateSubnet1SubnetFBC220C4Ref": {
            "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet1Subnet4E00CAFB"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegintegrationtesteksclusterDefaultVpcPrivateSubnet2Subnet7E4A5E3BRef": {
            "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet2Subnet0C3539A8"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegintegrationtesteksclusterDefaultVpcPrivateSubnet3Subnet482649D5Ref": {
            "Ref": "integrationtesteksclusterDefaultVpcPrivateSubnet3SubnetD17D4AF1"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegintegrationtestekscluster4FFBB19EClusterSecurityGroupId": {
            "Fn::GetAtt": [
              "integrationtesteksclusterE5C0ED98",
              "ClusterSecurityGroupId"
            ]
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParametersf331b32a8ad8983464106a58e420e7bc7e6341ba2ffb8ac9ad350d7e32845d95S3BucketC3A07F1BRef": {
            "Ref": "AssetParametersf331b32a8ad8983464106a58e420e7bc7e6341ba2ffb8ac9ad350d7e32845d95S3BucketE02B5488"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParametersf331b32a8ad8983464106a58e420e7bc7e6341ba2ffb8ac9ad350d7e32845d95S3VersionKey9350B036Ref": {
            "Ref": "AssetParametersf331b32a8ad8983464106a58e420e7bc7e6341ba2ffb8ac9ad350d7e32845d95S3VersionKey4D8E71F2"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParametersea17febe6d04c66048f3e8e060c71685c0cb53122abceff44842d27bc0d4a03eS3Bucket8CD29A22Ref": {
            "Ref": "AssetParametersea17febe6d04c66048f3e8e060c71685c0cb53122abceff44842d27bc0d4a03eS3BucketD3288998"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParametersea17febe6d04c66048f3e8e060c71685c0cb53122abceff44842d27bc0d4a03eS3VersionKeyE130152FRef": {
            "Ref": "AssetParametersea17febe6d04c66048f3e8e060c71685c0cb53122abceff44842d27bc0d4a03eS3VersionKeyB00C0565"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391S3Bucket3AEB52A5Ref": {
            "Ref": "AssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391S3BucketB4102E9A"
          },
          "referencetoawsstepfunctionstasksemrcontainersallservicesintegAssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391S3VersionKey7B083B20Ref": {
            "Ref": "AssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391S3VersionKeyC1EC3ED6"
          }
        }
      },
      "UpdateReplacePolicy": "Delete",
      "DeletionPolicy": "Delete"
    },
    "JobExecutionRoleF19B4342": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "emr-containers.amazonaws.com",
                  {
                    "Fn::Join": [
                      "",
                      [
                        "states.",
                        {
                          "Ref": "AWS::Region"
                        },
                        ".amazonaws.com"
                      ]
                    ]
                  }
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "JobExecutionRolePolicy6968CCB9": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "s3:Abort*",
                "s3:DeleteObject*",
                "s3:GetBucket*",
                "s3:GetObject*",
                "s3:List*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging"
              ],
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::GetAtt": [
                    "StartaJobRunMonitoringBucket899C33D9",
                    "Arn"
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::GetAtt": [
                          "StartaJobRunMonitoringBucket899C33D9",
                          "Arn"
                        ]
                      },
                      "/*"
                    ]
                  ]
                }
              ]
            },
            {
              "Action": [
                "logs:CreateLogStream",
                "logs:DescribeLogStreams",
                "logs:PutLogEvents"
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "StartaJobRunMonitoringLogGroupD033B7AF",
                  "Arn"
                ]
              }
            },
            {
              "Action": "logs:DescribeLogGroups",
              "Effect": "Allow",
              "Resource": "arn:aws:logs:*:*:*"
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "JobExecutionRolePolicy6968CCB9",
        "Roles": [
          {
            "Fn::Select": [
              1,
              {
                "Fn::Split": [
                  "/",
                  {
                    "Fn::Select": [
                      5,
                      {
                        "Fn::Split": [
                          ":",
                          {
                            "Fn::GetAtt": [
                              "JobExecutionRoleF19B4342",
                              "Arn"
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    },
    "StartaJobRunMonitoringLogGroupD033B7AF": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "RetentionInDays": 731
      },
      "UpdateReplacePolicy": "Retain",
      "DeletionPolicy": "Retain"
    },
    "StartaJobRunMonitoringBucket899C33D9": {
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
      "DeletionPolicy": "Retain"
    },
    "StateMachineRoleB840431D": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": {
                  "Fn::Join": [
                    "",
                    [
                      "states.",
                      {
                        "Ref": "AWS::Region"
                      },
                      ".amazonaws.com"
                    ]
                  ]
                }
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "StateMachineRoleDefaultPolicyDF1E6607": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "emr-containers:CreateVirtualCluster",
              "Effect": "Allow",
              "Resource": "*"
            },
            {
              "Action": "iam:CreateServiceLinkedRole",
              "Condition": {
                "StringLike": {
                  "iam:AWSServiceName": "emr-containers.amazonaws.com"
                }
              },
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":role/aws-service-role/emr-containers.amazonaws.com/AWSServiceRoleForAmazonEMRContainers"
                  ]
                ]
              }
            },
            {
              "Action": "emr-containers:StartJobRun",
              "Condition": {
                "StringEquals": {
                  "emr-containers:ExecutionRoleArn": {
                    "Fn::GetAtt": [
                      "JobExecutionRoleF19B4342",
                      "Arn"
                    ]
                  }
                }
              },
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":emr-containers:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":/virtualclusters/*"
                  ]
                ]
              }
            },
            {
              "Action": [
                "emr-containers:CancelJobRun",
                "emr-containers:DeleteVirtualCluster",
                "emr-containers:DescribeJobRun"
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":emr-containers:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":/virtualclusters/*"
                  ]
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "StateMachineRoleDefaultPolicyDF1E6607",
        "Roles": [
          {
            "Ref": "StateMachineRoleB840431D"
          }
        ]
      }
    },
    "StateMachine2E01A3A5": {
      "Type": "AWS::StepFunctions::StateMachine",
      "Properties": {
        "RoleArn": {
          "Fn::GetAtt": [
            "StateMachineRoleB840431D",
            "Arn"
          ]
        },
        "DefinitionString": {
          "Fn::Join": [
            "",
            [
              "{\"StartAt\":\"Create a virtual Cluster\",\"States\":{\"Create a virtual Cluster\":{\"Next\":\"Start a Job Run\",\"Type\":\"Task\",\"ResultPath\":\"$.cluster\",\"Resource\":\"arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":states:::emr-containers:createVirtualCluster\",\"Parameters\":{\"Name\":\"Virtual-Cluster-Name\",\"ContainerProvider\":{\"Id\":\"",
              {
                "Ref": "integrationtesteksclusterE5C0ED98"
              },
              "\",\"Info\":{\"EksInfo\":{\"Namespace\":\"default\"}},\"Type\":\"EKS\"}}},\"Start a Job Run\":{\"Next\":\"Delete a Virtual Cluster\",\"Type\":\"Task\",\"ResultPath\":\"$.job\",\"Resource\":\"arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":states:::emr-containers:startJobRun.sync\",\"Parameters\":{\"VirtualClusterId.$\":\"$.cluster.Id\",\"Name\":\"EMR-Containers-Job\",\"ExecutionRoleArn\":\"",
              {
                "Fn::GetAtt": [
                  "JobExecutionRoleF19B4342",
                  "Arn"
                ]
              },
              "\",\"ReleaseLabel\":\"emr-6.2.0-latest\",\"JobDriver\":{\"SparkSubmitJobDriver\":{\"EntryPoint\":\"local:///usr/lib/spark/examples/src/main/python/pi.py\",\"EntryPointArguments\":[\"2\"],\"SparkSubmitParameters\":\"--conf spark.driver.memory=512M --conf spark.kubernetes.driver.request.cores=0.2 --conf spark.kubernetes.executor.request.cores=0.2 --conf spark.sql.shuffle.partitions=60 --conf spark.dynamicAllocation.enabled=false\"}},\"ConfigurationOverrides\":{\"ApplicationConfiguration\":[{\"Classification\":\"spark-defaults\",\"Properties\":{\"spark.executor.instances\":\"1\",\"spark.executor.memory\":\"512M\"}}],\"MonitoringConfiguration\":{\"CloudWatchMonitoringConfiguration\":{\"LogGroupName\":\"",
              {
                "Ref": "StartaJobRunMonitoringLogGroupD033B7AF"
              },
              "\"},\"PersistentAppUI\":\"ENABLED\",\"S3MonitoringConfiguration\":{\"LogUri\":\"s3://",
              {
                "Ref": "StartaJobRunMonitoringBucket899C33D9"
              },
              "\"}}}}},\"Delete a Virtual Cluster\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":states:::emr-containers:deleteVirtualCluster\",\"Parameters\":{\"Id.$\":\"$.job.VirtualClusterId\"}}},\"TimeoutSeconds\":1200}"
            ]
          ]
        }
      },
      "DependsOn": [
        "StateMachineRoleDefaultPolicyDF1E6607",
        "StateMachineRoleB840431D"
      ]
    }
  },
  "Outputs": {
    "integrationtesteksclusterConfigCommandFA814999": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "aws eks update-kubeconfig --name ",
            {
              "Ref": "integrationtesteksclusterE5C0ED98"
            },
            " --region ",
            {
              "Ref": "AWS::Region"
            },
            " --role-arn ",
            {
              "Fn::GetAtt": [
                "integrationtesteksclusterMastersRole63B9B0BF",
                "Arn"
              ]
            }
          ]
        ]
      }
    },
    "integrationtesteksclusterGetTokenCommandD7B92682": {
      "Value": {
        "Fn::Join": [
          "",
          [
            "aws eks get-token --cluster-name ",
            {
              "Ref": "integrationtesteksclusterE5C0ED98"
            },
            " --region ",
            {
              "Ref": "AWS::Region"
            },
            " --role-arn ",
            {
              "Fn::GetAtt": [
                "integrationtesteksclusterMastersRole63B9B0BF",
                "Arn"
              ]
            }
          ]
        ]
      }
    },
    "stateMachineArn": {
      "Value": {
        "Ref": "StateMachine2E01A3A5"
      }
    }
  },
  "Parameters": {
    "AssetParameters4288ebb3652acdf2d828b7db7ca44a7162a401ace50ebb4026e84b18a02a06eeS3Bucket4E7CD097": {
      "Type": "String",
      "Description": "S3 bucket for asset \"4288ebb3652acdf2d828b7db7ca44a7162a401ace50ebb4026e84b18a02a06ee\""
    },
    "AssetParameters4288ebb3652acdf2d828b7db7ca44a7162a401ace50ebb4026e84b18a02a06eeS3VersionKey93D16224": {
      "Type": "String",
      "Description": "S3 key for asset version \"4288ebb3652acdf2d828b7db7ca44a7162a401ace50ebb4026e84b18a02a06ee\""
    },
    "AssetParameters4288ebb3652acdf2d828b7db7ca44a7162a401ace50ebb4026e84b18a02a06eeArtifactHash515E16AE": {
      "Type": "String",
      "Description": "Artifact hash for asset \"4288ebb3652acdf2d828b7db7ca44a7162a401ace50ebb4026e84b18a02a06ee\""
    },
    "AssetParameters8b11ea303df4b9db9feef6ed5f901a2d1185023a40c80c9630cf5c36559ae647S3Bucket05488C5E": {
      "Type": "String",
      "Description": "S3 bucket for asset \"8b11ea303df4b9db9feef6ed5f901a2d1185023a40c80c9630cf5c36559ae647\""
    },
    "AssetParameters8b11ea303df4b9db9feef6ed5f901a2d1185023a40c80c9630cf5c36559ae647S3VersionKey174B23DF": {
      "Type": "String",
      "Description": "S3 key for asset version \"8b11ea303df4b9db9feef6ed5f901a2d1185023a40c80c9630cf5c36559ae647\""
    },
    "AssetParameters8b11ea303df4b9db9feef6ed5f901a2d1185023a40c80c9630cf5c36559ae647ArtifactHashE94F67E3": {
      "Type": "String",
      "Description": "Artifact hash for asset \"8b11ea303df4b9db9feef6ed5f901a2d1185023a40c80c9630cf5c36559ae647\""
    },
    "AssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391S3BucketB4102E9A": {
      "Type": "String",
      "Description": "S3 bucket for asset \"5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391\""
    },
    "AssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391S3VersionKeyC1EC3ED6": {
      "Type": "String",
      "Description": "S3 key for asset version \"5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391\""
    },
    "AssetParameters5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391ArtifactHashA391D940": {
      "Type": "String",
      "Description": "Artifact hash for asset \"5b47c8e4cbbce7e4a8085f1aa83ed9c4691b7f65927ba092d6620bbba925f391\""
    },
    "AssetParametersa70c48e7047fb793b2378668accb1dc2d92f2d7b1fff80c9c718f4964dc69cb8S3Bucket4CD5FFC3": {
      "Type": "String",
      "Description": "S3 bucket for asset \"a70c48e7047fb793b2378668accb1dc2d92f2d7b1fff80c9c718f4964dc69cb8\""
    },
    "AssetParametersa70c48e7047fb793b2378668accb1dc2d92f2d7b1fff80c9c718f4964dc69cb8S3VersionKeyE06BA291": {
      "Type": "String",
      "Description": "S3 key for asset version \"a70c48e7047fb793b2378668accb1dc2d92f2d7b1fff80c9c718f4964dc69cb8\""
    },
    "AssetParametersa70c48e7047fb793b2378668accb1dc2d92f2d7b1fff80c9c718f4964dc69cb8ArtifactHashA4AB6609": {
      "Type": "String",
      "Description": "Artifact hash for asset \"a70c48e7047fb793b2378668accb1dc2d92f2d7b1fff80c9c718f4964dc69cb8\""
    },
    "AssetParametersf331b32a8ad8983464106a58e420e7bc7e6341ba2ffb8ac9ad350d7e32845d95S3BucketE02B5488": {
      "Type": "String",
      "Description": "S3 bucket for asset \"f331b32a8ad8983464106a58e420e7bc7e6341ba2ffb8ac9ad350d7e32845d95\""
    },
    "AssetParametersf331b32a8ad8983464106a58e420e7bc7e6341ba2ffb8ac9ad350d7e32845d95S3VersionKey4D8E71F2": {
      "Type": "String",
      "Description": "S3 key for asset version \"f331b32a8ad8983464106a58e420e7bc7e6341ba2ffb8ac9ad350d7e32845d95\""
    },
    "AssetParametersf331b32a8ad8983464106a58e420e7bc7e6341ba2ffb8ac9ad350d7e32845d95ArtifactHash16B60F6C": {
      "Type": "String",
      "Description": "Artifact hash for asset \"f331b32a8ad8983464106a58e420e7bc7e6341ba2ffb8ac9ad350d7e32845d95\""
    },
    "AssetParametersea17febe6d04c66048f3e8e060c71685c0cb53122abceff44842d27bc0d4a03eS3BucketD3288998": {
      "Type": "String",
      "Description": "S3 bucket for asset \"ea17febe6d04c66048f3e8e060c71685c0cb53122abceff44842d27bc0d4a03e\""
    },
    "AssetParametersea17febe6d04c66048f3e8e060c71685c0cb53122abceff44842d27bc0d4a03eS3VersionKeyB00C0565": {
      "Type": "String",
      "Description": "S3 key for asset version \"ea17febe6d04c66048f3e8e060c71685c0cb53122abceff44842d27bc0d4a03e\""
    },
    "AssetParametersea17febe6d04c66048f3e8e060c71685c0cb53122abceff44842d27bc0d4a03eArtifactHash4654D012": {
      "Type": "String",
      "Description": "Artifact hash for asset \"ea17febe6d04c66048f3e8e060c71685c0cb53122abceff44842d27bc0d4a03e\""
    },
    "AssetParameters2a5ab35f4420d68f96a6e36cc4fc8d320de3bcf01199547acb57af0530db174aS3Bucket2F5D4D08": {
      "Type": "String",
      "Description": "S3 bucket for asset \"2a5ab35f4420d68f96a6e36cc4fc8d320de3bcf01199547acb57af0530db174a\""
    },
    "AssetParameters2a5ab35f4420d68f96a6e36cc4fc8d320de3bcf01199547acb57af0530db174aS3VersionKeyA75A8D2B": {
      "Type": "String",
      "Description": "S3 key for asset version \"2a5ab35f4420d68f96a6e36cc4fc8d320de3bcf01199547acb57af0530db174a\""
    },
    "AssetParameters2a5ab35f4420d68f96a6e36cc4fc8d320de3bcf01199547acb57af0530db174aArtifactHash7B798644": {
      "Type": "String",
      "Description": "Artifact hash for asset \"2a5ab35f4420d68f96a6e36cc4fc8d320de3bcf01199547acb57af0530db174a\""
    },
    "AssetParameters55ab944087ff7fca11470005814dff76a703d8bf01b6f1569046163522029e67S3Bucket7A7690F3": {
      "Type": "String",
      "Description": "S3 bucket for asset \"55ab944087ff7fca11470005814dff76a703d8bf01b6f1569046163522029e67\""
    },
    "AssetParameters55ab944087ff7fca11470005814dff76a703d8bf01b6f1569046163522029e67S3VersionKeyC21848A0": {
      "Type": "String",
      "Description": "S3 key for asset version \"55ab944087ff7fca11470005814dff76a703d8bf01b6f1569046163522029e67\""
    },
    "AssetParameters55ab944087ff7fca11470005814dff76a703d8bf01b6f1569046163522029e67ArtifactHash7C23762C": {
      "Type": "String",
      "Description": "Artifact hash for asset \"55ab944087ff7fca11470005814dff76a703d8bf01b6f1569046163522029e67\""
    }
  }
}