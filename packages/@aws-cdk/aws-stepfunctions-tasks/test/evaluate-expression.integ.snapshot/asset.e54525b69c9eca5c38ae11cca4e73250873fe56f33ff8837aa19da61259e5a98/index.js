"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
function escapeRegex(x) {
    return x.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
}
async function handler(event) {
    console.log('Event: %j', event);
    const expression = Object.entries(event.expressionAttributeValues)
        .reduce((exp, [k, v]) => exp.replace(new RegExp(escapeRegex(k), 'g'), JSON.stringify(v)), event.expression);
    console.log(`Expression: ${expression}`);
    return eval(expression);
}
exports.handler = handler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFHQSxTQUFTLFdBQVcsQ0FBQyxDQUFTO0lBQzVCLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyx3QkFBd0IsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNyRCxDQUFDO0FBRU0sS0FBSyxVQUFVLE9BQU8sQ0FBQyxLQUFZO0lBQ3hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBRWhDLE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLHlCQUF5QixDQUFDO1NBQy9ELE1BQU0sQ0FDTCxDQUFDLEdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUN4RixLQUFLLENBQUMsVUFBVSxDQUNqQixDQUFDO0lBQ0osT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLFVBQVUsRUFBRSxDQUFDLENBQUM7SUFFekMsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDMUIsQ0FBQztBQVhELDBCQVdDIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuaW1wb3J0IHsgRXZlbnQgfSBmcm9tICcuLi9ldmFsdWF0ZS1leHByZXNzaW9uJztcblxuZnVuY3Rpb24gZXNjYXBlUmVnZXgoeDogc3RyaW5nKSB7XG4gIHJldHVybiB4LnJlcGxhY2UoL1stXFwvXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihldmVudDogRXZlbnQpOiBQcm9taXNlPGFueT4ge1xuICBjb25zb2xlLmxvZygnRXZlbnQ6ICVqJywgZXZlbnQpO1xuXG4gIGNvbnN0IGV4cHJlc3Npb24gPSBPYmplY3QuZW50cmllcyhldmVudC5leHByZXNzaW9uQXR0cmlidXRlVmFsdWVzKVxuICAgIC5yZWR1Y2UoXG4gICAgICAoZXhwOiBzdHJpbmcsIFtrLCB2XSkgPT4gZXhwLnJlcGxhY2UobmV3IFJlZ0V4cChlc2NhcGVSZWdleChrKSwgJ2cnKSwgSlNPTi5zdHJpbmdpZnkodikpLFxuICAgICAgZXZlbnQuZXhwcmVzc2lvbixcbiAgICApO1xuICBjb25zb2xlLmxvZyhgRXhwcmVzc2lvbjogJHtleHByZXNzaW9ufWApO1xuXG4gIHJldHVybiBldmFsKGV4cHJlc3Npb24pO1xufVxuIl19