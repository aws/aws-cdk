[
  {
    "Resources": {
      "baseApiCDA4D43A": {
        "Type": "AWS::AppSync::GraphQLApi",
        "Properties": {
          "AuthenticationType": "API_KEY",
          "Name": "baseApi"
        }
      },
      "baseApiDefaultAPIKeyApiKey4804ACE5": {
        "Type": "AWS::AppSync::ApiKey",
        "Properties": {
          "ApiId": {
            "Fn::GetAtt": [
              "baseApiCDA4D43A",
              "ApiId"
            ]
          },
          "Description": "Default API Key created by CDK"
        }
      },
      "baseApiSchemaB12C7BB0": {
        "Type": "AWS::AppSync::GraphQLSchema",
        "Properties": {
          "ApiId": {
            "Fn::GetAtt": [
              "baseApiCDA4D43A",
              "ApiId"
            ]
          },
          "Definition": "type test {\n  version: String!\n}\n\ntype Query {\n  getTests: [ test! ]!\n}\n\ntype Mutation {\n  addTest(version: String!): test\n}\n"
        }
      }
    },
    "Outputs": {
      "ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68": {
        "Value": {
          "Fn::GetAtt": [
            "baseApiCDA4D43A",
            "ApiId"
          ]
        },
        "Export": {
          "Name": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68"
        }
      },
      "ExportsOutputFnGetAttbaseApiCDA4D43AArn68A2A4E6": {
        "Value": {
          "Fn::GetAtt": [
            "baseApiCDA4D43A",
            "Arn"
          ]
        },
        "Export": {
          "Name": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AArn68A2A4E6"
        }
      }
    }
  },
  {
    "Resources": {
      "ApitestDataSourceDSServiceRoleE543E310": {
        "Type": "AWS::IAM::Role",
        "Properties": {
          "AssumeRolePolicyDocument": {
            "Statement": [
              {
                "Action": "sts:AssumeRole",
                "Effect": "Allow",
                "Principal": {
                  "Service": "appsync.amazonaws.com"
                }
              }
            ],
            "Version": "2012-10-17"
          }
        }
      },
      "ApitestDataSourceDSServiceRoleDefaultPolicy53D2252C": {
        "Type": "AWS::IAM::Policy",
        "Properties": {
          "PolicyDocument": {
            "Statement": [
              {
                "Action": [
                  "dynamodb:BatchGetItem",
                  "dynamodb:GetRecords",
                  "dynamodb:GetShardIterator",
                  "dynamodb:Query",
                  "dynamodb:GetItem",
                  "dynamodb:Scan",
                  "dynamodb:BatchWriteItem",
                  "dynamodb:PutItem",
                  "dynamodb:UpdateItem",
                  "dynamodb:DeleteItem"
                ],
                "Effect": "Allow",
                "Resource": [
                  {
                    "Fn::GetAtt": [
                      "TestTable5769773A",
                      "Arn"
                    ]
                  },
                  {
                    "Ref": "AWS::NoValue"
                  }
                ]
              }
            ],
            "Version": "2012-10-17"
          },
          "PolicyName": "ApitestDataSourceDSServiceRoleDefaultPolicy53D2252C",
          "Roles": [
            {
              "Ref": "ApitestDataSourceDSServiceRoleE543E310"
            }
          ]
        }
      },
      "ApitestDataSourceDS776EA507": {
        "Type": "AWS::AppSync::DataSource",
        "Properties": {
          "ApiId": {
            "Fn::ImportValue": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68"
          },
          "Name": "testDataSource",
          "Type": "AMAZON_DYNAMODB",
          "Description": "test table data source",
          "DynamoDBConfig": {
            "AwsRegion": {
              "Ref": "AWS::Region"
            },
            "TableName": {
              "Ref": "TestTable5769773A"
            }
          },
          "ServiceRoleArn": {
            "Fn::GetAtt": [
              "ApitestDataSourceDSServiceRoleE543E310",
              "Arn"
            ]
          }
        }
      },
      "ApitestDataSourceDSQuerygetTestsResolver61ED88B6": {
        "Type": "AWS::AppSync::Resolver",
        "Properties": {
          "ApiId": {
            "Fn::ImportValue": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68"
          },
          "FieldName": "getTests",
          "TypeName": "Query",
          "DataSourceName": "testDataSource",
          "Kind": "UNIT",
          "RequestMappingTemplate": "{\"version\" : \"2017-02-28\", \"operation\" : \"Scan\"}",
          "ResponseMappingTemplate": "$util.toJson($ctx.result.items)"
        },
        "DependsOn": [
          "ApitestDataSourceDS776EA507"
        ]
      },
      "ApitestDataSourceDSMutationaddTestResolver0D3A4591": {
        "Type": "AWS::AppSync::Resolver",
        "Properties": {
          "ApiId": {
            "Fn::ImportValue": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AApiId50287E68"
          },
          "FieldName": "addTest",
          "TypeName": "Mutation",
          "DataSourceName": "testDataSource",
          "Kind": "UNIT",
          "RequestMappingTemplate": "\n      #set($input = $ctx.args.test)\n      \n      {\n        \"version\": \"2017-02-28\",\n        \"operation\": \"PutItem\",\n        \"key\" : {\n      \"id\" : $util.dynamodb.toDynamoDBJson($util.autoId())\n    },\n        \"attributeValues\": $util.dynamodb.toMapValuesJson($input)\n      }",
          "ResponseMappingTemplate": "$util.toJson($ctx.result)"
        },
        "DependsOn": [
          "ApitestDataSourceDS776EA507"
        ]
      },
      "TestTable5769773A": {
        "Type": "AWS::DynamoDB::Table",
        "Properties": {
          "KeySchema": [
            {
              "AttributeName": "id",
              "KeyType": "HASH"
            }
          ],
          "AttributeDefinitions": [
            {
              "AttributeName": "id",
              "AttributeType": "S"
            }
          ],
          "BillingMode": "PAY_PER_REQUEST"
        },
        "UpdateReplacePolicy": "Delete",
        "DeletionPolicy": "Delete"
      },
      "api2noneDSA74A64A5": {
        "Type": "AWS::AppSync::DataSource",
        "Properties": {
          "ApiId": {
            "Fn::Select": [
              1,
              {
                "Fn::Split": [
                  "/",
                  {
                    "Fn::ImportValue": "baseStack:ExportsOutputFnGetAttbaseApiCDA4D43AArn68A2A4E6"
                  }
                ]
              }
            ]
          },
          "Name": "none",
          "Type": "NONE",
          "Description": "none"
        }
      }
    }
  }
]