{
 "Resources": {
  "ParameterizedComponentD29478CA": {
   "Type": "AWS::ImageBuilder::Component",
   "Properties": {
    "Data": "name: ParameterizedComponent\ndescription: This is a parameterized component\nschemaVersion: \"1.0\"\nparameters:\n  - parameter1:\n      type: string\n      description: This is the first parameter\n  - parameter2:\n      type: string\n      description: This is the second parameter\nphases:\n  - name: build\n    steps:\n      - name: step1\n        action: ExecuteBash\n        inputs:\n          commands:\n            - echo ${{ parameter1 }}\n            - echo ${{ parameter2 }}\n",
    "Name": "aws-cdk-imagebuilder-image-recipe-all-parameters-parameterizedcomponent-abcc0eb5",
    "Platform": "Linux",
    "Version": "1.0.0"
   }
  },
  "ImageRecipe8C789631": {
   "Type": "AWS::ImageBuilder::ImageRecipe",
   "Properties": {
    "AdditionalInstanceConfiguration": {
     "SystemsManagerAgent": {
      "UninstallAfterBuild": true
     },
     "UserDataOverride": {
      "Fn::Base64": "#!/bin/bash\necho \"Hello World\""
     }
    },
    "AmiTags": {
     "imageTag1": "imageValue1",
     "imageTag2": "imageValue2"
    },
    "BlockDeviceMappings": [
     {
      "DeviceName": "/dev/sda1",
      "NoDevice": "",
      "VirtualName": "ephemeral0"
     },
     {
      "DeviceName": "/dev/sda2",
      "Ebs": {
       "DeleteOnTermination": true,
       "Encrypted": true,
       "Iops": 1000,
       "KmsKeyId": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":kms:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":alias/device-encryption-key"
         ]
        ]
       },
       "Throughput": 125,
       "VolumeSize": 75,
       "VolumeType": "gp3"
      }
     }
    ],
    "Components": [
     {
      "ComponentArn": {
       "Fn::Join": [
        "",
        [
         "arn:",
         {
          "Ref": "AWS::Partition"
         },
         ":imagebuilder:",
         {
          "Ref": "AWS::Region"
         },
         ":aws:component/hello-world-linux/x.x.x"
        ]
       ]
      }
     },
     {
      "ComponentArn": {
       "Fn::GetAtt": [
        "ParameterizedComponentD29478CA",
        "Arn"
       ]
      },
      "Parameters": [
       {
        "Name": "parameter1",
        "Value": [
         "parameter-value-1"
        ]
       },
       {
        "Name": "parameter2",
        "Value": [
         "parameter-value-2"
        ]
       }
      ]
     }
    ],
    "Description": "A test image recipe",
    "Name": "test-image-recipe",
    "ParentImage": "ssm:/aws/service/ami-amazon-linux-latest/al2023-ami-minimal-kernel-default-x86_64",
    "Tags": {
     "key1": "value1",
     "key2": "value2"
    },
    "Version": "1.2.3",
    "WorkingDirectory": "/var/tmp"
   }
  }
 },
 "Outputs": {
  "ImageRecipeVersion": {
   "Value": {
    "Fn::GetAtt": [
     "ImageRecipe8C789631",
     "Version"
    ]
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}