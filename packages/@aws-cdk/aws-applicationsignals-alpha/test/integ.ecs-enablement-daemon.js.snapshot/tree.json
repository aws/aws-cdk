{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"ApplicationSignalsInfra-Daemon":{"id":"ApplicationSignalsInfra-Daemon","path":"ApplicationSignalsInfra-Daemon","children":{"ECSTaskRole":{"id":"ECSTaskRole","path":"ApplicationSignalsInfra-Daemon/ECSTaskRole","children":{"ImportECSTaskRole":{"id":"ImportECSTaskRole","path":"ApplicationSignalsInfra-Daemon/ECSTaskRole/ImportECSTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApplicationSignalsInfra-Daemon/ECSTaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/CloudWatchAgentServerPolicy"]]}],"roleName":"ECSTaskRole-ApplicationSignalsInfra-Daemon"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]}]}},"ECSTaskExecutionRole":{"id":"ECSTaskExecutionRole","path":"ApplicationSignalsInfra-Daemon/ECSTaskExecutionRole","children":{"ImportECSTaskExecutionRole":{"id":"ImportECSTaskExecutionRole","path":"ApplicationSignalsInfra-Daemon/ECSTaskExecutionRole/ImportECSTaskExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApplicationSignalsInfra-Daemon/ECSTaskExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"]]}],"roleName":"ECSTaskExecutionRole-ApplicationSignalsInfra-Daemon"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]}]}},"Exports":{"id":"Exports","path":"ApplicationSignalsInfra-Daemon/Exports","children":{"Output{\"Fn::GetAtt\":[\"ECSTaskExecutionRole911F5A4F\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ECSTaskExecutionRole911F5A4F\",\"Arn\"]}","path":"ApplicationSignalsInfra-Daemon/Exports/Output{\"Fn::GetAtt\":[\"ECSTaskExecutionRole911F5A4F\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}},"Output{\"Fn::GetAtt\":[\"ECSTaskRoleF2ADB362\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ECSTaskRoleF2ADB362\",\"Arn\"]}","path":"ApplicationSignalsInfra-Daemon/Exports/Output{\"Fn::GetAtt\":[\"ECSTaskRoleF2ADB362\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApplicationSignalsInfra-Daemon/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApplicationSignalsInfra-Daemon/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}},"ApplicationSignalsCloudWatchAgent-Daemon":{"id":"ApplicationSignalsCloudWatchAgent-Daemon","path":"ApplicationSignalsCloudWatchAgent-Daemon","children":{"CloudWatchAgentTaskDefinition":{"id":"CloudWatchAgentTaskDefinition","path":"ApplicationSignalsCloudWatchAgent-Daemon/CloudWatchAgentTaskDefinition","children":{"Resource":{"id":"Resource","path":"ApplicationSignalsCloudWatchAgent-Daemon/CloudWatchAgentTaskDefinition/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"cpu":128,"essential":true,"image":"public.ecr.aws/cloudwatch-agent/cloudwatch-agent:latest","memory":64,"name":"ecs-cwagent","portMappings":[{"containerPort":4316,"hostPort":4316,"protocol":"tcp"},{"containerPort":2000,"hostPort":2000,"protocol":"tcp"}],"user":"0:1338","environment":[{"name":"CW_CONFIG_CONTENT","value":"{\"logs\":{\"metrics_collected\":{\"application_signals\":{\"enabled\":true}}},\"traces\":{\"traces_collected\":{\"application_signals\":{\"enabled\":true}}}}"}]}],"executionRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Daemon:ExportsOutputFnGetAttECSTaskExecutionRole911F5A4FArn90EDA8DE"},"family":"ApplicationSignalsCloudWatchAgentDaemonCloudWatchAgentTaskDefinition93A456D6","networkMode":"host","requiresCompatibilities":["EC2"],"taskRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Daemon:ExportsOutputFnGetAttECSTaskRoleF2ADB362Arn397CEC35"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"0.0.0"}},"ecs-cwagent":{"id":"ecs-cwagent","path":"ApplicationSignalsCloudWatchAgent-Daemon/CloudWatchAgentTaskDefinition/ecs-cwagent","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Ec2TaskDefinition","version":"0.0.0","metadata":["*","*","*"]}},"CloudWatchAgentECSIntegration":{"id":"CloudWatchAgentECSIntegration","path":"ApplicationSignalsCloudWatchAgent-Daemon/CloudWatchAgentECSIntegration","constructInfo":{"fqn":"@aws-cdk/aws-applicationsignals-alpha.CloudWatchAgentIntegration","version":"0.0.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApplicationSignalsCloudWatchAgent-Daemon/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApplicationSignalsCloudWatchAgent-Daemon/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}},"ApplicationSignalsJavaApp-Daemon":{"id":"ApplicationSignalsJavaApp-Daemon","path":"ApplicationSignalsJavaApp-Daemon","children":{"JavaTaskDefinition":{"id":"JavaTaskDefinition","path":"ApplicationSignalsJavaApp-Daemon/JavaTaskDefinition","children":{"Resource":{"id":"Resource","path":"ApplicationSignalsJavaApp-Daemon/JavaTaskDefinition/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"dependsOn":[{"containerName":"adot-init","condition":"SUCCESS"}],"essential":true,"image":"public.ecr.aws/aws-containers/retail-store-sample-cart:1.1.0","memory":512,"mountPoints":[{"containerPath":"/otel-auto-instrumentation","readOnly":false,"sourceVolume":"opentelemetry-auto-instrumentation"}],"name":"app","environment":[{"name":"OTEL_LOGS_EXPORTER","value":"none"},{"name":"OTEL_METRICS_EXPORTER","value":"none"},{"name":"OTEL_EXPORTER_OTLP_PROTOCOL","value":"http/protobuf"},{"name":"OTEL_AWS_APPLICATION_SIGNALS_ENABLED","value":"true"},{"name":"OTEL_AWS_APPLICATION_SIGNALS_EXPORTER_ENDPOINT","value":"http://localhost:4316/v1/metrics"},{"name":"OTEL_EXPORTER_OTLP_TRACES_ENDPOINT","value":"http://localhost:4316/v1/traces"},{"name":"OTEL_TRACES_SAMPLER","value":"xray"},{"name":"OTEL_TRACES_SAMPLER_ARG","value":"endpoint=http://localhost:2000"},{"name":"OTEL_PROPAGATORS","value":"tracecontext,baggage,b3,xray"},{"name":"JAVA_TOOL_OPTIONS","value":" -javaagent:/otel-auto-instrumentation/javaagent.jar"},{"name":"OTEL_SERVICE_NAME","value":"java-demo"}]},{"command":["cp","/javaagent.jar","/otel-auto-instrumentation/javaagent.jar"],"cpu":0,"essential":false,"image":"public.ecr.aws/aws-observability/adot-autoinstrumentation-java:v2.10.0","memory":64,"mountPoints":[{"containerPath":"/otel-auto-instrumentation","readOnly":false,"sourceVolume":"opentelemetry-auto-instrumentation"}],"name":"adot-init"}],"executionRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Daemon:ExportsOutputFnGetAttECSTaskExecutionRole911F5A4FArn90EDA8DE"},"family":"ApplicationSignalsJavaAppDaemonJavaTaskDefinitionF5BDA114","networkMode":"host","requiresCompatibilities":["EC2"],"taskRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Daemon:ExportsOutputFnGetAttECSTaskRoleF2ADB362Arn397CEC35"},"volumes":[{"name":"opentelemetry-auto-instrumentation"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"0.0.0"}},"app":{"id":"app","path":"ApplicationSignalsJavaApp-Daemon/JavaTaskDefinition/app","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}},"adot-init":{"id":"adot-init","path":"ApplicationSignalsJavaApp-Daemon/JavaTaskDefinition/adot-init","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Ec2TaskDefinition","version":"0.0.0","metadata":["*","*","*","*","*"]}},"JavaECSIntegration":{"id":"JavaECSIntegration","path":"ApplicationSignalsJavaApp-Daemon/JavaECSIntegration","constructInfo":{"fqn":"@aws-cdk/aws-applicationsignals-alpha.ApplicationSignalsIntegration","version":"0.0.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApplicationSignalsJavaApp-Daemon/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApplicationSignalsJavaApp-Daemon/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}},"ApplicationSignalsIntegrationECSDaemonTest":{"id":"ApplicationSignalsIntegrationECSDaemonTest","path":"ApplicationSignalsIntegrationECSDaemonTest","children":{"DefaultTest":{"id":"DefaultTest","path":"ApplicationSignalsIntegrationECSDaemonTest/DefaultTest","children":{"Default":{"id":"Default","path":"ApplicationSignalsIntegrationECSDaemonTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"ApplicationSignalsIntegrationECSDaemonTest/DefaultTest/DeployAssert","children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"ApplicationSignalsIntegrationECSDaemonTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApplicationSignalsIntegrationECSDaemonTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"}}}