{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"ApplicationSignalsInfra-Sidecar":{"id":"ApplicationSignalsInfra-Sidecar","path":"ApplicationSignalsInfra-Sidecar","children":{"ECSTaskRole":{"id":"ECSTaskRole","path":"ApplicationSignalsInfra-Sidecar/ECSTaskRole","children":{"ImportECSTaskRole":{"id":"ImportECSTaskRole","path":"ApplicationSignalsInfra-Sidecar/ECSTaskRole/ImportECSTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApplicationSignalsInfra-Sidecar/ECSTaskRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/CloudWatchAgentServerPolicy"]]}],"roleName":"ECSTaskRole-ApplicationSignalsInfra-Sidecar"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]},{"addManagedPolicy":[{"managedPolicyArn":"*"}]}]}},"ECSTaskExecutionRole":{"id":"ECSTaskExecutionRole","path":"ApplicationSignalsInfra-Sidecar/ECSTaskExecutionRole","children":{"ImportECSTaskExecutionRole":{"id":"ImportECSTaskExecutionRole","path":"ApplicationSignalsInfra-Sidecar/ECSTaskExecutionRole/ImportECSTaskExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApplicationSignalsInfra-Sidecar/ECSTaskExecutionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"]]}],"roleName":"ECSTaskExecutionRole-ApplicationSignalsInfra-Sidecar"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]}]}},"Exports":{"id":"Exports","path":"ApplicationSignalsInfra-Sidecar/Exports","children":{"Output{\"Fn::GetAtt\":[\"ECSTaskExecutionRole911F5A4F\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ECSTaskExecutionRole911F5A4F\",\"Arn\"]}","path":"ApplicationSignalsInfra-Sidecar/Exports/Output{\"Fn::GetAtt\":[\"ECSTaskExecutionRole911F5A4F\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}},"Output{\"Fn::GetAtt\":[\"ECSTaskRoleF2ADB362\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ECSTaskRoleF2ADB362\",\"Arn\"]}","path":"ApplicationSignalsInfra-Sidecar/Exports/Output{\"Fn::GetAtt\":[\"ECSTaskRoleF2ADB362\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApplicationSignalsInfra-Sidecar/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApplicationSignalsInfra-Sidecar/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}},"ApplicationSignalsDotnetApp-Sidecar":{"id":"ApplicationSignalsDotnetApp-Sidecar","path":"ApplicationSignalsDotnetApp-Sidecar","children":{"DotnetTaskDefinition":{"id":"DotnetTaskDefinition","path":"ApplicationSignalsDotnetApp-Sidecar/DotnetTaskDefinition","children":{"Resource":{"id":"Resource","path":"ApplicationSignalsDotnetApp-Sidecar/DotnetTaskDefinition/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"dependsOn":[{"containerName":"adot-init","condition":"SUCCESS"},{"containerName":"cloudwatch-agent","condition":"START"}],"essential":true,"image":"mcr.microsoft.com/dotnet/samples:dotnetapp","mountPoints":[{"containerPath":"C:\\otel-auto-instrumentation-dotnet","readOnly":false,"sourceVolume":"opentelemetry-auto-instrumentation"}],"name":"app","environment":[{"name":"OTEL_LOGS_EXPORTER","value":"none"},{"name":"OTEL_METRICS_EXPORTER","value":"none"},{"name":"OTEL_EXPORTER_OTLP_PROTOCOL","value":"http/protobuf"},{"name":"OTEL_AWS_APPLICATION_SIGNALS_ENABLED","value":"true"},{"name":"OTEL_AWS_APPLICATION_SIGNALS_EXPORTER_ENDPOINT","value":"http://localhost:4316/v1/metrics"},{"name":"OTEL_EXPORTER_OTLP_TRACES_ENDPOINT","value":"http://localhost:4316/v1/traces"},{"name":"OTEL_TRACES_SAMPLER","value":"xray"},{"name":"OTEL_TRACES_SAMPLER_ARG","value":"endpoint=http://localhost:2000"},{"name":"OTEL_PROPAGATORS","value":"tracecontext,baggage,b3,xray"},{"name":"OTEL_DOTNET_DISTRO","value":"aws_distro"},{"name":"OTEL_DOTNET_CONFIGURATOR","value":"aws_configurator"},{"name":"OTEL_DOTNET_AUTO_PLUGINS","value":"AWS.Distro.OpenTelemetry.AutoInstrumentation.Plugin, AWS.Distro.OpenTelemetry.AutoInstrumentation"},{"name":"CORECLR_ENABLE_PROFILING","value":"1"},{"name":"CORECLR_PROFILER","value":"{918728DD-259F-4A6A-AC2B-B85E1B658318}"},{"name":"CORECLR_PROFILER_PATH","value":"C:\\otel-auto-instrumentation-dotnet\\win-x64\\OpenTelemetry.AutoInstrumentation.Native.dll"},{"name":"DOTNET_STARTUP_HOOKS","value":"C:\\otel-auto-instrumentation-dotnet\\net\\OpenTelemetry.AutoInstrumentation.StartupHook.dll"},{"name":"DOTNET_ADDITIONAL_DEPS","value":"C:\\otel-auto-instrumentation-dotnet\\AdditionalDeps"},{"name":"OTEL_DOTNET_AUTO_HOME","value":"C:\\otel-auto-instrumentation-dotnet"},{"name":"DOTNET_SHARED_STORE","value":"C:\\otel-auto-instrumentation-dotnet\\store"},{"name":"OTEL_SERVICE_NAME","value":"dotnet-demo"}]},{"command":["CMD","/c","xcopy","/e","C:\\autoinstrumentation\\*","C:\\otel-auto-instrumentation-dotnet","&&","icacls","C:\\otel-auto-instrumentation-dotnet","/grant","*S-1-1-0:R","/T"],"cpu":0,"essential":false,"image":"public.ecr.aws/aws-observability/adot-autoinstrumentation-dotnet:v1.6.0-windows2022","memory":128,"mountPoints":[{"containerPath":"C:\\otel-auto-instrumentation-dotnet","readOnly":false,"sourceVolume":"opentelemetry-auto-instrumentation"}],"name":"adot-init"},{"cpu":256,"essential":true,"image":"public.ecr.aws/cloudwatch-agent/cloudwatch-agent:latest","memory":512,"name":"cloudwatch-agent","user":"0:1338","environment":[{"name":"CW_CONFIG_CONTENT","value":"{\"logs\":{\"metrics_collected\":{\"application_signals\":{\"enabled\":true}}},\"traces\":{\"traces_collected\":{\"application_signals\":{\"enabled\":true}}}}"}]}],"cpu":"2048","executionRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Sidecar:ExportsOutputFnGetAttECSTaskExecutionRole911F5A4FArn90EDA8DE"},"family":"ApplicationSignalsDotnetAppSidecarDotnetTaskDefinition8A13ACF7","memory":"4096","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"runtimePlatform":{"operatingSystemFamily":"WINDOWS_SERVER_2022_CORE"},"taskRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Sidecar:ExportsOutputFnGetAttECSTaskRoleF2ADB362Arn397CEC35"},"volumes":[{"name":"opentelemetry-auto-instrumentation"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"0.0.0"}},"app":{"id":"app","path":"ApplicationSignalsDotnetApp-Sidecar/DotnetTaskDefinition/app","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}},"adot-init":{"id":"adot-init","path":"ApplicationSignalsDotnetApp-Sidecar/DotnetTaskDefinition/adot-init","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}},"cloudwatch-agent":{"id":"cloudwatch-agent","path":"ApplicationSignalsDotnetApp-Sidecar/DotnetTaskDefinition/cloudwatch-agent","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"0.0.0","metadata":["*","*","*","*","*","*"]}},"DotnetECSIntegration":{"id":"DotnetECSIntegration","path":"ApplicationSignalsDotnetApp-Sidecar/DotnetECSIntegration","children":{"CloudWatchAgentSidecar":{"id":"CloudWatchAgentSidecar","path":"ApplicationSignalsDotnetApp-Sidecar/DotnetECSIntegration/CloudWatchAgentSidecar","constructInfo":{"fqn":"@aws-cdk/aws-applicationsignals-alpha.CloudWatchAgentIntegration","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/aws-applicationsignals-alpha.ApplicationSignalsIntegration","version":"0.0.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApplicationSignalsDotnetApp-Sidecar/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApplicationSignalsDotnetApp-Sidecar/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}},"ApplicationSignalsJavaApp-Sidecar":{"id":"ApplicationSignalsJavaApp-Sidecar","path":"ApplicationSignalsJavaApp-Sidecar","children":{"JavaTaskDefinition":{"id":"JavaTaskDefinition","path":"ApplicationSignalsJavaApp-Sidecar/JavaTaskDefinition","children":{"Resource":{"id":"Resource","path":"ApplicationSignalsJavaApp-Sidecar/JavaTaskDefinition/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"dependsOn":[{"containerName":"adot-init","condition":"SUCCESS"},{"containerName":"cloudwatch-agent","condition":"START"}],"essential":true,"image":"public.ecr.aws/aws-containers/retail-store-sample-cart:1.1.0","mountPoints":[{"containerPath":"/otel-auto-instrumentation","readOnly":false,"sourceVolume":"opentelemetry-auto-instrumentation"}],"name":"app","environment":[{"name":"OTEL_LOGS_EXPORTER","value":"none"},{"name":"OTEL_METRICS_EXPORTER","value":"none"},{"name":"OTEL_EXPORTER_OTLP_PROTOCOL","value":"http/protobuf"},{"name":"OTEL_AWS_APPLICATION_SIGNALS_ENABLED","value":"true"},{"name":"OTEL_AWS_APPLICATION_SIGNALS_EXPORTER_ENDPOINT","value":"http://localhost:4316/v1/metrics"},{"name":"OTEL_EXPORTER_OTLP_TRACES_ENDPOINT","value":"http://localhost:4316/v1/traces"},{"name":"OTEL_TRACES_SAMPLER","value":"xray"},{"name":"OTEL_TRACES_SAMPLER_ARG","value":"endpoint=http://localhost:2000"},{"name":"OTEL_PROPAGATORS","value":"tracecontext,baggage,b3,xray"},{"name":"JAVA_TOOL_OPTIONS","value":" -javaagent:/otel-auto-instrumentation/javaagent.jar"},{"name":"OTEL_SERVICE_NAME","value":"java-demo"}]},{"command":["cp","/javaagent.jar","/otel-auto-instrumentation/javaagent.jar"],"cpu":0,"essential":false,"image":"public.ecr.aws/aws-observability/adot-autoinstrumentation-java:v2.10.0","memory":64,"mountPoints":[{"containerPath":"/otel-auto-instrumentation","readOnly":false,"sourceVolume":"opentelemetry-auto-instrumentation"}],"name":"adot-init"},{"cpu":256,"essential":true,"image":"public.ecr.aws/cloudwatch-agent/cloudwatch-agent:latest","memory":512,"name":"cloudwatch-agent","user":"0:1338","environment":[{"name":"CW_CONFIG_CONTENT","value":"{\"logs\":{\"metrics_collected\":{\"application_signals\":{\"enabled\":true}}},\"traces\":{\"traces_collected\":{\"application_signals\":{\"enabled\":true}}}}"}]}],"cpu":"1024","executionRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Sidecar:ExportsOutputFnGetAttECSTaskExecutionRole911F5A4FArn90EDA8DE"},"family":"ApplicationSignalsJavaAppSidecarJavaTaskDefinitionD1B2093F","memory":"2048","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Sidecar:ExportsOutputFnGetAttECSTaskRoleF2ADB362Arn397CEC35"},"volumes":[{"name":"opentelemetry-auto-instrumentation"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"0.0.0"}},"app":{"id":"app","path":"ApplicationSignalsJavaApp-Sidecar/JavaTaskDefinition/app","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}},"adot-init":{"id":"adot-init","path":"ApplicationSignalsJavaApp-Sidecar/JavaTaskDefinition/adot-init","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}},"cloudwatch-agent":{"id":"cloudwatch-agent","path":"ApplicationSignalsJavaApp-Sidecar/JavaTaskDefinition/cloudwatch-agent","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"0.0.0","metadata":["*","*","*","*","*","*"]}},"JavaECSIntegration":{"id":"JavaECSIntegration","path":"ApplicationSignalsJavaApp-Sidecar/JavaECSIntegration","children":{"CloudWatchAgentSidecar":{"id":"CloudWatchAgentSidecar","path":"ApplicationSignalsJavaApp-Sidecar/JavaECSIntegration/CloudWatchAgentSidecar","constructInfo":{"fqn":"@aws-cdk/aws-applicationsignals-alpha.CloudWatchAgentIntegration","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/aws-applicationsignals-alpha.ApplicationSignalsIntegration","version":"0.0.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApplicationSignalsJavaApp-Sidecar/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApplicationSignalsJavaApp-Sidecar/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}},"ApplicationSignalsPythonApp-Sidecar":{"id":"ApplicationSignalsPythonApp-Sidecar","path":"ApplicationSignalsPythonApp-Sidecar","children":{"PythonTaskDefinition":{"id":"PythonTaskDefinition","path":"ApplicationSignalsPythonApp-Sidecar/PythonTaskDefinition","children":{"Resource":{"id":"Resource","path":"ApplicationSignalsPythonApp-Sidecar/PythonTaskDefinition/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"command":["sh","-c","python3 manage.py migrate --noinput && python3 manage.py collectstatic --noinput && python3 manage.py runserver 0.0.0.0:8080 --noreload"],"dependsOn":[{"containerName":"adot-init","condition":"SUCCESS"},{"containerName":"cloudwatch-agent","condition":"START"}],"essential":true,"image":"public.ecr.aws/q0c5s6i7/demo-application:python-remote","mountPoints":[{"containerPath":"/otel-auto-instrumentation-python","readOnly":false,"sourceVolume":"opentelemetry-auto-instrumentation"}],"name":"app","environment":[{"name":"PYTHONPATH","value":"/otel-auto-instrumentation-python/opentelemetry/instrumentation/auto_instrumentation:/django_remote_app:/otel-auto-instrumentation-python"},{"name":"DJANGO_SETTINGS_MODULE","value":"django_remote_service.settings"},{"name":"OTEL_LOGS_EXPORTER","value":"none"},{"name":"OTEL_METRICS_EXPORTER","value":"none"},{"name":"OTEL_EXPORTER_OTLP_PROTOCOL","value":"http/protobuf"},{"name":"OTEL_AWS_APPLICATION_SIGNALS_ENABLED","value":"true"},{"name":"OTEL_AWS_APPLICATION_SIGNALS_EXPORTER_ENDPOINT","value":"http://localhost:4316/v1/metrics"},{"name":"OTEL_EXPORTER_OTLP_TRACES_ENDPOINT","value":"http://localhost:4316/v1/traces"},{"name":"OTEL_TRACES_SAMPLER","value":"xray"},{"name":"OTEL_TRACES_SAMPLER_ARG","value":"endpoint=http://localhost:2000"},{"name":"OTEL_PROPAGATORS","value":"tracecontext,baggage,b3,xray"},{"name":"OTEL_PYTHON_DISTRO","value":"aws_distro"},{"name":"OTEL_PYTHON_CONFIGURATOR","value":"aws_configurator"},{"name":"OTEL_SERVICE_NAME","value":"python-demo"}]},{"command":["cp","-a","/autoinstrumentation/.","/otel-auto-instrumentation-python"],"cpu":0,"essential":false,"image":"public.ecr.aws/aws-observability/adot-autoinstrumentation-python:v0.8.0","memory":32,"mountPoints":[{"containerPath":"/otel-auto-instrumentation-python","readOnly":false,"sourceVolume":"opentelemetry-auto-instrumentation"}],"name":"adot-init"},{"cpu":256,"essential":true,"image":"public.ecr.aws/cloudwatch-agent/cloudwatch-agent:latest","memory":512,"name":"cloudwatch-agent","user":"0:1338","environment":[{"name":"CW_CONFIG_CONTENT","value":"{\"logs\":{\"metrics_collected\":{\"application_signals\":{\"enabled\":true}}},\"traces\":{\"traces_collected\":{\"application_signals\":{\"enabled\":true}}}}"}]}],"cpu":"1024","executionRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Sidecar:ExportsOutputFnGetAttECSTaskExecutionRole911F5A4FArn90EDA8DE"},"family":"ApplicationSignalsPythonAppSidecarPythonTaskDefinition8019907D","memory":"2048","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Sidecar:ExportsOutputFnGetAttECSTaskRoleF2ADB362Arn397CEC35"},"volumes":[{"name":"opentelemetry-auto-instrumentation"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"0.0.0"}},"app":{"id":"app","path":"ApplicationSignalsPythonApp-Sidecar/PythonTaskDefinition/app","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}},"adot-init":{"id":"adot-init","path":"ApplicationSignalsPythonApp-Sidecar/PythonTaskDefinition/adot-init","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}},"cloudwatch-agent":{"id":"cloudwatch-agent","path":"ApplicationSignalsPythonApp-Sidecar/PythonTaskDefinition/cloudwatch-agent","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"0.0.0","metadata":["*","*","*","*","*","*"]}},"PythonECSIntegration":{"id":"PythonECSIntegration","path":"ApplicationSignalsPythonApp-Sidecar/PythonECSIntegration","children":{"CloudWatchAgentSidecar":{"id":"CloudWatchAgentSidecar","path":"ApplicationSignalsPythonApp-Sidecar/PythonECSIntegration/CloudWatchAgentSidecar","constructInfo":{"fqn":"@aws-cdk/aws-applicationsignals-alpha.CloudWatchAgentIntegration","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/aws-applicationsignals-alpha.ApplicationSignalsIntegration","version":"0.0.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApplicationSignalsPythonApp-Sidecar/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApplicationSignalsPythonApp-Sidecar/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}},"ApplicationSignalsNodeApp-Sidecar":{"id":"ApplicationSignalsNodeApp-Sidecar","path":"ApplicationSignalsNodeApp-Sidecar","children":{"NodeTaskDefinition":{"id":"NodeTaskDefinition","path":"ApplicationSignalsNodeApp-Sidecar/NodeTaskDefinition","children":{"Resource":{"id":"Resource","path":"ApplicationSignalsNodeApp-Sidecar/NodeTaskDefinition/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"dependsOn":[{"containerName":"adot-init","condition":"SUCCESS"},{"containerName":"cloudwatch-agent","condition":"START"}],"essential":true,"image":"public.ecr.aws/aws-containers/retail-store-sample-checkout:1.1.0","mountPoints":[{"containerPath":"/otel-auto-instrumentation-nodejs","readOnly":false,"sourceVolume":"opentelemetry-auto-instrumentation"}],"name":"app","environment":[{"name":"OTEL_LOGS_EXPORTER","value":"none"},{"name":"OTEL_METRICS_EXPORTER","value":"none"},{"name":"OTEL_EXPORTER_OTLP_PROTOCOL","value":"http/protobuf"},{"name":"OTEL_AWS_APPLICATION_SIGNALS_ENABLED","value":"true"},{"name":"OTEL_AWS_APPLICATION_SIGNALS_EXPORTER_ENDPOINT","value":"http://localhost:4316/v1/metrics"},{"name":"OTEL_EXPORTER_OTLP_TRACES_ENDPOINT","value":"http://localhost:4316/v1/traces"},{"name":"OTEL_TRACES_SAMPLER","value":"xray"},{"name":"OTEL_TRACES_SAMPLER_ARG","value":"endpoint=http://localhost:2000"},{"name":"OTEL_PROPAGATORS","value":"tracecontext,baggage,b3,xray"},{"name":"NODE_OPTIONS","value":" --require /otel-auto-instrumentation-nodejs/autoinstrumentation.js"},{"name":"OTEL_SERVICE_NAME","value":"node-demo"}]},{"command":["cp","-a","/autoinstrumentation/.","/otel-auto-instrumentation-nodejs"],"cpu":0,"essential":false,"image":"public.ecr.aws/aws-observability/adot-autoinstrumentation-node:v0.5.0","memory":128,"mountPoints":[{"containerPath":"/otel-auto-instrumentation-nodejs","readOnly":false,"sourceVolume":"opentelemetry-auto-instrumentation"}],"name":"adot-init"},{"cpu":256,"essential":true,"image":"public.ecr.aws/cloudwatch-agent/cloudwatch-agent:latest","memory":512,"name":"cloudwatch-agent","user":"0:1338","environment":[{"name":"CW_CONFIG_CONTENT","value":"{\"logs\":{\"metrics_collected\":{\"application_signals\":{\"enabled\":true}}},\"traces\":{\"traces_collected\":{\"application_signals\":{\"enabled\":true}}}}"}]}],"cpu":"1024","executionRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Sidecar:ExportsOutputFnGetAttECSTaskExecutionRole911F5A4FArn90EDA8DE"},"family":"ApplicationSignalsNodeAppSidecarNodeTaskDefinitionA6C832D8","memory":"2048","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::ImportValue":"ApplicationSignalsInfra-Sidecar:ExportsOutputFnGetAttECSTaskRoleF2ADB362Arn397CEC35"},"volumes":[{"name":"opentelemetry-auto-instrumentation"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"0.0.0"}},"app":{"id":"app","path":"ApplicationSignalsNodeApp-Sidecar/NodeTaskDefinition/app","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}},"adot-init":{"id":"adot-init","path":"ApplicationSignalsNodeApp-Sidecar/NodeTaskDefinition/adot-init","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}},"cloudwatch-agent":{"id":"cloudwatch-agent","path":"ApplicationSignalsNodeApp-Sidecar/NodeTaskDefinition/cloudwatch-agent","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"0.0.0","metadata":["*","*","*","*","*","*"]}},"NodeECSIntegration":{"id":"NodeECSIntegration","path":"ApplicationSignalsNodeApp-Sidecar/NodeECSIntegration","children":{"CloudWatchAgentSidecar":{"id":"CloudWatchAgentSidecar","path":"ApplicationSignalsNodeApp-Sidecar/NodeECSIntegration/CloudWatchAgentSidecar","constructInfo":{"fqn":"@aws-cdk/aws-applicationsignals-alpha.CloudWatchAgentIntegration","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/aws-applicationsignals-alpha.ApplicationSignalsIntegration","version":"0.0.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApplicationSignalsNodeApp-Sidecar/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApplicationSignalsNodeApp-Sidecar/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}},"ApplicationSignalsECSSidecarTest":{"id":"ApplicationSignalsECSSidecarTest","path":"ApplicationSignalsECSSidecarTest","children":{"DefaultTest":{"id":"DefaultTest","path":"ApplicationSignalsECSSidecarTest/DefaultTest","children":{"Default":{"id":"Default","path":"ApplicationSignalsECSSidecarTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"ApplicationSignalsECSSidecarTest/DefaultTest/DeployAssert","children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"ApplicationSignalsECSSidecarTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApplicationSignalsECSSidecarTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"}}}