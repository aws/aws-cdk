"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_iam_1 = require("aws-cdk-lib/aws-iam");
const aws_cdk_lib_1 = require("aws-cdk-lib");
const integ_tests_alpha_1 = require("@aws-cdk/integ-tests-alpha");
const aws_kms_1 = require("aws-cdk-lib/aws-kms");
const app = new aws_cdk_lib_1.App();
const stack = new aws_cdk_lib_1.Stack(app, 'aws-cdk-kms-hmac');
const role = new aws_iam_1.Role(stack, 'Role', {
    assumedBy: new aws_iam_1.AccountRootPrincipal(),
});
const key = new aws_kms_1.Key(stack, 'MyHmacKey', {
    removalPolicy: aws_cdk_lib_1.RemovalPolicy.DESTROY,
    keyUsage: aws_kms_1.KeyUsage.GENERATE_VERIFY_MAC,
    keySpec: aws_kms_1.KeySpec.HMAC_512,
});
key.grantGenerateMac(role);
key.grantVerifyMac(role);
new integ_tests_alpha_1.IntegTest(app, 'HmacIntegTest', {
    testCases: [
        stack,
    ],
});
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZWcua2V5LWhtYWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbnRlZy5rZXktaG1hYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUFpRTtBQUNqRSw2Q0FBd0Q7QUFDeEQsa0VBQXVEO0FBQ3ZELGlEQUE2RDtBQUU3RCxNQUFNLEdBQUcsR0FBRyxJQUFJLGlCQUFHLEVBQUUsQ0FBQztBQUV0QixNQUFNLEtBQUssR0FBRyxJQUFJLG1CQUFLLENBQUMsR0FBRyxFQUFFLGtCQUFrQixDQUFDLENBQUM7QUFFakQsTUFBTSxJQUFJLEdBQUcsSUFBSSxjQUFJLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRTtJQUNuQyxTQUFTLEVBQUUsSUFBSSw4QkFBb0IsRUFBRTtDQUN0QyxDQUFDLENBQUM7QUFFSCxNQUFNLEdBQUcsR0FBRyxJQUFJLGFBQUcsQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFO0lBQ3RDLGFBQWEsRUFBRSwyQkFBYSxDQUFDLE9BQU87SUFDcEMsUUFBUSxFQUFFLGtCQUFRLENBQUMsbUJBQW1CO0lBQ3RDLE9BQU8sRUFBRSxpQkFBTyxDQUFDLFFBQVE7Q0FDMUIsQ0FBQyxDQUFDO0FBRUgsR0FBRyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzNCLEdBQUcsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7QUFFekIsSUFBSSw2QkFBUyxDQUFDLEdBQUcsRUFBRSxlQUFlLEVBQUU7SUFDbEMsU0FBUyxFQUFFO1FBQ1QsS0FBSztLQUNOO0NBQ0YsQ0FBQyxDQUFDO0FBRUgsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWNjb3VudFJvb3RQcmluY2lwYWwsIFJvbGUgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtaWFtJztcbmltcG9ydCB7IEFwcCwgUmVtb3ZhbFBvbGljeSwgU3RhY2sgfSBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgeyBJbnRlZ1Rlc3QgfSBmcm9tICdAYXdzLWNkay9pbnRlZy10ZXN0cy1hbHBoYSc7XG5pbXBvcnQgeyBLZXksIEtleVNwZWMsIEtleVVzYWdlIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWttcyc7XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcblxuY29uc3Qgc3RhY2sgPSBuZXcgU3RhY2soYXBwLCAnYXdzLWNkay1rbXMtaG1hYycpO1xuXG5jb25zdCByb2xlID0gbmV3IFJvbGUoc3RhY2ssICdSb2xlJywge1xuICBhc3N1bWVkQnk6IG5ldyBBY2NvdW50Um9vdFByaW5jaXBhbCgpLFxufSk7XG5cbmNvbnN0IGtleSA9IG5ldyBLZXkoc3RhY2ssICdNeUhtYWNLZXknLCB7XG4gIHJlbW92YWxQb2xpY3k6IFJlbW92YWxQb2xpY3kuREVTVFJPWSxcbiAga2V5VXNhZ2U6IEtleVVzYWdlLkdFTkVSQVRFX1ZFUklGWV9NQUMsXG4gIGtleVNwZWM6IEtleVNwZWMuSE1BQ181MTIsXG59KTtcblxua2V5LmdyYW50R2VuZXJhdGVNYWMocm9sZSk7XG5rZXkuZ3JhbnRWZXJpZnlNYWMocm9sZSk7XG5cbm5ldyBJbnRlZ1Rlc3QoYXBwLCAnSG1hY0ludGVnVGVzdCcsIHtcbiAgdGVzdENhc2VzOiBbXG4gICAgc3RhY2ssXG4gIF0sXG59KTtcblxuYXBwLnN5bnRoKCk7XG5cblxuIl19