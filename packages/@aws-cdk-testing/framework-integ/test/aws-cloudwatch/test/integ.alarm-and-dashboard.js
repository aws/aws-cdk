"use strict";
// Integration test to deploy some resources, create an alarm on it and create a dashboard.
//
// Because literally every other library is going to depend on @aws-cdk/aws-cloudwatch, we drop down
// to the very lowest level to create CloudFormation resources by hand, without even generated
// library support.
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = require("aws-cdk-lib");
const integ_tests_alpha_1 = require("@aws-cdk/integ-tests-alpha");
const cloudwatch = require("aws-cdk-lib/aws-cloudwatch");
const app = new cdk.App();
const stack = new cdk.Stack(app, 'aws-cdk-cloudwatch-alarms');
const queue = new cdk.CfnResource(stack, 'queue', { type: 'AWS::SQS::Queue' });
const numberOfMessagesVisibleMetric = new cloudwatch.Metric({
    namespace: 'AWS/SQS',
    metricName: 'ApproximateNumberOfMessagesVisible',
    dimensionsMap: { QueueName: queue.getAtt('QueueName').toString() },
});
const sentMessageSizeMetric = new cloudwatch.Metric({
    namespace: 'AWS/SQS',
    metricName: 'SentMessageSize',
    dimensionsMap: { QueueName: queue.getAtt('QueueName').toString() },
});
const alarm = numberOfMessagesVisibleMetric.createAlarm(stack, 'Alarm', {
    threshold: 100,
    evaluationPeriods: 3,
    datapointsToAlarm: 2,
});
const dashboard = new cloudwatch.Dashboard(stack, 'Dash', {
    dashboardName: 'MyCustomDashboardName',
    start: '-9H',
    end: '2018-12-17T06:00:00.000Z',
    periodOverride: cloudwatch.PeriodOverride.INHERIT,
});
dashboard.addWidgets(new cloudwatch.TextWidget({ markdown: '# This is my dashboard' }), new cloudwatch.TextWidget({ markdown: 'you like?' }));
dashboard.addWidgets(new cloudwatch.AlarmWidget({
    title: 'Messages in queue',
    alarm,
}));
dashboard.addWidgets(new cloudwatch.AlarmStatusWidget({
    title: 'Firing alarms',
    alarms: [alarm],
}));
dashboard.addWidgets(new cloudwatch.GraphWidget({
    title: 'More messages in queue with alarm annotation',
    left: [numberOfMessagesVisibleMetric],
    leftAnnotations: [alarm.toAnnotation()],
}));
dashboard.addWidgets(new cloudwatch.SingleValueWidget({
    title: 'Current messages in queue',
    metrics: [numberOfMessagesVisibleMetric],
}));
dashboard.addWidgets(new cloudwatch.LogQueryWidget({
    title: 'Errors in my log group',
    logGroupNames: ['my-log-group'],
    queryString: `fields @message
                | filter @message like /Error/`,
}));
dashboard.addWidgets(new cloudwatch.LogQueryWidget({
    title: 'Errors in my log group - bar',
    view: cloudwatch.LogQueryVisualizationType.BAR,
    logGroupNames: ['my-log-group'],
    queryString: `fields @message
                | filter @message like /Error/`,
}));
dashboard.addWidgets(new cloudwatch.LogQueryWidget({
    title: 'Errors in my log group - line',
    view: cloudwatch.LogQueryVisualizationType.LINE,
    logGroupNames: ['my-log-group'],
    queryString: `fields @message
                | filter @message like /Error/`,
}));
dashboard.addWidgets(new cloudwatch.LogQueryWidget({
    title: 'Errors in my log group - stacked',
    view: cloudwatch.LogQueryVisualizationType.STACKEDAREA,
    logGroupNames: ['my-log-group'],
    queryString: `fields @message
                | filter @message like /Error/`,
}));
dashboard.addWidgets(new cloudwatch.LogQueryWidget({
    title: 'Errors in my log group - pie',
    view: cloudwatch.LogQueryVisualizationType.PIE,
    logGroupNames: ['my-log-group'],
    queryString: `fields @message
                | filter @message like /Error/`,
}));
dashboard.addWidgets(new cloudwatch.SingleValueWidget({
    title: 'Sent message size',
    metrics: [sentMessageSizeMetric],
    fullPrecision: false,
}));
dashboard.addWidgets(new cloudwatch.SingleValueWidget({
    title: 'Sent message size with full precision',
    metrics: [sentMessageSizeMetric],
    fullPrecision: true,
}));
dashboard.addWidgets(new cloudwatch.CustomWidget({
    title: 'My custom alarm',
    functionArn: 'arn:aws:lambda:us-west-2:123456789012:function:my-function',
}));
new integ_tests_alpha_1.IntegTest(app, 'cdk-cloudwatch-alarms-integ-test', {
    testCases: [stack],
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZWcuYWxhcm0tYW5kLWRhc2hib2FyZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImludGVnLmFsYXJtLWFuZC1kYXNoYm9hcmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDJGQUEyRjtBQUMzRixFQUFFO0FBQ0Ysb0dBQW9HO0FBQ3BHLDhGQUE4RjtBQUM5RixtQkFBbUI7O0FBRW5CLG1DQUFtQztBQUNuQyxrRUFBdUQ7QUFDdkQseURBQXlEO0FBRXpELE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBRTFCLE1BQU0sS0FBSyxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsMkJBQTJCLENBQUMsQ0FBQztBQUU5RCxNQUFNLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksRUFBRSxpQkFBaUIsRUFBRSxDQUFDLENBQUM7QUFFL0UsTUFBTSw2QkFBNkIsR0FBRyxJQUFJLFVBQVUsQ0FBQyxNQUFNLENBQUM7SUFDMUQsU0FBUyxFQUFFLFNBQVM7SUFDcEIsVUFBVSxFQUFFLG9DQUFvQztJQUNoRCxhQUFhLEVBQUUsRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtDQUNuRSxDQUFDLENBQUM7QUFFSCxNQUFNLHFCQUFxQixHQUFHLElBQUksVUFBVSxDQUFDLE1BQU0sQ0FBQztJQUNsRCxTQUFTLEVBQUUsU0FBUztJQUNwQixVQUFVLEVBQUUsaUJBQWlCO0lBQzdCLGFBQWEsRUFBRSxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO0NBQ25FLENBQUMsQ0FBQztBQUVILE1BQU0sS0FBSyxHQUFHLDZCQUE2QixDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFO0lBQ3RFLFNBQVMsRUFBRSxHQUFHO0lBQ2QsaUJBQWlCLEVBQUUsQ0FBQztJQUNwQixpQkFBaUIsRUFBRSxDQUFDO0NBQ3JCLENBQUMsQ0FBQztBQUVILE1BQU0sU0FBUyxHQUFHLElBQUksVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFO0lBQ3hELGFBQWEsRUFBRSx1QkFBdUI7SUFDdEMsS0FBSyxFQUFFLEtBQUs7SUFDWixHQUFHLEVBQUUsMEJBQTBCO0lBQy9CLGNBQWMsRUFBRSxVQUFVLENBQUMsY0FBYyxDQUFDLE9BQU87Q0FDbEQsQ0FBQyxDQUFDO0FBQ0gsU0FBUyxDQUFDLFVBQVUsQ0FDbEIsSUFBSSxVQUFVLENBQUMsVUFBVSxDQUFDLEVBQUUsUUFBUSxFQUFFLHdCQUF3QixFQUFFLENBQUMsRUFDakUsSUFBSSxVQUFVLENBQUMsVUFBVSxDQUFDLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQ3JELENBQUM7QUFDRixTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksVUFBVSxDQUFDLFdBQVcsQ0FBQztJQUM5QyxLQUFLLEVBQUUsbUJBQW1CO0lBQzFCLEtBQUs7Q0FDTixDQUFDLENBQUMsQ0FBQztBQUNKLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxVQUFVLENBQUMsaUJBQWlCLENBQUM7SUFDcEQsS0FBSyxFQUFFLGVBQWU7SUFDdEIsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDO0NBQ2hCLENBQUMsQ0FBQyxDQUFDO0FBQ0osU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxXQUFXLENBQUM7SUFDOUMsS0FBSyxFQUFFLDhDQUE4QztJQUNyRCxJQUFJLEVBQUUsQ0FBQyw2QkFBNkIsQ0FBQztJQUNyQyxlQUFlLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLENBQUM7Q0FDeEMsQ0FBQyxDQUFDLENBQUM7QUFDSixTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksVUFBVSxDQUFDLGlCQUFpQixDQUFDO0lBQ3BELEtBQUssRUFBRSwyQkFBMkI7SUFDbEMsT0FBTyxFQUFFLENBQUMsNkJBQTZCLENBQUM7Q0FDekMsQ0FBQyxDQUFDLENBQUM7QUFDSixTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksVUFBVSxDQUFDLGNBQWMsQ0FBQztJQUNqRCxLQUFLLEVBQUUsd0JBQXdCO0lBQy9CLGFBQWEsRUFBRSxDQUFDLGNBQWMsQ0FBQztJQUMvQixXQUFXLEVBQUU7K0NBQ2dDO0NBQzlDLENBQUMsQ0FBQyxDQUFDO0FBQ0osU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxjQUFjLENBQUM7SUFDakQsS0FBSyxFQUFFLDhCQUE4QjtJQUNyQyxJQUFJLEVBQUUsVUFBVSxDQUFDLHlCQUF5QixDQUFDLEdBQUc7SUFDOUMsYUFBYSxFQUFFLENBQUMsY0FBYyxDQUFDO0lBQy9CLFdBQVcsRUFBRTsrQ0FDZ0M7Q0FDOUMsQ0FBQyxDQUFDLENBQUM7QUFDSixTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksVUFBVSxDQUFDLGNBQWMsQ0FBQztJQUNqRCxLQUFLLEVBQUUsK0JBQStCO0lBQ3RDLElBQUksRUFBRSxVQUFVLENBQUMseUJBQXlCLENBQUMsSUFBSTtJQUMvQyxhQUFhLEVBQUUsQ0FBQyxjQUFjLENBQUM7SUFDL0IsV0FBVyxFQUFFOytDQUNnQztDQUM5QyxDQUFDLENBQUMsQ0FBQztBQUNKLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxVQUFVLENBQUMsY0FBYyxDQUFDO0lBQ2pELEtBQUssRUFBRSxrQ0FBa0M7SUFDekMsSUFBSSxFQUFFLFVBQVUsQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXO0lBQ3RELGFBQWEsRUFBRSxDQUFDLGNBQWMsQ0FBQztJQUMvQixXQUFXLEVBQUU7K0NBQ2dDO0NBQzlDLENBQUMsQ0FBQyxDQUFDO0FBQ0osU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxjQUFjLENBQUM7SUFDakQsS0FBSyxFQUFFLDhCQUE4QjtJQUNyQyxJQUFJLEVBQUUsVUFBVSxDQUFDLHlCQUF5QixDQUFDLEdBQUc7SUFDOUMsYUFBYSxFQUFFLENBQUMsY0FBYyxDQUFDO0lBQy9CLFdBQVcsRUFBRTsrQ0FDZ0M7Q0FDOUMsQ0FBQyxDQUFDLENBQUM7QUFDSixTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksVUFBVSxDQUFDLGlCQUFpQixDQUFDO0lBQ3BELEtBQUssRUFBRSxtQkFBbUI7SUFDMUIsT0FBTyxFQUFFLENBQUMscUJBQXFCLENBQUM7SUFDaEMsYUFBYSxFQUFFLEtBQUs7Q0FDckIsQ0FBQyxDQUFDLENBQUM7QUFDSixTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksVUFBVSxDQUFDLGlCQUFpQixDQUFDO0lBQ3BELEtBQUssRUFBRSx1Q0FBdUM7SUFDOUMsT0FBTyxFQUFFLENBQUMscUJBQXFCLENBQUM7SUFDaEMsYUFBYSxFQUFFLElBQUk7Q0FDcEIsQ0FBQyxDQUFDLENBQUM7QUFDSixTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksVUFBVSxDQUFDLFlBQVksQ0FBQztJQUMvQyxLQUFLLEVBQUUsaUJBQWlCO0lBQ3hCLFdBQVcsRUFBRSw0REFBNEQ7Q0FDMUUsQ0FBQyxDQUFDLENBQUM7QUFFSixJQUFJLDZCQUFTLENBQUMsR0FBRyxFQUFFLGtDQUFrQyxFQUFFO0lBQ3JELFNBQVMsRUFBRSxDQUFDLEtBQUssQ0FBQztDQUNuQixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbnRlZ3JhdGlvbiB0ZXN0IHRvIGRlcGxveSBzb21lIHJlc291cmNlcywgY3JlYXRlIGFuIGFsYXJtIG9uIGl0IGFuZCBjcmVhdGUgYSBkYXNoYm9hcmQuXG4vL1xuLy8gQmVjYXVzZSBsaXRlcmFsbHkgZXZlcnkgb3RoZXIgbGlicmFyeSBpcyBnb2luZyB0byBkZXBlbmQgb24gQGF3cy1jZGsvYXdzLWNsb3Vkd2F0Y2gsIHdlIGRyb3AgZG93blxuLy8gdG8gdGhlIHZlcnkgbG93ZXN0IGxldmVsIHRvIGNyZWF0ZSBDbG91ZEZvcm1hdGlvbiByZXNvdXJjZXMgYnkgaGFuZCwgd2l0aG91dCBldmVuIGdlbmVyYXRlZFxuLy8gbGlicmFyeSBzdXBwb3J0LlxuXG5pbXBvcnQgKiBhcyBjZGsgZnJvbSAnYXdzLWNkay1saWInO1xuaW1wb3J0IHsgSW50ZWdUZXN0IH0gZnJvbSAnQGF3cy1jZGsvaW50ZWctdGVzdHMtYWxwaGEnO1xuaW1wb3J0ICogYXMgY2xvdWR3YXRjaCBmcm9tICdhd3MtY2RrLWxpYi9hd3MtY2xvdWR3YXRjaCc7XG5cbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG5cbmNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjayhhcHAsICdhd3MtY2RrLWNsb3Vkd2F0Y2gtYWxhcm1zJyk7XG5cbmNvbnN0IHF1ZXVlID0gbmV3IGNkay5DZm5SZXNvdXJjZShzdGFjaywgJ3F1ZXVlJywgeyB0eXBlOiAnQVdTOjpTUVM6OlF1ZXVlJyB9KTtcblxuY29uc3QgbnVtYmVyT2ZNZXNzYWdlc1Zpc2libGVNZXRyaWMgPSBuZXcgY2xvdWR3YXRjaC5NZXRyaWMoe1xuICBuYW1lc3BhY2U6ICdBV1MvU1FTJyxcbiAgbWV0cmljTmFtZTogJ0FwcHJveGltYXRlTnVtYmVyT2ZNZXNzYWdlc1Zpc2libGUnLFxuICBkaW1lbnNpb25zTWFwOiB7IFF1ZXVlTmFtZTogcXVldWUuZ2V0QXR0KCdRdWV1ZU5hbWUnKS50b1N0cmluZygpIH0sXG59KTtcblxuY29uc3Qgc2VudE1lc3NhZ2VTaXplTWV0cmljID0gbmV3IGNsb3Vkd2F0Y2guTWV0cmljKHtcbiAgbmFtZXNwYWNlOiAnQVdTL1NRUycsXG4gIG1ldHJpY05hbWU6ICdTZW50TWVzc2FnZVNpemUnLFxuICBkaW1lbnNpb25zTWFwOiB7IFF1ZXVlTmFtZTogcXVldWUuZ2V0QXR0KCdRdWV1ZU5hbWUnKS50b1N0cmluZygpIH0sXG59KTtcblxuY29uc3QgYWxhcm0gPSBudW1iZXJPZk1lc3NhZ2VzVmlzaWJsZU1ldHJpYy5jcmVhdGVBbGFybShzdGFjaywgJ0FsYXJtJywge1xuICB0aHJlc2hvbGQ6IDEwMCxcbiAgZXZhbHVhdGlvblBlcmlvZHM6IDMsXG4gIGRhdGFwb2ludHNUb0FsYXJtOiAyLFxufSk7XG5cbmNvbnN0IGRhc2hib2FyZCA9IG5ldyBjbG91ZHdhdGNoLkRhc2hib2FyZChzdGFjaywgJ0Rhc2gnLCB7XG4gIGRhc2hib2FyZE5hbWU6ICdNeUN1c3RvbURhc2hib2FyZE5hbWUnLFxuICBzdGFydDogJy05SCcsXG4gIGVuZDogJzIwMTgtMTItMTdUMDY6MDA6MDAuMDAwWicsXG4gIHBlcmlvZE92ZXJyaWRlOiBjbG91ZHdhdGNoLlBlcmlvZE92ZXJyaWRlLklOSEVSSVQsXG59KTtcbmRhc2hib2FyZC5hZGRXaWRnZXRzKFxuICBuZXcgY2xvdWR3YXRjaC5UZXh0V2lkZ2V0KHsgbWFya2Rvd246ICcjIFRoaXMgaXMgbXkgZGFzaGJvYXJkJyB9KSxcbiAgbmV3IGNsb3Vkd2F0Y2guVGV4dFdpZGdldCh7IG1hcmtkb3duOiAneW91IGxpa2U/JyB9KSxcbik7XG5kYXNoYm9hcmQuYWRkV2lkZ2V0cyhuZXcgY2xvdWR3YXRjaC5BbGFybVdpZGdldCh7XG4gIHRpdGxlOiAnTWVzc2FnZXMgaW4gcXVldWUnLFxuICBhbGFybSxcbn0pKTtcbmRhc2hib2FyZC5hZGRXaWRnZXRzKG5ldyBjbG91ZHdhdGNoLkFsYXJtU3RhdHVzV2lkZ2V0KHtcbiAgdGl0bGU6ICdGaXJpbmcgYWxhcm1zJyxcbiAgYWxhcm1zOiBbYWxhcm1dLFxufSkpO1xuZGFzaGJvYXJkLmFkZFdpZGdldHMobmV3IGNsb3Vkd2F0Y2guR3JhcGhXaWRnZXQoe1xuICB0aXRsZTogJ01vcmUgbWVzc2FnZXMgaW4gcXVldWUgd2l0aCBhbGFybSBhbm5vdGF0aW9uJyxcbiAgbGVmdDogW251bWJlck9mTWVzc2FnZXNWaXNpYmxlTWV0cmljXSxcbiAgbGVmdEFubm90YXRpb25zOiBbYWxhcm0udG9Bbm5vdGF0aW9uKCldLFxufSkpO1xuZGFzaGJvYXJkLmFkZFdpZGdldHMobmV3IGNsb3Vkd2F0Y2guU2luZ2xlVmFsdWVXaWRnZXQoe1xuICB0aXRsZTogJ0N1cnJlbnQgbWVzc2FnZXMgaW4gcXVldWUnLFxuICBtZXRyaWNzOiBbbnVtYmVyT2ZNZXNzYWdlc1Zpc2libGVNZXRyaWNdLFxufSkpO1xuZGFzaGJvYXJkLmFkZFdpZGdldHMobmV3IGNsb3Vkd2F0Y2guTG9nUXVlcnlXaWRnZXQoe1xuICB0aXRsZTogJ0Vycm9ycyBpbiBteSBsb2cgZ3JvdXAnLFxuICBsb2dHcm91cE5hbWVzOiBbJ215LWxvZy1ncm91cCddLFxuICBxdWVyeVN0cmluZzogYGZpZWxkcyBAbWVzc2FnZVxuICAgICAgICAgICAgICAgIHwgZmlsdGVyIEBtZXNzYWdlIGxpa2UgL0Vycm9yL2AsXG59KSk7XG5kYXNoYm9hcmQuYWRkV2lkZ2V0cyhuZXcgY2xvdWR3YXRjaC5Mb2dRdWVyeVdpZGdldCh7XG4gIHRpdGxlOiAnRXJyb3JzIGluIG15IGxvZyBncm91cCAtIGJhcicsXG4gIHZpZXc6IGNsb3Vkd2F0Y2guTG9nUXVlcnlWaXN1YWxpemF0aW9uVHlwZS5CQVIsXG4gIGxvZ0dyb3VwTmFtZXM6IFsnbXktbG9nLWdyb3VwJ10sXG4gIHF1ZXJ5U3RyaW5nOiBgZmllbGRzIEBtZXNzYWdlXG4gICAgICAgICAgICAgICAgfCBmaWx0ZXIgQG1lc3NhZ2UgbGlrZSAvRXJyb3IvYCxcbn0pKTtcbmRhc2hib2FyZC5hZGRXaWRnZXRzKG5ldyBjbG91ZHdhdGNoLkxvZ1F1ZXJ5V2lkZ2V0KHtcbiAgdGl0bGU6ICdFcnJvcnMgaW4gbXkgbG9nIGdyb3VwIC0gbGluZScsXG4gIHZpZXc6IGNsb3Vkd2F0Y2guTG9nUXVlcnlWaXN1YWxpemF0aW9uVHlwZS5MSU5FLFxuICBsb2dHcm91cE5hbWVzOiBbJ215LWxvZy1ncm91cCddLFxuICBxdWVyeVN0cmluZzogYGZpZWxkcyBAbWVzc2FnZVxuICAgICAgICAgICAgICAgIHwgZmlsdGVyIEBtZXNzYWdlIGxpa2UgL0Vycm9yL2AsXG59KSk7XG5kYXNoYm9hcmQuYWRkV2lkZ2V0cyhuZXcgY2xvdWR3YXRjaC5Mb2dRdWVyeVdpZGdldCh7XG4gIHRpdGxlOiAnRXJyb3JzIGluIG15IGxvZyBncm91cCAtIHN0YWNrZWQnLFxuICB2aWV3OiBjbG91ZHdhdGNoLkxvZ1F1ZXJ5VmlzdWFsaXphdGlvblR5cGUuU1RBQ0tFREFSRUEsXG4gIGxvZ0dyb3VwTmFtZXM6IFsnbXktbG9nLWdyb3VwJ10sXG4gIHF1ZXJ5U3RyaW5nOiBgZmllbGRzIEBtZXNzYWdlXG4gICAgICAgICAgICAgICAgfCBmaWx0ZXIgQG1lc3NhZ2UgbGlrZSAvRXJyb3IvYCxcbn0pKTtcbmRhc2hib2FyZC5hZGRXaWRnZXRzKG5ldyBjbG91ZHdhdGNoLkxvZ1F1ZXJ5V2lkZ2V0KHtcbiAgdGl0bGU6ICdFcnJvcnMgaW4gbXkgbG9nIGdyb3VwIC0gcGllJyxcbiAgdmlldzogY2xvdWR3YXRjaC5Mb2dRdWVyeVZpc3VhbGl6YXRpb25UeXBlLlBJRSxcbiAgbG9nR3JvdXBOYW1lczogWydteS1sb2ctZ3JvdXAnXSxcbiAgcXVlcnlTdHJpbmc6IGBmaWVsZHMgQG1lc3NhZ2VcbiAgICAgICAgICAgICAgICB8IGZpbHRlciBAbWVzc2FnZSBsaWtlIC9FcnJvci9gLFxufSkpO1xuZGFzaGJvYXJkLmFkZFdpZGdldHMobmV3IGNsb3Vkd2F0Y2guU2luZ2xlVmFsdWVXaWRnZXQoe1xuICB0aXRsZTogJ1NlbnQgbWVzc2FnZSBzaXplJyxcbiAgbWV0cmljczogW3NlbnRNZXNzYWdlU2l6ZU1ldHJpY10sXG4gIGZ1bGxQcmVjaXNpb246IGZhbHNlLFxufSkpO1xuZGFzaGJvYXJkLmFkZFdpZGdldHMobmV3IGNsb3Vkd2F0Y2guU2luZ2xlVmFsdWVXaWRnZXQoe1xuICB0aXRsZTogJ1NlbnQgbWVzc2FnZSBzaXplIHdpdGggZnVsbCBwcmVjaXNpb24nLFxuICBtZXRyaWNzOiBbc2VudE1lc3NhZ2VTaXplTWV0cmljXSxcbiAgZnVsbFByZWNpc2lvbjogdHJ1ZSxcbn0pKTtcbmRhc2hib2FyZC5hZGRXaWRnZXRzKG5ldyBjbG91ZHdhdGNoLkN1c3RvbVdpZGdldCh7XG4gIHRpdGxlOiAnTXkgY3VzdG9tIGFsYXJtJyxcbiAgZnVuY3Rpb25Bcm46ICdhcm46YXdzOmxhbWJkYTp1cy13ZXN0LTI6MTIzNDU2Nzg5MDEyOmZ1bmN0aW9uOm15LWZ1bmN0aW9uJyxcbn0pKTtcblxubmV3IEludGVnVGVzdChhcHAsICdjZGstY2xvdWR3YXRjaC1hbGFybXMtaW50ZWctdGVzdCcsIHtcbiAgdGVzdENhc2VzOiBbc3RhY2tdLFxufSk7XG4iXX0=