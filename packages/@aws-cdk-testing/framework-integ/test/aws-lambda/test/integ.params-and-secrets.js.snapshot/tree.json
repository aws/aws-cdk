{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"},"children":{"Stack1":{"id":"Stack1","path":"Stack1","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"Parameter":{"id":"Parameter","path":"Stack1/Parameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"0.0.0","metadata":[{"parameterName":"*","stringValue":"*"}]},"children":{"Resource":{"id":"Resource","path":"Stack1/Parameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"email_url_Stack1","type":"String","value":"api.example.com"}}}}},"MySecret":{"id":"MySecret","path":"Stack1/MySecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"0.0.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"Stack1/MySecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{}}}}}},"MyFunc":{"id":"MyFunc","path":"Stack1/MyFunc","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"0.0.0","metadata":[{"runtime":"*","handler":"*","code":"*","architecture":"*","paramsAndSecrets":"*"},{"addLayers":["*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Stack1/MyFunc/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Stack1/MyFunc/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Stack1/MyFunc/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Stack1/MyFunc/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Stack1/MyFunc/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"MySecret8FE80B51"}},{"Action":["ssm:DescribeParameters","ssm:GetParameter","ssm:GetParameterHistory","ssm:GetParameters"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":ssm:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":parameter/",{"Ref":"Parameter9E1B4FBA"}]]}}],"Version":"2012-10-17"},"policyName":"MyFuncServiceRoleDefaultPolicyF3C36699","roles":[{"Ref":"MyFuncServiceRole54065130"}]}}}}}}},"Code":{"id":"Code","path":"Stack1/MyFunc/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"0.0.0"},"children":{"Stage":{"id":"Stage","path":"Stack1/MyFunc/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"0.0.0"}},"AssetBucket":{"id":"AssetBucket","path":"Stack1/MyFunc/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"0.0.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Stack1/MyFunc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"cdc12f174e7505909ed092d9a0b412b01c86d11714993bb9654bf1497c1ef169.zip"},"environment":{"variables":{"PARAMETERS_SECRETS_EXTENSION_CACHE_ENABLED":"true","PARAMETERS_SECRETS_EXTENSION_CACHE_SIZE":"100","PARAMETERS_SECRETS_EXTENSION_HTTP_PORT":"8080","PARAMETERS_SECRETS_EXTENSION_LOG_LEVEL":"debug","PARAMETERS_SECRETS_EXTENSION_MAX_CONNECTIONS":"5","SECRETS_MANAGER_TIMEOUT_MILLIS":"0","SECRETS_MANAGER_TTL":"100","SSM_PARAMETER_STORE_TIMEOUT_MILLIS":"0","SSM_PARAMETER_STORE_TTL":"100"}},"handler":"index.handler","layers":[{"Fn::FindInMap":["ParamsandsecretslayerMap",{"Ref":"AWS::Region"},"1x0x103xx86x64"]}],"role":{"Fn::GetAtt":["MyFuncServiceRole54065130","Arn"]},"runtime":"nodejs20.x"}}},"ParamsAndSecretsLayer":{"id":"ParamsAndSecretsLayer","path":"Stack1/MyFunc/ParamsAndSecretsLayer","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":[]}}}},"Params-and-secrets-layerMap":{"id":"Params-and-secrets-layerMap","path":"Stack1/Params-and-secrets-layerMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"0.0.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"Stack1/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"Stack1/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}},"Stack2":{"id":"Stack2","path":"Stack2","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"Parameter":{"id":"Parameter","path":"Stack2/Parameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"0.0.0","metadata":[{"parameterName":"*","stringValue":"*"}]},"children":{"Resource":{"id":"Resource","path":"Stack2/Parameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"email_url_Stack2","type":"String","value":"api.example.com"}}}}},"MySecret":{"id":"MySecret","path":"Stack2/MySecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"0.0.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"Stack2/MySecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{}}}}}},"MyFunc":{"id":"MyFunc","path":"Stack2/MyFunc","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"0.0.0","metadata":[{"runtime":"*","handler":"*","code":"*","architecture":"*","paramsAndSecrets":"*"},{"addLayers":["*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Stack2/MyFunc/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Stack2/MyFunc/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"Stack2/MyFunc/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Stack2/MyFunc/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"Stack2/MyFunc/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"MySecret8FE80B51"}},{"Action":["ssm:DescribeParameters","ssm:GetParameter","ssm:GetParameterHistory","ssm:GetParameters"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":ssm:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":parameter/",{"Ref":"Parameter9E1B4FBA"}]]}}],"Version":"2012-10-17"},"policyName":"MyFuncServiceRoleDefaultPolicyF3C36699","roles":[{"Ref":"MyFuncServiceRole54065130"}]}}}}}}},"Code":{"id":"Code","path":"Stack2/MyFunc/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"0.0.0"},"children":{"Stage":{"id":"Stage","path":"Stack2/MyFunc/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"0.0.0"}},"AssetBucket":{"id":"AssetBucket","path":"Stack2/MyFunc/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"0.0.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Stack2/MyFunc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"cdc12f174e7505909ed092d9a0b412b01c86d11714993bb9654bf1497c1ef169.zip"},"environment":{"variables":{"PARAMETERS_SECRETS_EXTENSION_CACHE_ENABLED":"true","PARAMETERS_SECRETS_EXTENSION_CACHE_SIZE":"100","PARAMETERS_SECRETS_EXTENSION_HTTP_PORT":"8080","PARAMETERS_SECRETS_EXTENSION_LOG_LEVEL":"debug","PARAMETERS_SECRETS_EXTENSION_MAX_CONNECTIONS":"5","SECRETS_MANAGER_TIMEOUT_MILLIS":"0","SECRETS_MANAGER_TTL":"100","SSM_PARAMETER_STORE_TIMEOUT_MILLIS":"0","SSM_PARAMETER_STORE_TTL":"100"}},"handler":"index.handler","layers":[{"Fn::FindInMap":["ParamsandsecretslayerMap",{"Ref":"AWS::Region"},"1x0x103xarm64"]}],"role":{"Fn::GetAtt":["MyFuncServiceRole54065130","Arn"]},"runtime":"nodejs20.x"}}},"ParamsAndSecretsLayer":{"id":"ParamsAndSecretsLayer","path":"Stack2/MyFunc/ParamsAndSecretsLayer","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":[]}}}},"Params-and-secrets-layerMap":{"id":"Params-and-secrets-layerMap","path":"Stack2/Params-and-secrets-layerMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"0.0.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"Stack2/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"Stack2/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}},"IntegTest":{"id":"IntegTest","path":"IntegTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"IntegTest/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"},"children":{"Default":{"id":"Default","path":"IntegTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"IntegTest/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"IntegTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"IntegTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}