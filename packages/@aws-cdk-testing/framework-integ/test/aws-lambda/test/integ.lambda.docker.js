"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
const aws_cdk_lib_1 = require("aws-cdk-lib");
const integ_tests_alpha_1 = require("@aws-cdk/integ-tests-alpha");
const aws_lambda_1 = require("aws-cdk-lib/aws-lambda");
class TestStack extends aws_cdk_lib_1.Stack {
    constructor(scope, id) {
        super(scope, id);
        this.fn = new aws_lambda_1.DockerImageFunction(this, 'MyLambda', {
            code: aws_lambda_1.DockerImageCode.fromImageAsset(path.join(__dirname, 'docker-lambda-handler')),
        });
    }
}
const app = new aws_cdk_lib_1.App();
const testStack = new TestStack(app, 'lambda-ecr-docker');
const integ = new integ_tests_alpha_1.IntegTest(app, 'integ', {
    testCases: [testStack],
});
const invoke = integ.assertions.invokeFunction({
    functionName: testStack.fn.functionName,
});
invoke.expect(integ_tests_alpha_1.ExpectedResult.objectLike({
    Payload: integ_tests_alpha_1.Match.serializedJson({ statusCode: 200 }),
}));
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZWcubGFtYmRhLmRvY2tlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImludGVnLmxhbWJkYS5kb2NrZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2QkFBNkI7QUFDN0IsNkNBQXlDO0FBQ3pDLGtFQUE4RTtBQUM5RSx1REFBd0Y7QUFFeEYsTUFBTSxTQUFVLFNBQVEsbUJBQUs7SUFFM0IsWUFBWSxLQUFVLEVBQUUsRUFBVTtRQUNoQyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRWpCLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxnQ0FBbUIsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFO1lBQ2xELElBQUksRUFBRSw0QkFBZSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO1NBQ3BGLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQUVELE1BQU0sR0FBRyxHQUFHLElBQUksaUJBQUcsRUFBRSxDQUFDO0FBQ3RCLE1BQU0sU0FBUyxHQUFHLElBQUksU0FBUyxDQUFDLEdBQUcsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0FBQzFELE1BQU0sS0FBSyxHQUFHLElBQUksNkJBQVMsQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFO0lBQ3hDLFNBQVMsRUFBRSxDQUFDLFNBQVMsQ0FBQztDQUN2QixDQUFDLENBQUM7QUFFSCxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQztJQUM3QyxZQUFZLEVBQUUsU0FBUyxDQUFDLEVBQUUsQ0FBQyxZQUFZO0NBQ3hDLENBQUMsQ0FBQztBQUVILE1BQU0sQ0FBQyxNQUFNLENBQUMsa0NBQWMsQ0FBQyxVQUFVLENBQUM7SUFDdEMsT0FBTyxFQUFFLHlCQUFLLENBQUMsY0FBYyxDQUFDLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDO0NBQ25ELENBQUMsQ0FBQyxDQUFDO0FBRUosR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IEFwcCwgU3RhY2sgfSBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgeyBFeHBlY3RlZFJlc3VsdCwgSW50ZWdUZXN0LCBNYXRjaCB9IGZyb20gJ0Bhd3MtY2RrL2ludGVnLXRlc3RzLWFscGhhJztcbmltcG9ydCB7IERvY2tlckltYWdlQ29kZSwgRG9ja2VySW1hZ2VGdW5jdGlvbiwgRnVuY3Rpb24gfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtbGFtYmRhJztcblxuY2xhc3MgVGVzdFN0YWNrIGV4dGVuZHMgU3RhY2sge1xuICBwdWJsaWMgZm46IEZ1bmN0aW9uXG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBBcHAsIGlkOiBzdHJpbmcpIHtcbiAgICBzdXBlcihzY29wZSwgaWQpO1xuXG4gICAgdGhpcy5mbiA9IG5ldyBEb2NrZXJJbWFnZUZ1bmN0aW9uKHRoaXMsICdNeUxhbWJkYScsIHtcbiAgICAgIGNvZGU6IERvY2tlckltYWdlQ29kZS5mcm9tSW1hZ2VBc3NldChwYXRoLmpvaW4oX19kaXJuYW1lLCAnZG9ja2VyLWxhbWJkYS1oYW5kbGVyJykpLFxuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbmNvbnN0IHRlc3RTdGFjayA9IG5ldyBUZXN0U3RhY2soYXBwLCAnbGFtYmRhLWVjci1kb2NrZXInKTtcbmNvbnN0IGludGVnID0gbmV3IEludGVnVGVzdChhcHAsICdpbnRlZycsIHtcbiAgdGVzdENhc2VzOiBbdGVzdFN0YWNrXSxcbn0pO1xuXG5jb25zdCBpbnZva2UgPSBpbnRlZy5hc3NlcnRpb25zLmludm9rZUZ1bmN0aW9uKHtcbiAgZnVuY3Rpb25OYW1lOiB0ZXN0U3RhY2suZm4uZnVuY3Rpb25OYW1lLFxufSk7XG5cbmludm9rZS5leHBlY3QoRXhwZWN0ZWRSZXN1bHQub2JqZWN0TGlrZSh7XG4gIFBheWxvYWQ6IE1hdGNoLnNlcmlhbGl6ZWRKc29uKHsgc3RhdHVzQ29kZTogMjAwIH0pLFxufSkpO1xuXG5hcHAuc3ludGgoKTtcbiJdfQ==