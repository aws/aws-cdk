{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"},"children":{"ApiGatewayVpcEndpointTestStack":{"id":"ApiGatewayVpcEndpointTestStack","path":"ApiGatewayVpcEndpointTestStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"Vpc1":{"id":"Vpc1","path":"ApiGatewayVpcEndpointTestStack/Vpc1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"0.0.0","metadata":[{"restrictDefaultSecurityGroup":false,"natGateways":"*"}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Vpc1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"0.0.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet1"}],"vpcId":{"Ref":"Vpc1C211860B"}}}},"Acl":{"id":"Acl","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet1"}],"vpcId":{"Ref":"Vpc1C211860B"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"Vpc1PublicSubnet1RouteTable7CD3463B"},"subnetId":{"Ref":"Vpc1PublicSubnet1SubnetA38B5196"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"Vpc1IGW15AE5E6B"},"routeTableId":{"Ref":"Vpc1PublicSubnet1RouteTable7CD3463B"}}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"0.0.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet2"}],"vpcId":{"Ref":"Vpc1C211860B"}}}},"Acl":{"id":"Acl","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet2"}],"vpcId":{"Ref":"Vpc1C211860B"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"Vpc1PublicSubnet2RouteTable845CC89F"},"subnetId":{"Ref":"Vpc1PublicSubnet2Subnet9A232F02"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiGatewayVpcEndpointTestStack/Vpc1/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"Vpc1IGW15AE5E6B"},"routeTableId":{"Ref":"Vpc1PublicSubnet2RouteTable845CC89F"}}}}}},"IsolatedSubnet1":{"id":"IsolatedSubnet1","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"0.0.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"}]},"children":{"Subnet":{"id":"Subnet","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet1"}],"vpcId":{"Ref":"Vpc1C211860B"}}}},"Acl":{"id":"Acl","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet1"}],"vpcId":{"Ref":"Vpc1C211860B"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"Vpc1IsolatedSubnet1RouteTable85CC0284"},"subnetId":{"Ref":"Vpc1IsolatedSubnet1Subnet41898916"}}}}}},"IsolatedSubnet2":{"id":"IsolatedSubnet2","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"0.0.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"}]},"children":{"Subnet":{"id":"Subnet","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet2"}],"vpcId":{"Ref":"Vpc1C211860B"}}}},"Acl":{"id":"Acl","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet2"}],"vpcId":{"Ref":"Vpc1C211860B"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IsolatedSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"Vpc1IsolatedSubnet2RouteTable43B12B6D"},"subnetId":{"Ref":"Vpc1IsolatedSubnet2SubnetE973B126"}}}}}},"IGW":{"id":"IGW","path":"ApiGatewayVpcEndpointTestStack/Vpc1/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1"}]}}},"VPCGW":{"id":"VPCGW","path":"ApiGatewayVpcEndpointTestStack/Vpc1/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"Vpc1IGW15AE5E6B"},"vpcId":{"Ref":"Vpc1C211860B"}}}},"VpcEndpoint1":{"id":"VpcEndpoint1","path":"ApiGatewayVpcEndpointTestStack/Vpc1/VpcEndpoint1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"0.0.0","metadata":[{"vpc":"*","service":{"privateDnsDefault":true,"name":"*","port":"*"},"privateDnsEnabled":true}]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"ApiGatewayVpcEndpointTestStack/Vpc1/VpcEndpoint1/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"0.0.0","metadata":[{"vpc":"*"},{"addIngressRule":[{"canInlineRule":true,"connections":"*","uniqueId":"*"},{},"*",false]},{"addIngressRule":["*",{},"*",true]}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Vpc1/VpcEndpoint1/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"ApiGatewayVpcEndpointTestStack/Vpc1/VpcEndpoint1/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["Vpc1C211860B","CidrBlock"]},"ipProtocol":"tcp","fromPort":443,"toPort":443,"description":{"Fn::Join":["",["from ",{"Fn::GetAtt":["Vpc1C211860B","CidrBlock"]},":443"]]}}],"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1"}],"vpcId":{"Ref":"Vpc1C211860B"}}}},"from ApiGatewayVpcEndpointTestStackTestFunction0SecurityGroup8313BFC0:443":{"id":"from ApiGatewayVpcEndpointTestStackTestFunction0SecurityGroup8313BFC0:443","path":"ApiGatewayVpcEndpointTestStack/Vpc1/VpcEndpoint1/SecurityGroup/from ApiGatewayVpcEndpointTestStackTestFunction0SecurityGroup8313BFC0:443","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"from ApiGatewayVpcEndpointTestStackTestFunction0SecurityGroup8313BFC0:443","fromPort":443,"groupId":{"Fn::GetAtt":["Vpc1VpcEndpoint1SecurityGroup18C43C3D","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["TestFunction0SecurityGroup749DC118","GroupId"]},"toPort":443}}}}},"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Vpc1/VpcEndpoint1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc1"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["Vpc1VpcEndpoint1SecurityGroup18C43C3D","GroupId"]}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".execute-api"]]},"subnetIds":[{"Ref":"Vpc1IsolatedSubnet1Subnet41898916"},{"Ref":"Vpc1IsolatedSubnet2SubnetE973B126"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"Vpc1C211860B"}}}}}}}},"Vpc2":{"id":"Vpc2","path":"ApiGatewayVpcEndpointTestStack/Vpc2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"0.0.0","metadata":[{"restrictDefaultSecurityGroup":false,"natGateways":"*"}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Vpc2/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"0.0.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet1"}],"vpcId":{"Ref":"Vpc299FDBC5F"}}}},"Acl":{"id":"Acl","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet1"}],"vpcId":{"Ref":"Vpc299FDBC5F"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"Vpc2PublicSubnet1RouteTable424A19D4"},"subnetId":{"Ref":"Vpc2PublicSubnet1Subnet758D49A9"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"Vpc2IGWB10A76EB"},"routeTableId":{"Ref":"Vpc2PublicSubnet1RouteTable424A19D4"}}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"0.0.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":true,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{}]},"children":{"Subnet":{"id":"Subnet","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet2"}],"vpcId":{"Ref":"Vpc299FDBC5F"}}}},"Acl":{"id":"Acl","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet2"}],"vpcId":{"Ref":"Vpc299FDBC5F"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"Vpc2PublicSubnet2RouteTableF9AE47B1"},"subnetId":{"Ref":"Vpc2PublicSubnet2Subnet0BF8C291"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"ApiGatewayVpcEndpointTestStack/Vpc2/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"Vpc2IGWB10A76EB"},"routeTableId":{"Ref":"Vpc2PublicSubnet2RouteTableF9AE47B1"}}}}}},"IsolatedSubnet1":{"id":"IsolatedSubnet1","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"0.0.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"}]},"children":{"Subnet":{"id":"Subnet","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet1"}],"vpcId":{"Ref":"Vpc299FDBC5F"}}}},"Acl":{"id":"Acl","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet1"}],"vpcId":{"Ref":"Vpc299FDBC5F"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"Vpc2IsolatedSubnet1RouteTableB7D5B7B8"},"subnetId":{"Ref":"Vpc2IsolatedSubnet1SubnetB1A200D6"}}}}}},"IsolatedSubnet2":{"id":"IsolatedSubnet2","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"0.0.0","metadata":[{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"},{"availabilityZone":"*","vpcId":"*","cidrBlock":"*","mapPublicIpOnLaunch":false,"ipv6CidrBlock":"*","assignIpv6AddressOnCreation":"*"}]},"children":{"Subnet":{"id":"Subnet","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Isolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet2"}],"vpcId":{"Ref":"Vpc299FDBC5F"}}}},"Acl":{"id":"Acl","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet2"}],"vpcId":{"Ref":"Vpc299FDBC5F"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IsolatedSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"Vpc2IsolatedSubnet2RouteTableF69567F2"},"subnetId":{"Ref":"Vpc2IsolatedSubnet2SubnetAC9D1056"}}}}}},"IGW":{"id":"IGW","path":"ApiGatewayVpcEndpointTestStack/Vpc2/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2"}]}}},"VPCGW":{"id":"VPCGW","path":"ApiGatewayVpcEndpointTestStack/Vpc2/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"Vpc2IGWB10A76EB"},"vpcId":{"Ref":"Vpc299FDBC5F"}}}},"VpcEndpoint2":{"id":"VpcEndpoint2","path":"ApiGatewayVpcEndpointTestStack/Vpc2/VpcEndpoint2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"0.0.0","metadata":[{"vpc":"*","service":{"privateDnsDefault":true,"name":"*","port":"*"},"privateDnsEnabled":true}]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"ApiGatewayVpcEndpointTestStack/Vpc2/VpcEndpoint2/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"0.0.0","metadata":[{"vpc":"*"},{"addIngressRule":[{"canInlineRule":true,"connections":"*","uniqueId":"*"},{},"*",false]},{"addIngressRule":["*",{},"*",true]}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Vpc2/VpcEndpoint2/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"ApiGatewayVpcEndpointTestStack/Vpc2/VpcEndpoint2/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":{"Fn::GetAtt":["Vpc299FDBC5F","CidrBlock"]},"ipProtocol":"tcp","fromPort":443,"toPort":443,"description":{"Fn::Join":["",["from ",{"Fn::GetAtt":["Vpc299FDBC5F","CidrBlock"]},":443"]]}}],"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2"}],"vpcId":{"Ref":"Vpc299FDBC5F"}}}},"from ApiGatewayVpcEndpointTestStackTestFunction1SecurityGroup743BAD65:443":{"id":"from ApiGatewayVpcEndpointTestStackTestFunction1SecurityGroup743BAD65:443","path":"ApiGatewayVpcEndpointTestStack/Vpc2/VpcEndpoint2/SecurityGroup/from ApiGatewayVpcEndpointTestStackTestFunction1SecurityGroup743BAD65:443","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"from ApiGatewayVpcEndpointTestStackTestFunction1SecurityGroup743BAD65:443","fromPort":443,"groupId":{"Fn::GetAtt":["Vpc2VpcEndpoint2SecurityGroup04C0C724","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["TestFunction1SecurityGroup263EDDE5","GroupId"]},"toPort":443}}}}},"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Vpc2/VpcEndpoint2/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"ApiGatewayVpcEndpointTestStack/Vpc2"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["Vpc2VpcEndpoint2SecurityGroup04C0C724","GroupId"]}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".execute-api"]]},"subnetIds":[{"Ref":"Vpc2IsolatedSubnet1SubnetB1A200D6"},{"Ref":"Vpc2IsolatedSubnet2SubnetAC9D1056"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"Vpc299FDBC5F"}}}}}}}},"Api":{"id":"Api","path":"ApiGatewayVpcEndpointTestStack/Api","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"0.0.0","metadata":[{"cloudWatchRole":true,"endpointConfiguration":{"types":["*"],"vpcEndpoints":["*","*"]}},{"addToResourcePolicy":[{}]},{"addToResourcePolicy":[{}]}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Api/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"endpointConfiguration":{"types":["PRIVATE"],"vpcEndpointIds":[{"Ref":"Vpc1VpcEndpoint1A8BD3278"},{"Ref":"Vpc2VpcEndpoint2898EEC0D"}]},"name":"Api","policy":{"Statement":[{"Action":"execute-api:Invoke","Condition":{"StringNotEquals":{"aws:SourceVpce":[{"Ref":"Vpc1VpcEndpoint1A8BD3278"},{"Ref":"Vpc2VpcEndpoint2898EEC0D"}]}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":"execute-api:/*"},{"Action":"execute-api:Invoke","Effect":"Allow","Principal":{"AWS":"*"},"Resource":"execute-api:/*"}],"Version":"2012-10-17"}}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"ApiGatewayVpcEndpointTestStack/Api/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"applyRemovalPolicy":["retain"]}]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"ApiGatewayVpcEndpointTestStack/Api/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Api/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"ApiGatewayVpcEndpointTestStack/Api/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ApiCloudWatchRole73EC6FC4","Arn"]}}}},"Deployment":{"id":"Deployment","path":"ApiGatewayVpcEndpointTestStack/Api/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"0.0.0","metadata":[{"description":"*","api":"*","retainDeployments":"*"},{"addToLogicalId":[{}]}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Api/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"ApiF70053CD"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ApiGatewayVpcEndpointTestStack/Api/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"0.0.0","metadata":[{"deployment":"*"}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Api/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ApiDeploymentB17BE62Def36cddc56e5dfb256d1d22dd6294755"},"restApiId":{"Ref":"ApiF70053CD"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"ApiGatewayVpcEndpointTestStack/Api/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}},"Default":{"id":"Default","path":"ApiGatewayVpcEndpointTestStack/Api/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"0.0.0","metadata":["*"]},"children":{"GET":{"id":"GET","path":"ApiGatewayVpcEndpointTestStack/Api/Default/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"0.0.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"methodResponses":[{"statusCode":"*"}]}},{"addMethodResponse":[{"statusCode":"*"}]}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/Api/Default/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"MOCK","requestTemplates":{"application/json":"{\"statusCode\":200}"},"integrationResponses":[{"statusCode":"200","responseTemplates":{"application/json":"{\"message\":\"OK\"}"}}]},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Fn::GetAtt":["ApiF70053CD","RootResourceId"]},"restApiId":{"Ref":"ApiF70053CD"}}}}}}}}}},"TestFunction0":{"id":"TestFunction0","path":"ApiGatewayVpcEndpointTestStack/TestFunction0","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"0.0.0","metadata":[{"runtime":"*","handler":"*","code":"*","vpc":"*","environment":"*"},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiGatewayVpcEndpointTestStack/TestFunction0/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"},{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiGatewayVpcEndpointTestStack/TestFunction0/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/TestFunction0/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiGatewayVpcEndpointTestStack/TestFunction0/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/TestFunction0/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"execute-api:Invoke","Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"ApiF70053CD"},"/*/*/*"]]}}],"Version":"2012-10-17"},"policyName":"TestFunction0ServiceRoleDefaultPolicy02794024","roles":[{"Ref":"TestFunction0ServiceRoleD0765191"}]}}}}}}},"SecurityGroup":{"id":"SecurityGroup","path":"ApiGatewayVpcEndpointTestStack/TestFunction0/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"0.0.0","metadata":[{"vpc":"*","description":"*","allowAllOutbound":"*","allowAllIpv6Outbound":"*"},{"addEgressRule":["*",{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/TestFunction0/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function ApiGatewayVpcEndpointTestStackTestFunction0F898900F","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"Vpc1C211860B"}}}}}},"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/TestFunction0/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n          const https = require('https');\n  \n          const httpsGet = (url) => {\n            return new Promise((resolve, reject) => {\n              https.get(url, (res) => {\n                let data = '';\n  \n                res.on('data', (chunk) => {\n                  data += chunk;\n                });\n  \n                res.on('end', () => {\n                  resolve(data);\n                });\n  \n                res.on('error', (e) => {\n                  reject(e);\n                });\n              });\n            });\n          };\n  \n          exports.handler = async function(event) {\n            const apiEndpoint = process.env.API_ENDPOINT;\n  \n            try {\n              const data = await httpsGet(apiEndpoint);\n              return {\n                statusCode: 200,\n                body: JSON.stringify({ message: 'Success', data }),\n              };\n            } catch (error) {\n              return {\n                statusCode: 500,\n                body: JSON.stringify({ message: 'Error', error: error.message }),\n              };\n            }\n          };\n        "},"environment":{"variables":{"API_ENDPOINT":{"Fn::Join":["",["https://",{"Ref":"ApiF70053CD"},".execute-api.",{"Ref":"AWS::Region"},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"ApiDeploymentStageprod3EB9684E"},"/"]]}}},"handler":"index.handler","role":{"Fn::GetAtt":["TestFunction0ServiceRoleD0765191","Arn"]},"runtime":"nodejs20.x","vpcConfig":{"subnetIds":[{"Ref":"Vpc1IsolatedSubnet1Subnet41898916"},{"Ref":"Vpc1IsolatedSubnet2SubnetE973B126"}],"securityGroupIds":[{"Fn::GetAtt":["TestFunction0SecurityGroup749DC118","GroupId"]}]}}}}}},"TestFunction1":{"id":"TestFunction1","path":"ApiGatewayVpcEndpointTestStack/TestFunction1","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"0.0.0","metadata":[{"runtime":"*","handler":"*","code":"*","vpc":"*","environment":"*"},{"addEnvironment":["*","*"]}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiGatewayVpcEndpointTestStack/TestFunction1/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"},{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiGatewayVpcEndpointTestStack/TestFunction1/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/TestFunction1/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiGatewayVpcEndpointTestStack/TestFunction1/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/TestFunction1/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"execute-api:Invoke","Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"ApiF70053CD"},"/*/*/*"]]}}],"Version":"2012-10-17"},"policyName":"TestFunction1ServiceRoleDefaultPolicyEA6A8ACA","roles":[{"Ref":"TestFunction1ServiceRoleFF9BD7F5"}]}}}}}}},"SecurityGroup":{"id":"SecurityGroup","path":"ApiGatewayVpcEndpointTestStack/TestFunction1/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"0.0.0","metadata":[{"vpc":"*","description":"*","allowAllOutbound":"*","allowAllIpv6Outbound":"*"},{"addEgressRule":["*",{},"*",false]}]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/TestFunction1/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function ApiGatewayVpcEndpointTestStackTestFunction114C6E106","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"Vpc299FDBC5F"}}}}}},"Resource":{"id":"Resource","path":"ApiGatewayVpcEndpointTestStack/TestFunction1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n          const https = require('https');\n  \n          const httpsGet = (url) => {\n            return new Promise((resolve, reject) => {\n              https.get(url, (res) => {\n                let data = '';\n  \n                res.on('data', (chunk) => {\n                  data += chunk;\n                });\n  \n                res.on('end', () => {\n                  resolve(data);\n                });\n  \n                res.on('error', (e) => {\n                  reject(e);\n                });\n              });\n            });\n          };\n  \n          exports.handler = async function(event) {\n            const apiEndpoint = process.env.API_ENDPOINT;\n  \n            try {\n              const data = await httpsGet(apiEndpoint);\n              return {\n                statusCode: 200,\n                body: JSON.stringify({ message: 'Success', data }),\n              };\n            } catch (error) {\n              return {\n                statusCode: 500,\n                body: JSON.stringify({ message: 'Error', error: error.message }),\n              };\n            }\n          };\n        "},"environment":{"variables":{"API_ENDPOINT":{"Fn::Join":["",["https://",{"Ref":"ApiF70053CD"},".execute-api.",{"Ref":"AWS::Region"},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"ApiDeploymentStageprod3EB9684E"},"/"]]}}},"handler":"index.handler","role":{"Fn::GetAtt":["TestFunction1ServiceRoleFF9BD7F5","Arn"]},"runtime":"nodejs20.x","vpcConfig":{"subnetIds":[{"Ref":"Vpc2IsolatedSubnet1SubnetB1A200D6"},{"Ref":"Vpc2IsolatedSubnet2SubnetAC9D1056"}],"securityGroupIds":[{"Fn::GetAtt":["TestFunction1SecurityGroup263EDDE5","GroupId"]}]}}}}}},"Exports":{"id":"Exports","path":"ApiGatewayVpcEndpointTestStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"TestFunction05BE16519\"}":{"id":"Output{\"Ref\":\"TestFunction05BE16519\"}","path":"ApiGatewayVpcEndpointTestStack/Exports/Output{\"Ref\":\"TestFunction05BE16519\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}},"Output{\"Fn::GetAtt\":[\"TestFunction05BE16519\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"TestFunction05BE16519\",\"Arn\"]}","path":"ApiGatewayVpcEndpointTestStack/Exports/Output{\"Fn::GetAtt\":[\"TestFunction05BE16519\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}},"Output{\"Fn::GetAtt\":[\"TestFunction11C5DC9A0\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"TestFunction11C5DC9A0\",\"Arn\"]}","path":"ApiGatewayVpcEndpointTestStack/Exports/Output{\"Fn::GetAtt\":[\"TestFunction11C5DC9A0\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}},"Output{\"Ref\":\"TestFunction11C5DC9A0\"}":{"id":"Output{\"Ref\":\"TestFunction11C5DC9A0\"}","path":"ApiGatewayVpcEndpointTestStack/Exports/Output{\"Ref\":\"TestFunction11C5DC9A0\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiGatewayVpcEndpointTestStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiGatewayVpcEndpointTestStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}},"ApiGatewayVpcEndpointInteg":{"id":"ApiGatewayVpcEndpointInteg","path":"ApiGatewayVpcEndpointInteg","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"ApiGatewayVpcEndpointInteg/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"},"children":{"Default":{"id":"Default","path":"ApiGatewayVpcEndpointInteg/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"AwsApiCallLambdainvokeff16ee71a7cd1301bc4536b14e724d50":{"id":"AwsApiCallLambdainvokeff16ee71a7cd1301bc4536b14e724d50","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvokeff16ee71a7cd1301bc4536b14e724d50","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AwsApiCall","version":"0.0.0"},"children":{"SdkProvider":{"id":"SdkProvider","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvokeff16ee71a7cd1301bc4536b14e724d50/SdkProvider","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AssertionsProvider","version":"0.0.0"},"children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvokeff16ee71a7cd1301bc4536b14e724d50/SdkProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"Default":{"id":"Default","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvokeff16ee71a7cd1301bc4536b14e724d50/Default","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"0.0.0","metadata":["*","*","*"]},"children":{"Default":{"id":"Default","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvokeff16ee71a7cd1301bc4536b14e724d50/Default/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}}}},"AssertionResults":{"id":"AssertionResults","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvokeff16ee71a7cd1301bc4536b14e724d50/AssertionResults","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}}}},"SingletonFunction1488541a7b23466481b69b4408076b81":{"id":"SingletonFunction1488541a7b23466481b69b4408076b81","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Staging":{"id":"Staging","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"0.0.0"}},"Role":{"id":"Role","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}},"Handler":{"id":"Handler","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}}}},"LatestNodeRuntimeMap":{"id":"LatestNodeRuntimeMap","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/LatestNodeRuntimeMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"0.0.0"}},"AwsApiCallLambdainvoke1ab39d60d4268e4352842dacf126dcd5":{"id":"AwsApiCallLambdainvoke1ab39d60d4268e4352842dacf126dcd5","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvoke1ab39d60d4268e4352842dacf126dcd5","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AwsApiCall","version":"0.0.0"},"children":{"SdkProvider":{"id":"SdkProvider","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvoke1ab39d60d4268e4352842dacf126dcd5/SdkProvider","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AssertionsProvider","version":"0.0.0"},"children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvoke1ab39d60d4268e4352842dacf126dcd5/SdkProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"Default":{"id":"Default","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvoke1ab39d60d4268e4352842dacf126dcd5/Default","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"0.0.0","metadata":["*","*","*"]},"children":{"Default":{"id":"Default","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvoke1ab39d60d4268e4352842dacf126dcd5/Default/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}}}},"AssertionResults":{"id":"AssertionResults","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/AwsApiCallLambdainvoke1ab39d60d4268e4352842dacf126dcd5/AssertionResults","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiGatewayVpcEndpointInteg/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}