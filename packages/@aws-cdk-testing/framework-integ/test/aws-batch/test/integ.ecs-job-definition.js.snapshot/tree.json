{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"stack":{"id":"stack","path":"stack","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"vpc":{"id":"vpc","path":"stack/vpc","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"stack/vpc/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"stack/vpc"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"stack/vpc/PublicSubnet1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*"]},"children":{"Subnet":{"id":"Subnet","path":"stack/vpc/PublicSubnet1/Subnet","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"stack/vpc/PublicSubnet1"}],"vpcId":{"Ref":"vpcA2121C38"}}}},"Acl":{"id":"Acl","path":"stack/vpc/PublicSubnet1/Acl","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"stack/vpc/PublicSubnet1/RouteTable","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"stack/vpc/PublicSubnet1"}],"vpcId":{"Ref":"vpcA2121C38"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"stack/vpc/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"vpcPublicSubnet1RouteTable48A2DF9B"},"subnetId":{"Ref":"vpcPublicSubnet1Subnet2E65531E"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"stack/vpc/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"vpcIGWE57CBDCA"},"routeTableId":{"Ref":"vpcPublicSubnet1RouteTable48A2DF9B"}}}},"EIP":{"id":"EIP","path":"stack/vpc/PublicSubnet1/EIP","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"stack/vpc/PublicSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"stack/vpc/PublicSubnet1/NATGateway","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["vpcPublicSubnet1EIPDA49DCBE","AllocationId"]},"subnetId":{"Ref":"vpcPublicSubnet1Subnet2E65531E"},"tags":[{"key":"Name","value":"stack/vpc/PublicSubnet1"}]}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"stack/vpc/PublicSubnet2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*"]},"children":{"Subnet":{"id":"Subnet","path":"stack/vpc/PublicSubnet2/Subnet","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.64.0/18","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"stack/vpc/PublicSubnet2"}],"vpcId":{"Ref":"vpcA2121C38"}}}},"Acl":{"id":"Acl","path":"stack/vpc/PublicSubnet2/Acl","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"stack/vpc/PublicSubnet2/RouteTable","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"stack/vpc/PublicSubnet2"}],"vpcId":{"Ref":"vpcA2121C38"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"stack/vpc/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"vpcPublicSubnet2RouteTableEB40D4CB"},"subnetId":{"Ref":"vpcPublicSubnet2Subnet009B674F"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"stack/vpc/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"vpcIGWE57CBDCA"},"routeTableId":{"Ref":"vpcPublicSubnet2RouteTableEB40D4CB"}}}},"EIP":{"id":"EIP","path":"stack/vpc/PublicSubnet2/EIP","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"stack/vpc/PublicSubnet2"}]}}},"NATGateway":{"id":"NATGateway","path":"stack/vpc/PublicSubnet2/NATGateway","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["vpcPublicSubnet2EIP9B3743B1","AllocationId"]},"subnetId":{"Ref":"vpcPublicSubnet2Subnet009B674F"},"tags":[{"key":"Name","value":"stack/vpc/PublicSubnet2"}]}}}}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"stack/vpc/PrivateSubnet1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*"]},"children":{"Subnet":{"id":"Subnet","path":"stack/vpc/PrivateSubnet1/Subnet","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.128.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"stack/vpc/PrivateSubnet1"}],"vpcId":{"Ref":"vpcA2121C38"}}}},"Acl":{"id":"Acl","path":"stack/vpc/PrivateSubnet1/Acl","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"stack/vpc/PrivateSubnet1/RouteTable","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"stack/vpc/PrivateSubnet1"}],"vpcId":{"Ref":"vpcA2121C38"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"stack/vpc/PrivateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"vpcPrivateSubnet1RouteTableB41A48CC"},"subnetId":{"Ref":"vpcPrivateSubnet1Subnet934893E8"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"stack/vpc/PrivateSubnet1/DefaultRoute","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"vpcPublicSubnet1NATGateway9C16659E"},"routeTableId":{"Ref":"vpcPrivateSubnet1RouteTableB41A48CC"}}}}}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"stack/vpc/PrivateSubnet2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*"]},"children":{"Subnet":{"id":"Subnet","path":"stack/vpc/PrivateSubnet2/Subnet","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[1,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.192.0/18","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"stack/vpc/PrivateSubnet2"}],"vpcId":{"Ref":"vpcA2121C38"}}}},"Acl":{"id":"Acl","path":"stack/vpc/PrivateSubnet2/Acl","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"stack/vpc/PrivateSubnet2/RouteTable","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"stack/vpc/PrivateSubnet2"}],"vpcId":{"Ref":"vpcA2121C38"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"stack/vpc/PrivateSubnet2/RouteTableAssociation","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"vpcPrivateSubnet2RouteTable7280F23E"},"subnetId":{"Ref":"vpcPrivateSubnet2Subnet7031C2BA"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"stack/vpc/PrivateSubnet2/DefaultRoute","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"vpcPublicSubnet2NATGateway9B8AE11A"},"routeTableId":{"Ref":"vpcPrivateSubnet2RouteTable7280F23E"}}}}}},"IGW":{"id":"IGW","path":"stack/vpc/IGW","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"stack/vpc"}]}}},"VPCGW":{"id":"VPCGW","path":"stack/vpc/VPCGW","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"vpcIGWE57CBDCA"},"vpcId":{"Ref":"vpcA2121C38"}}}}}},"myFileSystem":{"id":"myFileSystem","path":"stack/myFileSystem","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"stack/myFileSystem/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::FileSystem","aws:cdk:cloudformation:props":{"encrypted":true,"fileSystemPolicy":{"Statement":[{"Action":["elasticfilesystem:ClientRootAccess","elasticfilesystem:ClientWrite"],"Condition":{"Bool":{"elasticfilesystem:AccessedViaMountTarget":"true"}},"Effect":"Allow","Principal":{"AWS":"*"}}],"Version":"2012-10-17"},"fileSystemTags":[{"key":"Name","value":"stack/myFileSystem"}]}}},"EfsSecurityGroup":{"id":"EfsSecurityGroup","path":"stack/myFileSystem/EfsSecurityGroup","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"stack/myFileSystem/EfsSecurityGroup/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"stack/myFileSystem/EfsSecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Name","value":"stack/myFileSystem"}],"vpcId":{"Ref":"vpcA2121C38"}}}}}},"EfsMountTarget-PrivateSubnet1":{"id":"EfsMountTarget-PrivateSubnet1","path":"stack/myFileSystem/EfsMountTarget-PrivateSubnet1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::MountTarget","aws:cdk:cloudformation:props":{"fileSystemId":{"Ref":"myFileSystem1DAA6862"},"securityGroups":[{"Fn::GetAtt":["myFileSystemEfsSecurityGroup5809542D","GroupId"]}],"subnetId":{"Ref":"vpcPrivateSubnet1Subnet934893E8"}}}},"EfsMountTarget-PrivateSubnet2":{"id":"EfsMountTarget-PrivateSubnet2","path":"stack/myFileSystem/EfsMountTarget-PrivateSubnet2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::MountTarget","aws:cdk:cloudformation:props":{"fileSystemId":{"Ref":"myFileSystem1DAA6862"},"securityGroups":[{"Fn::GetAtt":["myFileSystemEfsSecurityGroup5809542D","GroupId"]}],"subnetId":{"Ref":"vpcPrivateSubnet2Subnet7031C2BA"}}}}}},"mySecret":{"id":"mySecret","path":"stack/mySecret","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"stack/mySecret/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{}}}}}},"anotherSecret":{"id":"anotherSecret","path":"stack/anotherSecret","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"stack/anotherSecret/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{}}}}}},"ssm":{"id":"ssm","path":"stack/ssm","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"stack/ssm/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"type":"String","value":"myString"}}}}},"myContainer":{"id":"myContainer","path":"stack/myContainer","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"ExecutionRole":{"id":"ExecutionRole","path":"stack/myContainer/ExecutionRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*","*"]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"stack/myContainer/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]}},"Resource":{"id":"Resource","path":"stack/myContainer/ExecutionRole/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"stack/myContainer/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"stack/myContainer/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/batch/job:*"]]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":[{"Ref":"anotherSecret11974229"},{"Ref":"mySecretE4D0A59C"}]},{"Action":["ssm:DescribeParameters","ssm:GetParameter","ssm:GetParameterHistory","ssm:GetParameters"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":ssm:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":parameter/",{"Ref":"ssm85049941"}]]}}],"Version":"2012-10-17"},"policyName":"myContainerExecutionRoleDefaultPolicy42DA929E","roles":[{"Ref":"myContainerExecutionRoleEBACF86C"}]}}}}}}},"batchDefaultLogGroup":{"id":"batchDefaultLogGroup","path":"stack/myContainer/batchDefaultLogGroup","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":[]}}}},"ECSJobDefn":{"id":"ECSJobDefn","path":"stack/ECSJobDefn","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"stack/ECSJobDefn/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Batch::JobDefinition","aws:cdk:cloudformation:props":{"containerProperties":{"image":"amazon/amazon-ecs-sample","environment":[{"name":"foo","value":"bar"}],"executionRoleArn":{"Fn::GetAtt":["myContainerExecutionRoleEBACF86C","Arn"]},"readonlyRootFilesystem":false,"resourceRequirements":[{"type":"MEMORY","value":"2048"},{"type":"VCPU","value":"256"},{"type":"GPU","value":"12"}],"secrets":[{"name":"MY_SECRET_ENV_VAR","valueFrom":{"Ref":"mySecretE4D0A59C"}},{"name":"ANOTHER_ONE","valueFrom":{"Fn::Join":["",[{"Ref":"anotherSecret11974229"},"::bar:foo"]]}},{"name":"SSM_TIME","valueFrom":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":ssm:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":parameter/",{"Ref":"ssm85049941"}]]}}],"mountPoints":[{"containerPath":"ahhh","sourceVolume":"volumeName"},{"containerPath":"/my/path","sourceVolume":"efsVolume"}],"volumes":[{"name":"volumeName","host":{"sourcePath":"/foo/bar"}},{"name":"efsVolume","efsVolumeConfiguration":{"fileSystemId":{"Ref":"myFileSystem1DAA6862"}}}],"ulimits":[{"hardLimit":50,"name":"core","softLimit":10}]},"platformCapabilities":["EC2"],"resourceRetentionPolicy":{"skipDeregisterOnUpdate":true},"retryStrategy":{},"timeout":{},"type":"container"}}}}},"myFargateContainer":{"id":"myFargateContainer","path":"stack/myFargateContainer","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"ExecutionRole":{"id":"ExecutionRole","path":"stack/myFargateContainer/ExecutionRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*"]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"stack/myFargateContainer/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]}},"Resource":{"id":"Resource","path":"stack/myFargateContainer/ExecutionRole/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"stack/myFargateContainer/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"stack/myFargateContainer/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/batch/job:*"]]}}],"Version":"2012-10-17"},"policyName":"myFargateContainerExecutionRoleDefaultPolicy4FF431BF","roles":[{"Ref":"myFargateContainerExecutionRoleB9EB79EA"}]}}}}}}},"batchDefaultLogGroup":{"id":"batchDefaultLogGroup","path":"stack/myFargateContainer/batchDefaultLogGroup","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":[]}}}},"ECSFargateJobDefn":{"id":"ECSFargateJobDefn","path":"stack/ECSFargateJobDefn","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"stack/ECSFargateJobDefn/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Batch::JobDefinition","aws:cdk:cloudformation:props":{"containerProperties":{"image":"amazon/amazon-ecs-sample","environment":[],"executionRoleArn":{"Fn::GetAtt":["myFargateContainerExecutionRoleB9EB79EA","Arn"]},"readonlyRootFilesystem":false,"resourceRequirements":[{"type":"MEMORY","value":"32768"},{"type":"VCPU","value":"16"}],"ephemeralStorage":{"sizeInGiB":100},"fargatePlatformConfiguration":{"platformVersion":"LATEST"},"networkConfiguration":{"assignPublicIp":"DISABLED"},"runtimePlatform":{"cpuArchitecture":"ARM64","operatingSystemFamily":"LINUX"}},"jobDefinitionName":"foofoo","parameters":{"foo":"bar"},"platformCapabilities":["FARGATE"],"propagateTags":true,"resourceRetentionPolicy":{"skipDeregisterOnUpdate":true},"retryStrategy":{"attempts":5,"evaluateOnExit":[{"action":"EXIT","onReason":"CannotPullContainerError:*"},{"action":"RETRY","onExitCode":"*"},{"action":"EXIT","onExitCode":"40*","onReason":"reason","onStatusReason":"statusreason"}]},"schedulingPriority":10,"timeout":{"attemptDurationSeconds":600},"type":"container"}}}}},"dockerImageAsset":{"id":"dockerImageAsset","path":"stack/dockerImageAsset","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Staging":{"id":"Staging","path":"stack/dockerImageAsset/Staging","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Repository":{"id":"Repository","path":"stack/dockerImageAsset/Repository","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":[]}}}},"EcsDockerContainer":{"id":"EcsDockerContainer","path":"stack/EcsDockerContainer","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"ExecutionRole":{"id":"ExecutionRole","path":"stack/EcsDockerContainer/ExecutionRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*"]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"stack/EcsDockerContainer/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]}},"Resource":{"id":"Resource","path":"stack/EcsDockerContainer/ExecutionRole/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"stack/EcsDockerContainer/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"stack/EcsDockerContainer/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/batch/job:*"]]}},{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":ecr:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":repository/",{"Fn::Sub":"cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}"}]]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"EcsDockerContainerExecutionRoleDefaultPolicyF58C2301","roles":[{"Ref":"EcsDockerContainerExecutionRole7AA53A24"}]}}}}}}},"batchDefaultLogGroup":{"id":"batchDefaultLogGroup","path":"stack/EcsDockerContainer/batchDefaultLogGroup","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":[]}}}},"ECSDockerJobDefn":{"id":"ECSDockerJobDefn","path":"stack/ECSDockerJobDefn","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"stack/ECSDockerJobDefn/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Batch::JobDefinition","aws:cdk:cloudformation:props":{"containerProperties":{"image":{"Fn::Sub":"${AWS::AccountId}.dkr.ecr.${AWS::Region}.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}:8b518243ecbfcfd08b4734069e7e74ff97b7889dfde0a60d16e7bdc96e6c593b"},"environment":[],"executionRoleArn":{"Fn::GetAtt":["EcsDockerContainerExecutionRole7AA53A24","Arn"]},"readonlyRootFilesystem":false,"resourceRequirements":[{"type":"MEMORY","value":"32768"},{"type":"VCPU","value":"16"}]},"platformCapabilities":["EC2"],"resourceRetentionPolicy":{"skipDeregisterOnUpdate":true},"retryStrategy":{},"timeout":{},"type":"container"}}}}},"WindowsFargateContainer":{"id":"WindowsFargateContainer","path":"stack/WindowsFargateContainer","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"ExecutionRole":{"id":"ExecutionRole","path":"stack/WindowsFargateContainer/ExecutionRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*"]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"stack/WindowsFargateContainer/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]}},"Resource":{"id":"Resource","path":"stack/WindowsFargateContainer/ExecutionRole/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"stack/WindowsFargateContainer/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"stack/WindowsFargateContainer/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/batch/job:*"]]}}],"Version":"2012-10-17"},"policyName":"WindowsFargateContainerExecutionRoleDefaultPolicyA16F3283","roles":[{"Ref":"WindowsFargateContainerExecutionRoleAE15A6C1"}]}}}}}}},"batchDefaultLogGroup":{"id":"batchDefaultLogGroup","path":"stack/WindowsFargateContainer/batchDefaultLogGroup","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":[]}}}},"WindowsJobDefinitio":{"id":"WindowsJobDefinitio","path":"stack/WindowsJobDefinitio","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"stack/WindowsJobDefinitio/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Batch::JobDefinition","aws:cdk:cloudformation:props":{"containerProperties":{"image":"mcr.microsoft.com/dotnet/framework/runtime:4.7.2","environment":[],"executionRoleArn":{"Fn::GetAtt":["WindowsFargateContainerExecutionRoleAE15A6C1","Arn"]},"resourceRequirements":[{"type":"MEMORY","value":"8192"},{"type":"VCPU","value":"2"}],"fargatePlatformConfiguration":{},"networkConfiguration":{"assignPublicIp":"DISABLED"},"runtimePlatform":{"cpuArchitecture":"X86_64","operatingSystemFamily":"WINDOWS_SERVER_2019_FULL"}},"jobDefinitionName":"windows-job-definition","platformCapabilities":["FARGATE"],"resourceRetentionPolicy":{"skipDeregisterOnUpdate":true},"retryStrategy":{},"timeout":{},"type":"container"}}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"stack/BootstrapVersion","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"stack/CheckBootstrapVersion","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"BatchEcsJobDefinitionTest":{"id":"BatchEcsJobDefinitionTest","path":"BatchEcsJobDefinitionTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"BatchEcsJobDefinitionTest/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"},"children":{"Default":{"id":"Default","path":"BatchEcsJobDefinitionTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"BatchEcsJobDefinitionTest/DefaultTest/DeployAssert","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"BatchEcsJobDefinitionTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BatchEcsJobDefinitionTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}