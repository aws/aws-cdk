"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_ec2_1 = require("aws-cdk-lib/aws-ec2");
const aws_cdk_lib_1 = require("aws-cdk-lib");
const aws_fsx_1 = require("aws-cdk-lib/aws-fsx");
const app = new aws_cdk_lib_1.App();
const stack = new aws_cdk_lib_1.Stack(app, 'AwsCdkFsxLustre');
const vpc = new aws_ec2_1.Vpc(stack, 'VPC');
const storageCapacity = 1200;
const lustreConfiguration = {
    deploymentType: aws_fsx_1.LustreDeploymentType.SCRATCH_2,
    dataCompressionType: aws_fsx_1.LustreDataCompressionType.LZ4,
};
const fs = new aws_fsx_1.LustreFileSystem(stack, 'FsxLustreFileSystem', {
    lustreConfiguration,
    storageCapacityGiB: storageCapacity,
    vpc,
    vpcSubnet: vpc.privateSubnets[0],
    removalPolicy: aws_cdk_lib_1.RemovalPolicy.DESTROY,
});
const inst = new aws_ec2_1.Instance(stack, 'inst', {
    instanceType: aws_ec2_1.InstanceType.of(aws_ec2_1.InstanceClass.T2, aws_ec2_1.InstanceSize.LARGE),
    machineImage: new aws_ec2_1.AmazonLinuxImage({
        generation: aws_ec2_1.AmazonLinuxGeneration.AMAZON_LINUX_2,
    }),
    vpc,
    vpcSubnets: {
        subnetType: aws_ec2_1.SubnetType.PUBLIC,
    },
});
fs.connections.allowDefaultPortFrom(inst);
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZWcubHVzdHJlLWZpbGUtc3lzdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaW50ZWcubHVzdHJlLWZpbGUtc3lzdGVtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQW9KO0FBQ3BKLDZDQUF3RDtBQUN4RCxpREFBd0c7QUFFeEcsTUFBTSxHQUFHLEdBQUcsSUFBSSxpQkFBRyxFQUFFLENBQUM7QUFFdEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxtQkFBSyxDQUFDLEdBQUcsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBRWhELE1BQU0sR0FBRyxHQUFHLElBQUksYUFBRyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztBQUVsQyxNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUM7QUFDN0IsTUFBTSxtQkFBbUIsR0FBRztJQUMxQixjQUFjLEVBQUUsOEJBQW9CLENBQUMsU0FBUztJQUM5QyxtQkFBbUIsRUFBRSxtQ0FBeUIsQ0FBQyxHQUFHO0NBQ25ELENBQUM7QUFDRixNQUFNLEVBQUUsR0FBRyxJQUFJLDBCQUFnQixDQUFDLEtBQUssRUFBRSxxQkFBcUIsRUFBRTtJQUM1RCxtQkFBbUI7SUFDbkIsa0JBQWtCLEVBQUUsZUFBZTtJQUNuQyxHQUFHO0lBQ0gsU0FBUyxFQUFFLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLGFBQWEsRUFBRSwyQkFBYSxDQUFDLE9BQU87Q0FDckMsQ0FBQyxDQUFDO0FBRUgsTUFBTSxJQUFJLEdBQUcsSUFBSSxrQkFBUSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUU7SUFDdkMsWUFBWSxFQUFFLHNCQUFZLENBQUMsRUFBRSxDQUFDLHVCQUFhLENBQUMsRUFBRSxFQUFFLHNCQUFZLENBQUMsS0FBSyxDQUFDO0lBQ25FLFlBQVksRUFBRSxJQUFJLDBCQUFnQixDQUFDO1FBQ2pDLFVBQVUsRUFBRSwrQkFBcUIsQ0FBQyxjQUFjO0tBQ2pELENBQUM7SUFDRixHQUFHO0lBQ0gsVUFBVSxFQUFFO1FBQ1YsVUFBVSxFQUFFLG9CQUFVLENBQUMsTUFBTTtLQUM5QjtDQUNGLENBQUMsQ0FBQztBQUNILEVBQUUsQ0FBQyxXQUFXLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLENBQUM7QUFFMUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQW1hem9uTGludXhHZW5lcmF0aW9uLCBBbWF6b25MaW51eEltYWdlLCBJbnN0YW5jZSwgSW5zdGFuY2VDbGFzcywgSW5zdGFuY2VTaXplLCBJbnN0YW5jZVR5cGUsIFN1Ym5ldFR5cGUsIFZwYyB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1lYzInO1xuaW1wb3J0IHsgQXBwLCBSZW1vdmFsUG9saWN5LCBTdGFjayB9IGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCB7IEx1c3RyZURlcGxveW1lbnRUeXBlLCBMdXN0cmVGaWxlU3lzdGVtLCBMdXN0cmVEYXRhQ29tcHJlc3Npb25UeXBlIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWZzeCc7XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcblxuY29uc3Qgc3RhY2sgPSBuZXcgU3RhY2soYXBwLCAnQXdzQ2RrRnN4THVzdHJlJyk7XG5cbmNvbnN0IHZwYyA9IG5ldyBWcGMoc3RhY2ssICdWUEMnKTtcblxuY29uc3Qgc3RvcmFnZUNhcGFjaXR5ID0gMTIwMDtcbmNvbnN0IGx1c3RyZUNvbmZpZ3VyYXRpb24gPSB7XG4gIGRlcGxveW1lbnRUeXBlOiBMdXN0cmVEZXBsb3ltZW50VHlwZS5TQ1JBVENIXzIsXG4gIGRhdGFDb21wcmVzc2lvblR5cGU6IEx1c3RyZURhdGFDb21wcmVzc2lvblR5cGUuTFo0LFxufTtcbmNvbnN0IGZzID0gbmV3IEx1c3RyZUZpbGVTeXN0ZW0oc3RhY2ssICdGc3hMdXN0cmVGaWxlU3lzdGVtJywge1xuICBsdXN0cmVDb25maWd1cmF0aW9uLFxuICBzdG9yYWdlQ2FwYWNpdHlHaUI6IHN0b3JhZ2VDYXBhY2l0eSxcbiAgdnBjLFxuICB2cGNTdWJuZXQ6IHZwYy5wcml2YXRlU3VibmV0c1swXSxcbiAgcmVtb3ZhbFBvbGljeTogUmVtb3ZhbFBvbGljeS5ERVNUUk9ZLFxufSk7XG5cbmNvbnN0IGluc3QgPSBuZXcgSW5zdGFuY2Uoc3RhY2ssICdpbnN0Jywge1xuICBpbnN0YW5jZVR5cGU6IEluc3RhbmNlVHlwZS5vZihJbnN0YW5jZUNsYXNzLlQyLCBJbnN0YW5jZVNpemUuTEFSR0UpLFxuICBtYWNoaW5lSW1hZ2U6IG5ldyBBbWF6b25MaW51eEltYWdlKHtcbiAgICBnZW5lcmF0aW9uOiBBbWF6b25MaW51eEdlbmVyYXRpb24uQU1BWk9OX0xJTlVYXzIsXG4gIH0pLFxuICB2cGMsXG4gIHZwY1N1Ym5ldHM6IHtcbiAgICBzdWJuZXRUeXBlOiBTdWJuZXRUeXBlLlBVQkxJQyxcbiAgfSxcbn0pO1xuZnMuY29ubmVjdGlvbnMuYWxsb3dEZWZhdWx0UG9ydEZyb20oaW5zdCk7XG5cbmFwcC5zeW50aCgpO1xuIl19