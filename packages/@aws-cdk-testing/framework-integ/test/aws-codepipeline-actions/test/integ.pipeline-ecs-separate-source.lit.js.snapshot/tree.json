{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"},"children":{"aws-cdk-pipeline-ecs-separate-sources":{"id":"aws-cdk-pipeline-ecs-separate-sources","path":"aws-cdk-pipeline-ecs-separate-sources","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"EcsDeployRepository":{"id":"EcsDeployRepository","path":"aws-cdk-pipeline-ecs-separate-sources/EcsDeployRepository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/EcsDeployRepository/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{}}}}},"AppCodeDockerImageBuildAndPushProject":{"id":"AppCodeDockerImageBuildAndPushProject","path":"aws-cdk-pipeline-ecs-separate-sources/AppCodeDockerImageBuildAndPushProject","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"0.0.0"},"children":{"Role":{"id":"Role","path":"aws-cdk-pipeline-ecs-separate-sources/AppCodeDockerImageBuildAndPushProject/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/AppCodeDockerImageBuildAndPushProject/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-pipeline-ecs-separate-sources/AppCodeDockerImageBuildAndPushProject/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/AppCodeDockerImageBuildAndPushProject/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"AppCodeDockerImageBuildAndPushProject00DD6671"},":*"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"AppCodeDockerImageBuildAndPushProject00DD6671"}]]}]},{"Action":["codebuild:BatchPutCodeCoverages","codebuild:BatchPutTestCases","codebuild:CreateReport","codebuild:CreateReportGroup","codebuild:UpdateReport"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"AppCodeDockerImageBuildAndPushProject00DD6671"},"-*"]]}},{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:CompleteLayerUpload","ecr:GetDownloadUrlForLayer","ecr:InitiateLayerUpload","ecr:PutImage","ecr:UploadLayerPart"],"Effect":"Allow","Resource":{"Fn::GetAtt":["EcsDeployRepositoryE7A569C0","Arn"]}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AppCodeDockerImageBuildAndPushProjectRoleDefaultPolicyDDF56E3F","roles":[{"Ref":"AppCodeDockerImageBuildAndPushProjectRole991CF4D7"}]}}}}}}},"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/AppCodeDockerImageBuildAndPushProject/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":true,"computeType":"BUILD_GENERAL1_SMALL","environmentVariables":[{"name":"REPOSITORY_URI","type":"PLAINTEXT","value":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::GetAtt":["EcsDeployRepositoryE7A569C0","Arn"]}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::GetAtt":["EcsDeployRepositoryE7A569C0","Arn"]}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"EcsDeployRepositoryE7A569C0"}]]}}]},"serviceRole":{"Fn::GetAtt":["AppCodeDockerImageBuildAndPushProjectRole991CF4D7","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"build\": {\n      \"commands\": [\n        \"$(aws ecr get-login --region $AWS_DEFAULT_REGION --no-include-email)\",\n        \"docker build -t $REPOSITORY_URI:$CODEBUILD_RESOLVED_SOURCE_VERSION .\"\n      ]\n    },\n    \"post_build\": {\n      \"commands\": [\n        \"docker push $REPOSITORY_URI:$CODEBUILD_RESOLVED_SOURCE_VERSION\",\n        \"export imageTag=$CODEBUILD_RESOLVED_SOURCE_VERSION\"\n      ]\n    }\n  },\n  \"env\": {\n    \"exported-variables\": [\n      \"imageTag\"\n    ]\n  }\n}"}}}}}},"CdkCodeBuildProject":{"id":"CdkCodeBuildProject","path":"aws-cdk-pipeline-ecs-separate-sources/CdkCodeBuildProject","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"0.0.0"},"children":{"Role":{"id":"Role","path":"aws-cdk-pipeline-ecs-separate-sources/CdkCodeBuildProject/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CdkCodeBuildProject/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-pipeline-ecs-separate-sources/CdkCodeBuildProject/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CdkCodeBuildProject/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"CdkCodeBuildProject98C8CAB8"},":*"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"CdkCodeBuildProject98C8CAB8"}]]}]},{"Action":["codebuild:BatchPutCodeCoverages","codebuild:BatchPutTestCases","codebuild:CreateReport","codebuild:CreateReportGroup","codebuild:UpdateReport"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"CdkCodeBuildProject98C8CAB8"},"-*"]]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CdkCodeBuildProjectRoleDefaultPolicyA531D3BE","roles":[{"Ref":"CdkCodeBuildProjectRole6830A58A"}]}}}}}}},"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CdkCodeBuildProject/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["CdkCodeBuildProjectRole6830A58A","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"install\": {\n      \"commands\": [\n        \"npm install\"\n      ]\n    },\n    \"build\": {\n      \"commands\": [\n        \"npx cdk synth --verbose\"\n      ]\n    }\n  },\n  \"artifacts\": {\n    \"base-directory\": \"cdk.out\",\n    \"files\": \"**/*\"\n  }\n}"}}}}}},"ArtifactBucket":{"id":"ArtifactBucket","path":"aws-cdk-pipeline-ecs-separate-sources/ArtifactBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/ArtifactBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{}}}}},"AppCodeSourceRepository":{"id":"AppCodeSourceRepository","path":"aws-cdk-pipeline-ecs-separate-sources/AppCodeSourceRepository","constructInfo":{"fqn":"aws-cdk-lib.aws_codecommit.Repository","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/AppCodeSourceRepository/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codecommit.CfnRepository","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeCommit::Repository","aws:cdk:cloudformation:props":{"repositoryName":"AppCodeSourceRepository"}}},"awscdkpipelineecsseparatesourcesCodePipelineDeployingEcsApplicationF8E9E764EventRule":{"id":"awscdkpipelineecsseparatesourcesCodePipelineDeployingEcsApplicationF8E9E764EventRule","path":"aws-cdk-pipeline-ecs-separate-sources/AppCodeSourceRepository/awscdkpipelineecsseparatesourcesCodePipelineDeployingEcsApplicationF8E9E764EventRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/AppCodeSourceRepository/awscdkpipelineecsseparatesourcesCodePipelineDeployingEcsApplicationF8E9E764EventRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"eventPattern":{"source":["aws.codecommit"],"resources":[{"Fn::GetAtt":["AppCodeSourceRepository9F7363A1","Arn"]}],"detail-type":["CodeCommit Repository State Change"],"detail":{"event":["referenceCreated","referenceUpdated"],"referenceName":["main"]}},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codepipeline:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"CodePipelineDeployingEcsApplication81EB9383"}]]},"roleArn":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationEventsRoleEEEA39E5","Arn"]}}]}}}}}}},"CdkCodeSourceRepository":{"id":"CdkCodeSourceRepository","path":"aws-cdk-pipeline-ecs-separate-sources/CdkCodeSourceRepository","constructInfo":{"fqn":"aws-cdk-lib.aws_codecommit.Repository","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CdkCodeSourceRepository/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codecommit.CfnRepository","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeCommit::Repository","aws:cdk:cloudformation:props":{"repositoryName":"CdkCodeSourceRepository"}}},"awscdkpipelineecsseparatesourcesCodePipelineDeployingEcsApplicationF8E9E764EventRule":{"id":"awscdkpipelineecsseparatesourcesCodePipelineDeployingEcsApplicationF8E9E764EventRule","path":"aws-cdk-pipeline-ecs-separate-sources/CdkCodeSourceRepository/awscdkpipelineecsseparatesourcesCodePipelineDeployingEcsApplicationF8E9E764EventRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CdkCodeSourceRepository/awscdkpipelineecsseparatesourcesCodePipelineDeployingEcsApplicationF8E9E764EventRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"eventPattern":{"source":["aws.codecommit"],"resources":[{"Fn::GetAtt":["CdkCodeSourceRepositoryF10B9DC6","Arn"]}],"detail-type":["CodeCommit Repository State Change"],"detail":{"event":["referenceCreated","referenceUpdated"],"referenceName":["main"]}},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codepipeline:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"CodePipelineDeployingEcsApplication81EB9383"}]]},"roleArn":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationEventsRoleEEEA39E5","Arn"]}}]}}}}}}},"CodePipelineDeployingEcsApplication":{"id":"CodePipelineDeployingEcsApplication","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"0.0.0"},"children":{"Role":{"id":"Role","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},"/*"]]}]},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":[{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationBuildAppCodeDockerImageBuildAndPushCodePipelineActionRole9B025737","Arn"]},{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationBuildCdkCodeBuildAndSynthCodePipelineActionRole54094521","Arn"]},{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationDeployCFNDeployCodePipelineActionRoleC97FFCE2","Arn"]},{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationSourceAppCodeSourceCodePipelineActionRole6D88B36F","Arn"]},{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationSourceCdkCodeSourceCodePipelineActionRoleA1E3A5E9","Arn"]}]}],"Version":"2012-10-17"},"policyName":"CodePipelineDeployingEcsApplicationRoleDefaultPolicyDBDC1339","roles":[{"Ref":"CodePipelineDeployingEcsApplicationRole138CDC17"}]}}}}}}},"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"ArtifactBucket7410C9EF"}},"pipelineType":"V2","roleArn":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationRole138CDC17","Arn"]},"stages":[{"name":"Source","actions":[{"name":"AppCodeSource","outputArtifacts":[{"name":"Artifact_Source_AppCodeSource"}],"actionTypeId":{"category":"Source","version":"1","owner":"AWS","provider":"CodeCommit"},"configuration":{"RepositoryName":{"Fn::GetAtt":["AppCodeSourceRepository9F7363A1","Name"]},"BranchName":"main","PollForSourceChanges":false},"runOrder":1,"roleArn":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationSourceAppCodeSourceCodePipelineActionRole6D88B36F","Arn"]}},{"name":"CdkCodeSource","outputArtifacts":[{"name":"Artifact_Source_CdkCodeSource"}],"actionTypeId":{"category":"Source","version":"1","owner":"AWS","provider":"CodeCommit"},"configuration":{"RepositoryName":{"Fn::GetAtt":["CdkCodeSourceRepositoryF10B9DC6","Name"]},"BranchName":"main","PollForSourceChanges":false},"runOrder":1,"roleArn":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationSourceCdkCodeSourceCodePipelineActionRoleA1E3A5E9","Arn"]}}]},{"name":"Build","actions":[{"name":"AppCodeDockerImageBuildAndPush","inputArtifacts":[{"name":"Artifact_Source_AppCodeSource"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"AppCodeDockerImageBuildAndPushProject00DD6671"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationBuildAppCodeDockerImageBuildAndPushCodePipelineActionRole9B025737","Arn"]},"namespace":"Build_AppCodeDockerImageBuildAndPush_NS"},{"name":"CdkCodeBuildAndSynth","inputArtifacts":[{"name":"Artifact_Source_CdkCodeSource"}],"outputArtifacts":[{"name":"Artifact_Build_CdkCodeBuildAndSynth"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"CdkCodeBuildProject98C8CAB8"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationBuildCdkCodeBuildAndSynthCodePipelineActionRole54094521","Arn"]}}]},{"name":"Deploy","actions":[{"name":"CFN_Deploy","inputArtifacts":[{"name":"Artifact_Build_CdkCodeBuildAndSynth"}],"actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"SampleEcsStackDeployedFromCodePipeline","Capabilities":"CAPABILITY_NAMED_IAM","RoleArn":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationDeployCFNDeployRole71BFA647","Arn"]},"ParameterOverrides":"{\"TaskDefinitionAppContainerImageTagParam6DBCD720\":\"#{Build_AppCodeDockerImageBuildAndPush_NS.imageTag}\"}","ActionMode":"CREATE_UPDATE","TemplatePath":"Artifact_Build_CdkCodeBuildAndSynth::EcsStackDeployedInPipeline.template.json"},"runOrder":1,"roleArn":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationDeployCFNDeployCodePipelineActionRoleC97FFCE2","Arn"]}}]}]}}},"Source":{"id":"Source","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"AppCodeSource":{"id":"AppCodeSource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source/AppCodeSource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source/AppCodeSource/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source/AppCodeSource/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationRole138CDC17","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source/AppCodeSource/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source/AppCodeSource/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},"/*"]]}]},{"Action":["codecommit:CancelUploadArchive","codecommit:GetBranch","codecommit:GetCommit","codecommit:GetUploadArchiveStatus","codecommit:UploadArchive"],"Effect":"Allow","Resource":{"Fn::GetAtt":["AppCodeSourceRepository9F7363A1","Arn"]}}],"Version":"2012-10-17"},"policyName":"CodePipelineDeployingEcsApplicationSourceAppCodeSourceCodePipelineActionRoleDefaultPolicy9DFF92D6","roles":[{"Ref":"CodePipelineDeployingEcsApplicationSourceAppCodeSourceCodePipelineActionRole6D88B36F"}]}}}}}}}}},"CdkCodeSource":{"id":"CdkCodeSource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source/CdkCodeSource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source/CdkCodeSource/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source/CdkCodeSource/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationRole138CDC17","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source/CdkCodeSource/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Source/CdkCodeSource/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},"/*"]]}]},{"Action":["codecommit:CancelUploadArchive","codecommit:GetBranch","codecommit:GetCommit","codecommit:GetUploadArchiveStatus","codecommit:UploadArchive"],"Effect":"Allow","Resource":{"Fn::GetAtt":["CdkCodeSourceRepositoryF10B9DC6","Arn"]}}],"Version":"2012-10-17"},"policyName":"CodePipelineDeployingEcsApplicationSourceCdkCodeSourceCodePipelineActionRoleDefaultPolicyB5DFA55D","roles":[{"Ref":"CodePipelineDeployingEcsApplicationSourceCdkCodeSourceCodePipelineActionRoleA1E3A5E9"}]}}}}}}}}}}},"EventsRole":{"id":"EventsRole","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/EventsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/EventsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/EventsRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/EventsRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"codepipeline:StartPipelineExecution","Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codepipeline:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"CodePipelineDeployingEcsApplication81EB9383"}]]}}],"Version":"2012-10-17"},"policyName":"CodePipelineDeployingEcsApplicationEventsRoleDefaultPolicy19AFD1BD","roles":[{"Ref":"CodePipelineDeployingEcsApplicationEventsRoleEEEA39E5"}]}}}}}}},"Build":{"id":"Build","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"AppCodeDockerImageBuildAndPush":{"id":"AppCodeDockerImageBuildAndPush","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build/AppCodeDockerImageBuildAndPush","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build/AppCodeDockerImageBuildAndPush/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build/AppCodeDockerImageBuildAndPush/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationRole138CDC17","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build/AppCodeDockerImageBuildAndPush/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build/AppCodeDockerImageBuildAndPush/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["AppCodeDockerImageBuildAndPushProject00DD6671","Arn"]}}],"Version":"2012-10-17"},"policyName":"CodePipelineDeployingEcsApplicationBuildAppCodeDockerImageBuildAndPushCodePipelineActionRoleDefaultPolicyE8804DE5","roles":[{"Ref":"CodePipelineDeployingEcsApplicationBuildAppCodeDockerImageBuildAndPushCodePipelineActionRole9B025737"}]}}}}}}}}},"CdkCodeBuildAndSynth":{"id":"CdkCodeBuildAndSynth","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build/CdkCodeBuildAndSynth","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build/CdkCodeBuildAndSynth/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build/CdkCodeBuildAndSynth/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationRole138CDC17","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build/CdkCodeBuildAndSynth/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Build/CdkCodeBuildAndSynth/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["CdkCodeBuildProject98C8CAB8","Arn"]}}],"Version":"2012-10-17"},"policyName":"CodePipelineDeployingEcsApplicationBuildCdkCodeBuildAndSynthCodePipelineActionRoleDefaultPolicy5BE54B75","roles":[{"Ref":"CodePipelineDeployingEcsApplicationBuildCdkCodeBuildAndSynthCodePipelineActionRole54094521"}]}}}}}}}}}}},"Deploy":{"id":"Deploy","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"CFN_Deploy":{"id":"CFN_Deploy","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy/CFN_Deploy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy/CFN_Deploy/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy/CFN_Deploy/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationRole138CDC17","Arn"]}}}],"Version":"2012-10-17"}}}},"8389e75f-0810-4838-bf64-d6f85a95cf83":{"id":"8389e75f-0810-4838-bf64-d6f85a95cf83","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy/CFN_Deploy/CodePipelineActionRole/8389e75f-0810-4838-bf64-d6f85a95cf83","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy/CFN_Deploy/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy/CFN_Deploy/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"iam:PassRole","Effect":"Allow","Resource":{"Fn::GetAtt":["CodePipelineDeployingEcsApplicationDeployCFNDeployRole71BFA647","Arn"]}},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},"/*"]]}]},{"Action":["cloudformation:CreateStack","cloudformation:DescribeStack*","cloudformation:GetStackPolicy","cloudformation:GetTemplate*","cloudformation:SetStackPolicy","cloudformation:UpdateStack","cloudformation:ValidateTemplate"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudformation:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":stack/SampleEcsStackDeployedFromCodePipeline/*"]]}}],"Version":"2012-10-17"},"policyName":"CodePipelineDeployingEcsApplicationDeployCFNDeployCodePipelineActionRoleDefaultPolicy39F9A0A0","roles":[{"Ref":"CodePipelineDeployingEcsApplicationDeployCFNDeployCodePipelineActionRoleC97FFCE2"}]}}}}}}},"Role":{"id":"Role","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy/CFN_Deploy/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy/CFN_Deploy/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"cloudformation.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy/CFN_Deploy/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"aws-cdk-pipeline-ecs-separate-sources/CodePipelineDeployingEcsApplication/Deploy/CFN_Deploy/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},"/*"]]}]},{"Action":"*","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CodePipelineDeployingEcsApplicationDeployCFNDeployRoleDefaultPolicy859D7B9F","roles":[{"Ref":"CodePipelineDeployingEcsApplicationDeployCFNDeployRole71BFA647"}]}}}}}}}}}}}}},"Exports":{"id":"Exports","path":"aws-cdk-pipeline-ecs-separate-sources/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Output{\"Fn::GetAtt\":[\"EcsDeployRepositoryE7A569C0\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"EcsDeployRepositoryE7A569C0\",\"Arn\"]}","path":"aws-cdk-pipeline-ecs-separate-sources/Exports/Output{\"Fn::GetAtt\":[\"EcsDeployRepositoryE7A569C0\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}},"Output{\"Ref\":\"EcsDeployRepositoryE7A569C0\"}":{"id":"Output{\"Ref\":\"EcsDeployRepositoryE7A569C0\"}","path":"aws-cdk-pipeline-ecs-separate-sources/Exports/Output{\"Ref\":\"EcsDeployRepositoryE7A569C0\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"aws-cdk-pipeline-ecs-separate-sources/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"aws-cdk-pipeline-ecs-separate-sources/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}},"EcsStackDeployedInPipeline":{"id":"EcsStackDeployedInPipeline","path":"EcsStackDeployedInPipeline","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"TaskDefinition":{"id":"TaskDefinition","path":"EcsStackDeployedInPipeline/TaskDefinition","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.TaskDefinition","version":"0.0.0"},"children":{"TaskRole":{"id":"TaskRole","path":"EcsStackDeployedInPipeline/TaskDefinition/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"EcsStackDeployedInPipeline/TaskDefinition/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"Resource":{"id":"Resource","path":"EcsStackDeployedInPipeline/TaskDefinition/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",[{"Fn::Select":[4,{"Fn::Split":[":",{"Fn::ImportValue":"aws-cdk-pipeline-ecs-separate-sources:ExportsOutputFnGetAttEcsDeployRepositoryE7A569C0ArnCCACE9DD"}]}]},".dkr.ecr.",{"Fn::Select":[3,{"Fn::Split":[":",{"Fn::ImportValue":"aws-cdk-pipeline-ecs-separate-sources:ExportsOutputFnGetAttEcsDeployRepositoryE7A569C0ArnCCACE9DD"}]}]},".",{"Ref":"AWS::URLSuffix"},"/",{"Fn::ImportValue":"aws-cdk-pipeline-ecs-separate-sources:ExportsOutputRefEcsDeployRepositoryE7A569C04EC3EB5E"},":",{"Ref":"TaskDefinitionAppContainerImageTagParam6DBCD720"}]]},"name":"AppContainer"}],"cpu":"1024","executionRoleArn":{"Fn::GetAtt":["TaskDefinitionExecutionRole8D61C2FB","Arn"]},"family":"EcsStackDeployedInPipelineTaskDefinition3105C51D","memory":"2048","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["TaskDefinitionTaskRoleFD40A61D","Arn"]}}}},"AppContainer":{"id":"AppContainer","path":"EcsStackDeployedInPipeline/TaskDefinition/AppContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"0.0.0"},"children":{"ImageTagParam":{"id":"ImageTagParam","path":"EcsStackDeployedInPipeline/TaskDefinition/AppContainer/ImageTagParam","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}}}},"ExecutionRole":{"id":"ExecutionRole","path":"EcsStackDeployedInPipeline/TaskDefinition/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"EcsStackDeployedInPipeline/TaskDefinition/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EcsStackDeployedInPipeline/TaskDefinition/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"EcsStackDeployedInPipeline/TaskDefinition/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":{"Fn::ImportValue":"aws-cdk-pipeline-ecs-separate-sources:ExportsOutputFnGetAttEcsDeployRepositoryE7A569C0ArnCCACE9DD"}},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"TaskDefinitionExecutionRoleDefaultPolicy1F3406F5","roles":[{"Ref":"TaskDefinitionExecutionRole8D61C2FB"}]}}}}}}}}},"Vpc":{"id":"Vpc","path":"EcsStackDeployedInPipeline/Vpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"EcsStackDeployedInPipeline/Vpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"EcsStackDeployedInPipeline/Vpc"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"0.0.0"},"children":{"Subnet":{"id":"Subnet","path":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.0.0/17","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"Acl":{"id":"Acl","path":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0"}},"RouteTable":{"id":"RouteTable","path":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcPublicSubnet1RouteTable6C95E38E"},"subnetId":{"Ref":"VpcPublicSubnet1Subnet5C2D37C4"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"VpcIGWD7BA715C"},"routeTableId":{"Ref":"VpcPublicSubnet1RouteTable6C95E38E"}}}},"EIP":{"id":"EIP","path":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1/EIP","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnEIP","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::EIP","aws:cdk:cloudformation:props":{"domain":"vpc","tags":[{"key":"Name","value":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1"}]}}},"NATGateway":{"id":"NATGateway","path":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1/NATGateway","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnNatGateway","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::NatGateway","aws:cdk:cloudformation:props":{"allocationId":{"Fn::GetAtt":["VpcPublicSubnet1EIPD7E02669","AllocationId"]},"subnetId":{"Ref":"VpcPublicSubnet1Subnet5C2D37C4"},"tags":[{"key":"Name","value":"EcsStackDeployedInPipeline/Vpc/PublicSubnet1"}]}}}}},"PrivateSubnet1":{"id":"PrivateSubnet1","path":"EcsStackDeployedInPipeline/Vpc/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"0.0.0"},"children":{"Subnet":{"id":"Subnet","path":"EcsStackDeployedInPipeline/Vpc/PrivateSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":{"Fn::Select":[0,{"Fn::GetAZs":""}]},"cidrBlock":"10.0.128.0/17","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"Private"},{"key":"aws-cdk:subnet-type","value":"Private"},{"key":"Name","value":"EcsStackDeployedInPipeline/Vpc/PrivateSubnet1"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"Acl":{"id":"Acl","path":"EcsStackDeployedInPipeline/Vpc/PrivateSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0"}},"RouteTable":{"id":"RouteTable","path":"EcsStackDeployedInPipeline/Vpc/PrivateSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"EcsStackDeployedInPipeline/Vpc/PrivateSubnet1"}],"vpcId":{"Ref":"Vpc8378EB38"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"EcsStackDeployedInPipeline/Vpc/PrivateSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"VpcPrivateSubnet1RouteTableB2C5B500"},"subnetId":{"Ref":"VpcPrivateSubnet1Subnet536B997A"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"EcsStackDeployedInPipeline/Vpc/PrivateSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","natGatewayId":{"Ref":"VpcPublicSubnet1NATGateway4D7517AA"},"routeTableId":{"Ref":"VpcPrivateSubnet1RouteTableB2C5B500"}}}}}},"IGW":{"id":"IGW","path":"EcsStackDeployedInPipeline/Vpc/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"EcsStackDeployedInPipeline/Vpc"}]}}},"VPCGW":{"id":"VPCGW","path":"EcsStackDeployedInPipeline/Vpc/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"VpcIGWD7BA715C"},"vpcId":{"Ref":"Vpc8378EB38"}}}}}},"Cluster":{"id":"Cluster","path":"EcsStackDeployedInPipeline/Cluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"EcsStackDeployedInPipeline/Cluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{}}}}},"EcsService":{"id":"EcsService","path":"EcsStackDeployedInPipeline/EcsService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"0.0.0"},"children":{"Service":{"id":"Service","path":"EcsStackDeployedInPipeline/EcsService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"ClusterEB0386A7"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50},"enableEcsManagedTags":false,"launchType":"FARGATE","networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":[{"Ref":"VpcPrivateSubnet1Subnet536B997A"}],"securityGroups":[{"Fn::GetAtt":["EcsServiceSecurityGroup8FDFD52F","GroupId"]}]}},"taskDefinition":{"Ref":"TaskDefinitionB36D86D9"}}}},"SecurityGroup":{"id":"SecurityGroup","path":"EcsStackDeployedInPipeline/EcsService/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"EcsStackDeployedInPipeline/EcsService/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"EcsStackDeployedInPipeline/EcsService/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"Vpc8378EB38"}}}}}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"EcsStackDeployedInPipeline/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"EcsStackDeployedInPipeline/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}},"integ.pipeline-ecs-separate-source.lit":{"id":"integ.pipeline-ecs-separate-source.lit","path":"integ.pipeline-ecs-separate-source.lit","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"integ.pipeline-ecs-separate-source.lit/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"},"children":{"Default":{"id":"Default","path":"integ.pipeline-ecs-separate-source.lit/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"DeployAssert":{"id":"DeployAssert","path":"integ.pipeline-ecs-separate-source.lit/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"integ.pipeline-ecs-separate-source.lit/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"integ.pipeline-ecs-separate-source.lit/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}