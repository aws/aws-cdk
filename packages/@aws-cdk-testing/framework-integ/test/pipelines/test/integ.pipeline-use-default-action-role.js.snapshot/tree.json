{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"UsePipelineRoleForActions":{"id":"UsePipelineRoleForActions","path":"UsePipelineRoleForActions","children":{"SourceBucket":{"id":"SourceBucket","path":"UsePipelineRoleForActions/SourceBucket","children":{"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/SourceBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"0.0.0"}},"Policy":{"id":"Policy","path":"UsePipelineRoleForActions/SourceBucket/Policy","children":{"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/SourceBucket/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"SourceBucketDDD2130A"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["SourceBucketDDD2130A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SourceBucketDDD2130A","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"0.0.0","metadata":[{"bucket":"*"}]}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"UsePipelineRoleForActions/SourceBucket/AutoDeleteObjectsCustomResource","children":{"Default":{"id":"Default","path":"UsePipelineRoleForActions/SourceBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"0.0.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"0.0.0","metadata":[{"removalPolicy":"destroy","autoDeleteObjects":true}]}},"LatestNodeRuntimeMap":{"id":"LatestNodeRuntimeMap","path":"UsePipelineRoleForActions/LatestNodeRuntimeMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"0.0.0"}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"UsePipelineRoleForActions/Custom::S3AutoDeleteObjectsCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"UsePipelineRoleForActions/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"0.0.0"}},"Role":{"id":"Role","path":"UsePipelineRoleForActions/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}},"Handler":{"id":"Handler","path":"UsePipelineRoleForActions/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"0.0.0"}},"Pipeline":{"id":"Pipeline","path":"UsePipelineRoleForActions/Pipeline","children":{"Pipeline":{"id":"Pipeline","path":"UsePipelineRoleForActions/Pipeline/Pipeline","children":{"ArtifactsBucket":{"id":"ArtifactsBucket","path":"UsePipelineRoleForActions/Pipeline/Pipeline/ArtifactsBucket","children":{"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/ArtifactsBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"0.0.0"}},"Policy":{"id":"Policy","path":"UsePipelineRoleForActions/Pipeline/Pipeline/ArtifactsBucket/Policy","children":{"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/ArtifactsBucket/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"PipelineArtifactsBucketAEA9A052"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"0.0.0","metadata":[{"bucket":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"0.0.0","metadata":[{"bucketName":"*","encryptionKey":"*","encryption":"KMS_MANAGED","enforceSSL":true,"blockPublicAccess":"*","removalPolicy":"retain"}]}},"Role":{"id":"Role","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Role","children":{"ImportRole":{"id":"ImportRole","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SourceBucketDDD2130A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SourceBucketDDD2130A","Arn"]},"/key"]]}]},{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineBuildSynthCdkBuildProject6BEFA8E6","Arn"]},{"Fn::GetAtt":["PipelineMyWaveConsumeC5D5CCD7","Arn"]},{"Fn::GetAtt":["PipelineMyWaveProduce884410D6","Arn"]}]}],"Version":"2012-10-17"},"policyName":"PipelineRoleDefaultPolicy7BDC1ABB","roles":[{"Ref":"PipelineRoleB27FAA37"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"PipelineArtifactsBucketAEA9A052"}},"name":"integ-pipelines-use-service-role-for-actions","pipelineType":"V1","restartExecutionOnUpdate":true,"roleArn":{"Fn::GetAtt":["PipelineRoleB27FAA37","Arn"]},"stages":[{"name":"Source","actions":[{"name":{"Ref":"SourceBucketDDD2130A"},"outputArtifacts":[{"name":"c8b9720474aae65e79d5246d0d38babc2ba553a031_Source"}],"actionTypeId":{"category":"Source","version":"1","owner":"AWS","provider":"S3"},"configuration":{"S3Bucket":{"Ref":"SourceBucketDDD2130A"},"S3ObjectKey":"key"},"runOrder":1}]},{"name":"Build","actions":[{"name":"Synth","inputArtifacts":[{"name":"c8b9720474aae65e79d5246d0d38babc2ba553a031_Source"}],"outputArtifacts":[{"name":"Synth_Output"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"}},"runOrder":1}]},{"name":"MyWave","actions":[{"name":"Produce","inputArtifacts":[{"name":"c8b9720474aae65e79d5246d0d38babc2ba553a031_Source"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineMyWaveProduce884410D6"}},"runOrder":1,"namespace":"MyWave@Produce"},{"name":"Consume","inputArtifacts":[{"name":"c8b9720474aae65e79d5246d0d38babc2ba553a031_Source"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"PipelineMyWaveConsumeC5D5CCD7"},"EnvironmentVariables":"[{\"name\":\"THE_VAR\",\"type\":\"PLAINTEXT\",\"value\":\"#{MyWave@Produce.MY_VAR}\"}]"},"runOrder":2}]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"0.0.0"}},"Source":{"id":"Source","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Source","children":{"S3":{"id":"S3","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Source/S3","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Build":{"id":"Build","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Build","children":{"Synth":{"id":"Synth","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Build/Synth","children":{"CdkBuildProject":{"id":"CdkBuildProject","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Build/Synth/CdkBuildProject","children":{"Role":{"id":"Role","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role","children":{"ImportRole":{"id":"ImportRole","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"},":*"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"}]]}]},{"Action":["codebuild:BatchPutCodeCoverages","codebuild:BatchPutTestCases","codebuild:CreateReport","codebuild:CreateReportGroup","codebuild:UpdateReport"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"PipelineBuildSynthCdkBuildProject6BEFA8E6"},"-*"]]}},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelineBuildSynthCdkBuildProjectRoleDefaultPolicyFB6C941C","roles":[{"Ref":"PipelineBuildSynthCdkBuildProjectRole231EEA2A"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/Build/Synth/CdkBuildProject/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"description":"Pipeline step UsePipelineRoleForActions/Pipeline/Build/Synth","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["PipelineBuildSynthCdkBuildProjectRole231EEA2A","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"build\": {\n      \"commands\": [\n        \"mkdir cdk.out\",\n        \"touch cdk.out/dummy\"\n      ]\n    }\n  },\n  \"artifacts\": {\n    \"base-directory\": \"cdk.out\",\n    \"files\": \"**/*\"\n  }\n}"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"0.0.0","metadata":[{},{},{}]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"MyWave":{"id":"MyWave","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave","children":{"Produce":{"id":"Produce","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Produce","children":{"Produce":{"id":"Produce","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Produce/Produce","children":{"Role":{"id":"Role","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Produce/Produce/Role","children":{"ImportRole":{"id":"ImportRole","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Produce/Produce/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Produce/Produce/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Produce/Produce/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Produce/Produce/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["TestCacheBucketA6BDC126","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["TestCacheBucketA6BDC126","Arn"]},"/*"]]}]},{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"PipelineMyWaveProduce884410D6"},":*"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"PipelineMyWaveProduce884410D6"}]]}]},{"Action":["codebuild:BatchPutCodeCoverages","codebuild:BatchPutTestCases","codebuild:CreateReport","codebuild:CreateReportGroup","codebuild:UpdateReport"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"PipelineMyWaveProduce884410D6"},"-*"]]}},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelineMyWaveProduceRoleDefaultPolicy209239D4","roles":[{"Ref":"PipelineMyWaveProduceRole24E3565D"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Produce/Produce/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"S3","location":{"Fn::Join":["/",[{"Ref":"TestCacheBucketA6BDC126"},{"Ref":"AWS::NoValue"}]]}},"description":"Pipeline step UsePipelineRoleForActions/Pipeline/MyWave/Produce","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["PipelineMyWaveProduceRole24E3565D","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"env\": {\n    \"exported-variables\": [\n      \"MY_VAR\"\n    ]\n  },\n  \"phases\": {\n    \"build\": {\n      \"commands\": [\n        \"export MY_VAR=hello\"\n      ]\n    }\n  }\n}"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"0.0.0","metadata":[{},{},{}]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Consume":{"id":"Consume","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Consume","children":{"Consume":{"id":"Consume","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Consume/Consume","children":{"Role":{"id":"Role","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Consume/Consume/Role","children":{"ImportRole":{"id":"ImportRole","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Consume/Consume/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Consume/Consume/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Consume/Consume/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Consume/Consume/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["TestCacheBucketA6BDC126","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["TestCacheBucketA6BDC126","Arn"]},"/*"]]}]},{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"PipelineMyWaveConsumeC5D5CCD7"},":*"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"PipelineMyWaveConsumeC5D5CCD7"}]]}]},{"Action":["codebuild:BatchPutCodeCoverages","codebuild:BatchPutTestCases","codebuild:CreateReport","codebuild:CreateReportGroup","codebuild:UpdateReport"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"PipelineMyWaveConsumeC5D5CCD7"},"-*"]]}},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucketAEA9A052","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PipelineMyWaveConsumeRoleDefaultPolicyC80F0194","roles":[{"Ref":"PipelineMyWaveConsumeRole2A96FF33"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"0.0.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"roleName":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/Pipeline/Pipeline/MyWave/Consume/Consume/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"S3","location":{"Fn::Join":["/",[{"Ref":"TestCacheBucketA6BDC126"},{"Ref":"AWS::NoValue"}]]}},"description":"Pipeline step UsePipelineRoleForActions/Pipeline/MyWave/Consume","encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["PipelineMyWaveConsumeRole2A96FF33","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"{\n  \"version\": \"0.2\",\n  \"phases\": {\n    \"build\": {\n      \"commands\": [\n        \"echo \\\"The variable was: $THE_VAR\\\"\"\n      ]\n    }\n  }\n}"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"0.0.0","metadata":[{},{},{}]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"0.0.0","metadata":[{"pipelineName":"*","pipelineType":"V1","crossAccountKeys":false,"crossRegionReplicationBuckets":"*","reuseCrossRegionSupportStacks":"*","restartExecutionOnUpdate":true,"role":"*","enableKeyRotation":"*","artifactBucket":"*"},{"addStage":[{"stageName":"*"}]},{"addStage":[{"stageName":"*"}]},{"addStage":[{"stageName":"*"}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.pipelines.CodePipeline","version":"0.0.0"}},"TestCacheBucket":{"id":"TestCacheBucket","path":"UsePipelineRoleForActions/TestCacheBucket","children":{"Resource":{"id":"Resource","path":"UsePipelineRoleForActions/TestCacheBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"0.0.0","metadata":["*"]}},"BootstrapVersion":{"id":"BootstrapVersion","path":"UsePipelineRoleForActions/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"UsePipelineRoleForActions/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}},"UsePipelineRoleForActionsTest":{"id":"UsePipelineRoleForActionsTest","path":"UsePipelineRoleForActionsTest","children":{"DefaultTest":{"id":"DefaultTest","path":"UsePipelineRoleForActionsTest/DefaultTest","children":{"Default":{"id":"Default","path":"UsePipelineRoleForActionsTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert","children":{"AwsApiCallCodePipelinegetPipelinebe0c602b9092b725420683de1936e572":{"id":"AwsApiCallCodePipelinegetPipelinebe0c602b9092b725420683de1936e572","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/AwsApiCallCodePipelinegetPipelinebe0c602b9092b725420683de1936e572","children":{"SdkProvider":{"id":"SdkProvider","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/AwsApiCallCodePipelinegetPipelinebe0c602b9092b725420683de1936e572/SdkProvider","children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/AwsApiCallCodePipelinegetPipelinebe0c602b9092b725420683de1936e572/SdkProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AssertionsProvider","version":"0.0.0"}},"Default":{"id":"Default","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/AwsApiCallCodePipelinegetPipelinebe0c602b9092b725420683de1936e572/Default","children":{"Default":{"id":"Default","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/AwsApiCallCodePipelinegetPipelinebe0c602b9092b725420683de1936e572/Default/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"0.0.0","metadata":["*","*","*"]}},"AssertionResults":{"id":"AssertionResults","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/AwsApiCallCodePipelinegetPipelinebe0c602b9092b725420683de1936e572/AssertionResults","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.AwsApiCall","version":"0.0.0"}},"SingletonFunction1488541a7b23466481b69b4408076b81":{"id":"SingletonFunction1488541a7b23466481b69b4408076b81","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81","children":{"Staging":{"id":"Staging","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"0.0.0"}},"Role":{"id":"Role","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}},"Handler":{"id":"Handler","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"0.0.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"LatestNodeRuntimeMap":{"id":"LatestNodeRuntimeMap","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/LatestNodeRuntimeMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"0.0.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"UsePipelineRoleForActionsTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"}}},"constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"}}}