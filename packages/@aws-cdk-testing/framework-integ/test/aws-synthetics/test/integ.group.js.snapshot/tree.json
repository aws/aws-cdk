{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"},"children":{"synthetics-group":{"id":"synthetics-group","path":"synthetics-group","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"TestCanary1":{"id":"TestCanary1","path":"synthetics-group/TestCanary1","constructInfo":{"fqn":"aws-cdk-lib.aws_synthetics.Canary","version":"0.0.0","metadata":[{"test":"*","runtime":"*","canaryName":"*"}]},"children":{"ArtifactsBucket":{"id":"ArtifactsBucket","path":"synthetics-group/TestCanary1/ArtifactsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"0.0.0","metadata":[{"encryption":"KMS_MANAGED","enforceSSL":true,"lifecycleRules":"*"}]},"children":{"Resource":{"id":"Resource","path":"synthetics-group/TestCanary1/ArtifactsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms"}}]}}}},"Policy":{"id":"Policy","path":"synthetics-group/TestCanary1/ArtifactsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"0.0.0","metadata":[{"bucket":"*"}]},"children":{"Resource":{"id":"Resource","path":"synthetics-group/TestCanary1/ArtifactsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"TestCanary1ArtifactsBucket0D00750B"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["TestCanary1ArtifactsBucket0D00750B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["TestCanary1ArtifactsBucket0D00750B","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}}}},"ServiceRole":{"id":"ServiceRole","path":"synthetics-group/TestCanary1/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"inlinePolicies":"*","managedPolicies":[]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"synthetics-group/TestCanary1/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"synthetics-group/TestCanary1/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"policies":[{"policyName":"canaryPolicy","policyDocument":{"Statement":[{"Action":"s3:ListAllMyBuckets","Effect":"Allow","Resource":"*"},{"Action":"s3:GetBucketLocation","Effect":"Allow","Resource":{"Fn::GetAtt":["TestCanary1ArtifactsBucket0D00750B","Arn"]}},{"Action":"s3:PutObject","Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["TestCanary1ArtifactsBucket0D00750B","Arn"]},"/*"]]}},{"Action":"cloudwatch:PutMetricData","Condition":{"StringEquals":{"cloudwatch:namespace":"CloudWatchSynthetics"}},"Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/lambda/cwsyn-*"]]}}],"Version":"2012-10-17"}}]}}}}},"Resource":{"id":"Resource","path":"synthetics-group/TestCanary1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_synthetics.CfnCanary","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Synthetics::Canary","aws:cdk:cloudformation:props":{"artifactS3Location":{"Fn::Join":["",["s3://",{"Ref":"TestCanary1ArtifactsBucket0D00750B"}]]},"code":{"handler":"index.handler","script":"\n      const synthetics = require('Synthetics');\n      const log = require('SyntheticsLogger');\n      \n      const basicCustomEntryPoint = async function () {\n        log.info('Starting basic canary test');\n        return await synthetics.executeStep('checkHomepage', async function () {\n          const page = await synthetics.getPage();\n          const response = await page.goto('https://example.com', { waitUntil: 'domcontentloaded', timeout: 30000 });\n          await synthetics.takeScreenshot('homepage', 'loaded');\n          if (response.status() !== 200) {\n            throw 'Failed to load page!';\n          }\n        });\n      };\n      \n      exports.handler = async () => {\n        return await synthetics.executeStep('basicCustomEntryPoint', basicCustomEntryPoint);\n      };\n    "},"executionRoleArn":{"Fn::GetAtt":["TestCanary1ServiceRole41E6EC53","Arn"]},"name":"test-canary-1-for-group","runtimeVersion":"syn-nodejs-puppeteer-6.2","schedule":{"durationInSeconds":"0","expression":"rate(5 minutes)"},"startCanaryAfterCreation":true}}}}},"TestCanary2":{"id":"TestCanary2","path":"synthetics-group/TestCanary2","constructInfo":{"fqn":"aws-cdk-lib.aws_synthetics.Canary","version":"0.0.0","metadata":[{"test":"*","runtime":"*","canaryName":"*"}]},"children":{"ArtifactsBucket":{"id":"ArtifactsBucket","path":"synthetics-group/TestCanary2/ArtifactsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"0.0.0","metadata":[{"encryption":"KMS_MANAGED","enforceSSL":true,"lifecycleRules":"*"}]},"children":{"Resource":{"id":"Resource","path":"synthetics-group/TestCanary2/ArtifactsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms"}}]}}}},"Policy":{"id":"Policy","path":"synthetics-group/TestCanary2/ArtifactsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"0.0.0","metadata":[{"bucket":"*"}]},"children":{"Resource":{"id":"Resource","path":"synthetics-group/TestCanary2/ArtifactsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"TestCanary2ArtifactsBucketCA0FD872"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["TestCanary2ArtifactsBucketCA0FD872","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["TestCanary2ArtifactsBucketCA0FD872","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}}}},"ServiceRole":{"id":"ServiceRole","path":"synthetics-group/TestCanary2/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"inlinePolicies":"*","managedPolicies":[]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"synthetics-group/TestCanary2/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"0.0.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"synthetics-group/TestCanary2/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"policies":[{"policyName":"canaryPolicy","policyDocument":{"Statement":[{"Action":"s3:ListAllMyBuckets","Effect":"Allow","Resource":"*"},{"Action":"s3:GetBucketLocation","Effect":"Allow","Resource":{"Fn::GetAtt":["TestCanary2ArtifactsBucketCA0FD872","Arn"]}},{"Action":"s3:PutObject","Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["TestCanary2ArtifactsBucketCA0FD872","Arn"]},"/*"]]}},{"Action":"cloudwatch:PutMetricData","Condition":{"StringEquals":{"cloudwatch:namespace":"CloudWatchSynthetics"}},"Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/lambda/cwsyn-*"]]}}],"Version":"2012-10-17"}}]}}}}},"Resource":{"id":"Resource","path":"synthetics-group/TestCanary2/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_synthetics.CfnCanary","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Synthetics::Canary","aws:cdk:cloudformation:props":{"artifactS3Location":{"Fn::Join":["",["s3://",{"Ref":"TestCanary2ArtifactsBucketCA0FD872"}]]},"code":{"handler":"index.handler","script":"\n      const synthetics = require('Synthetics');\n      const log = require('SyntheticsLogger');\n      \n      const basicCustomEntryPoint = async function () {\n        log.info('Starting second canary test');\n        return await synthetics.executeStep('checkAPI', async function () {\n          const page = await synthetics.getPage();\n          const response = await page.goto('https://httpbin.org/get', { waitUntil: 'domcontentloaded', timeout: 30000 });\n          await synthetics.takeScreenshot('api', 'loaded');\n          if (response.status() !== 200) {\n            throw 'Failed to load API!';\n          }\n        });\n      };\n      \n      exports.handler = async () => {\n        return await synthetics.executeStep('basicCustomEntryPoint', basicCustomEntryPoint);\n      };\n    "},"executionRoleArn":{"Fn::GetAtt":["TestCanary2ServiceRole6DE3A04D","Arn"]},"name":"test-canary-2-for-group","runtimeVersion":"syn-nodejs-puppeteer-6.2","schedule":{"durationInSeconds":"0","expression":"rate(5 minutes)"},"startCanaryAfterCreation":true}}}}},"TestGroup":{"id":"TestGroup","path":"synthetics-group/TestGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_synthetics.Group","version":"0.0.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"synthetics-group/TestGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_synthetics.CfnGroup","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Synthetics::Group","aws:cdk:cloudformation:props":{"name":"test-canary-group","resourceArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":synthetics:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":canary:",{"Ref":"TestCanary193D30EFE"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":synthetics:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":canary:",{"Ref":"TestCanary247DDF172"}]]}]}}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"synthetics-group/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"synthetics-group/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}},"SyntheticsGroupIntegTest":{"id":"SyntheticsGroupIntegTest","path":"SyntheticsGroupIntegTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"SyntheticsGroupIntegTest/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"},"children":{"Default":{"id":"Default","path":"SyntheticsGroupIntegTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"SyntheticsGroupIntegTest/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"SyntheticsGroupIntegTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SyntheticsGroupIntegTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}