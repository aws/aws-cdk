{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"aws-cdk-firehose-iceberg-destination":{"id":"aws-cdk-firehose-iceberg-destination","path":"aws-cdk-firehose-iceberg-destination","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"IcebergBucket":{"id":"IcebergBucket","path":"aws-cdk-firehose-iceberg-destination/IcebergBucket","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergBucket/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"aws-cdk-firehose-iceberg-destination/IcebergBucket/Policy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergBucket/Policy/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"IcebergBucket89DD3FA6"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"aws-cdk-firehose-iceberg-destination/IcebergBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Default":{"id":"Default","path":"aws-cdk-firehose-iceberg-destination/IcebergBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"aws-cdk-firehose-iceberg-destination/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Staging":{"id":"Staging","path":"aws-cdk-firehose-iceberg-destination/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Role":{"id":"Role","path":"aws-cdk-firehose-iceberg-destination/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Handler":{"id":"Handler","path":"aws-cdk-firehose-iceberg-destination/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"IcebergDatabase":{"id":"IcebergDatabase","path":"aws-cdk-firehose-iceberg-destination/IcebergDatabase","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Glue::Database","aws:cdk:cloudformation:props":{"catalogId":{"Ref":"AWS::AccountId"},"databaseInput":{"name":"iceberg_db","description":"Database for Iceberg tables"}}}},"IcebergTable":{"id":"IcebergTable","path":"aws-cdk-firehose-iceberg-destination/IcebergTable","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Glue::Table","aws:cdk:cloudformation:props":{"catalogId":{"Ref":"AWS::AccountId"},"databaseName":{"Ref":"IcebergDatabase"},"tableInput":{"name":"iceberg_table","tableType":"EXTERNAL_TABLE","parameters":{"table_type":"ICEBERG","format":"parquet"},"storageDescriptor":{"location":{"Fn::Join":["",["s3://",{"Ref":"IcebergBucket89DD3FA6"},"/warehouse/iceberg_db/iceberg_table"]]},"inputFormat":"org.apache.iceberg.mr.hive.HiveIcebergInputFormat","outputFormat":"org.apache.iceberg.mr.hive.HiveIcebergOutputFormat","serdeInfo":{"serializationLibrary":"org.apache.iceberg.mr.hive.HiveIcebergSerDe"},"columns":[{"name":"id","type":"string"},{"name":"data","type":"string"}]}}}}},"IcebergDeliveryStreamWithCatalog":{"id":"IcebergDeliveryStreamWithCatalog","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Iceberg Destination Role":{"id":"Iceberg Destination Role","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog/Iceberg Destination Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*"]},"children":{"ImportIceberg Destination Role":{"id":"ImportIceberg Destination Role","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog/Iceberg Destination Role/ImportIceberg Destination Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]}},"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog/Iceberg Destination Role/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"firehose.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog/Iceberg Destination Role/DefaultPolicy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog/Iceberg Destination Role/DefaultPolicy/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},"/*"]]}]},{"Action":["glue:GetDatabase","glue:GetTable","glue:UpdateTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":database/",{"Ref":"IcebergDatabase"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":table/",{"Ref":"IcebergDatabase"},"/",{"Ref":"IcebergTable"}]]}]},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["IcebergDeliveryStreamWithCatalogLogGroup81275A13","Arn"]}}],"Version":"2012-10-17"},"policyName":"IcebergDeliveryStreamWithCatalogIcebergDestinationRoleDefaultPolicy64A29470","roles":[{"Ref":"IcebergDeliveryStreamWithCatalogIcebergDestinationRoleA786FC31"}]}}}}}}},"LogGroup":{"id":"LogGroup","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog/LogGroup","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog/LogGroup/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":731}}},"IcebergDestination":{"id":"IcebergDestination","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog/LogGroup/IcebergDestination","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog/LogGroup/IcebergDestination/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogStream","aws:cdk:cloudformation:props":{"logGroupName":{"Ref":"IcebergDeliveryStreamWithCatalogLogGroup81275A13"}}}}}}}},"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCatalog/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KinesisFirehose::DeliveryStream","aws:cdk:cloudformation:props":{"deliveryStreamType":"DirectPut","icebergDestinationConfiguration":{"catalogConfiguration":{"catalogArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog"]]}},"roleArn":{"Fn::GetAtt":["IcebergDeliveryStreamWithCatalogIcebergDestinationRoleA786FC31","Arn"]},"s3Configuration":{"bucketArn":{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},"roleArn":{"Fn::GetAtt":["IcebergDeliveryStreamWithCatalogIcebergDestinationRoleA786FC31","Arn"]}},"cloudWatchLoggingOptions":{"enabled":true,"logGroupName":{"Ref":"IcebergDeliveryStreamWithCatalogLogGroup81275A13"},"logStreamName":{"Ref":"IcebergDeliveryStreamWithCatalogLogGroupIcebergDestinationBEEE2CB8"}},"destinationTableConfigurationList":[{"destinationDatabaseName":{"Ref":"IcebergDatabase"},"destinationTableName":{"Ref":"IcebergTable"},"uniqueKeys":["id"]}]}}}}}},"@aws-cdk--aws-kinesisfirehose.CidrBlocks":{"id":"@aws-cdk--aws-kinesisfirehose.CidrBlocks","path":"aws-cdk-firehose-iceberg-destination/@aws-cdk--aws-kinesisfirehose.CidrBlocks","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"IcebergDeliveryStreamWithWarehouse":{"id":"IcebergDeliveryStreamWithWarehouse","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Iceberg Destination Role":{"id":"Iceberg Destination Role","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse/Iceberg Destination Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*"]},"children":{"ImportIceberg Destination Role":{"id":"ImportIceberg Destination Role","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse/Iceberg Destination Role/ImportIceberg Destination Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]}},"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse/Iceberg Destination Role/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"firehose.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse/Iceberg Destination Role/DefaultPolicy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse/Iceberg Destination Role/DefaultPolicy/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},"/*"]]}]},{"Action":["glue:GetDatabase","glue:GetTable","glue:UpdateTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":database/",{"Ref":"IcebergDatabase"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":table/",{"Ref":"IcebergDatabase"},"/",{"Ref":"IcebergTable"}]]}]},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["IcebergDeliveryStreamWithWarehouseLogGroup16F73D33","Arn"]}}],"Version":"2012-10-17"},"policyName":"IcebergDeliveryStreamWithWarehouseIcebergDestinationRoleDefaultPolicy6DA999A2","roles":[{"Ref":"IcebergDeliveryStreamWithWarehouseIcebergDestinationRole3F6CA365"}]}}}}}}},"LogGroup":{"id":"LogGroup","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse/LogGroup","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse/LogGroup/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":731}}},"IcebergDestination":{"id":"IcebergDestination","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse/LogGroup/IcebergDestination","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse/LogGroup/IcebergDestination/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogStream","aws:cdk:cloudformation:props":{"logGroupName":{"Ref":"IcebergDeliveryStreamWithWarehouseLogGroup16F73D33"}}}}}}}},"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithWarehouse/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KinesisFirehose::DeliveryStream","aws:cdk:cloudformation:props":{"deliveryStreamType":"DirectPut","icebergDestinationConfiguration":{"catalogConfiguration":{"warehouseLocation":{"Fn::Join":["",["s3://",{"Ref":"IcebergBucket89DD3FA6"},"/warehouse"]]}},"roleArn":{"Fn::GetAtt":["IcebergDeliveryStreamWithWarehouseIcebergDestinationRole3F6CA365","Arn"]},"s3Configuration":{"bucketArn":{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},"roleArn":{"Fn::GetAtt":["IcebergDeliveryStreamWithWarehouseIcebergDestinationRole3F6CA365","Arn"]},"bufferingHints":{"intervalInSeconds":60,"sizeInMBs":1}},"bufferingHints":{"intervalInSeconds":60,"sizeInMBs":1},"cloudWatchLoggingOptions":{"enabled":true,"logGroupName":{"Ref":"IcebergDeliveryStreamWithWarehouseLogGroup16F73D33"},"logStreamName":{"Ref":"IcebergDeliveryStreamWithWarehouseLogGroupIcebergDestination85AA662E"}},"destinationTableConfigurationList":[{"destinationDatabaseName":{"Ref":"IcebergDatabase"},"destinationTableName":{"Ref":"IcebergTable"},"uniqueKeys":["id"]}]}}}}}},"CustomRole":{"id":"CustomRole","path":"aws-cdk-firehose-iceberg-destination/CustomRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*"]},"children":{"ImportCustomRole":{"id":"ImportCustomRole","path":"aws-cdk-firehose-iceberg-destination/CustomRole/ImportCustomRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]}},"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/CustomRole/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"firehose.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-firehose-iceberg-destination/CustomRole/DefaultPolicy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/CustomRole/DefaultPolicy/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},"/*"]]}]},{"Action":["glue:GetDatabase","glue:GetTable","glue:UpdateTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":database/",{"Ref":"IcebergDatabase"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":table/",{"Ref":"IcebergDatabase"},"/",{"Ref":"IcebergTable"}]]}]},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["IcebergDeliveryStreamWithCustomRoleLogGroupD445E04A","Arn"]}}],"Version":"2012-10-17"},"policyName":"CustomRoleDefaultPolicyC5C189DF","roles":[{"Ref":"CustomRole6D8E6809"}]}}}}}}},"IcebergDeliveryStreamWithCustomRole":{"id":"IcebergDeliveryStreamWithCustomRole","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCustomRole","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"LogGroup":{"id":"LogGroup","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCustomRole/LogGroup","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCustomRole/LogGroup/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":731}}},"IcebergDestination":{"id":"IcebergDestination","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCustomRole/LogGroup/IcebergDestination","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCustomRole/LogGroup/IcebergDestination/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogStream","aws:cdk:cloudformation:props":{"logGroupName":{"Ref":"IcebergDeliveryStreamWithCustomRoleLogGroupD445E04A"}}}}}}}},"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamWithCustomRole/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KinesisFirehose::DeliveryStream","aws:cdk:cloudformation:props":{"deliveryStreamType":"DirectPut","icebergDestinationConfiguration":{"catalogConfiguration":{"catalogArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog"]]}},"roleArn":{"Fn::GetAtt":["CustomRole6D8E6809","Arn"]},"s3Configuration":{"bucketArn":{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},"roleArn":{"Fn::GetAtt":["CustomRole6D8E6809","Arn"]}},"cloudWatchLoggingOptions":{"enabled":true,"logGroupName":{"Ref":"IcebergDeliveryStreamWithCustomRoleLogGroupD445E04A"},"logStreamName":{"Ref":"IcebergDeliveryStreamWithCustomRoleLogGroupIcebergDestinationBCBE9E25"}},"destinationTableConfigurationList":[{"destinationDatabaseName":{"Ref":"IcebergDatabase"},"destinationTableName":{"Ref":"IcebergTable"},"uniqueKeys":["id"]}]}}}}}},"IcebergDeliveryStreamAllProperties":{"id":"IcebergDeliveryStreamAllProperties","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Iceberg Destination Role":{"id":"Iceberg Destination Role","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties/Iceberg Destination Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*"]},"children":{"ImportIceberg Destination Role":{"id":"ImportIceberg Destination Role","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties/Iceberg Destination Role/ImportIceberg Destination Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]}},"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties/Iceberg Destination Role/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"firehose.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties/Iceberg Destination Role/DefaultPolicy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties/Iceberg Destination Role/DefaultPolicy/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},"/*"]]}]},{"Action":["glue:GetDatabase","glue:GetTable","glue:UpdateTable"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":database/",{"Ref":"IcebergDatabase"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":table/",{"Ref":"IcebergDatabase"},"/",{"Ref":"IcebergTable"}]]}]},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["IcebergDeliveryStreamAllPropertiesLogGroup0ADD9328","Arn"]}}],"Version":"2012-10-17"},"policyName":"IcebergDeliveryStreamAllPropertiesIcebergDestinationRoleDefaultPolicy3284DF7E","roles":[{"Ref":"IcebergDeliveryStreamAllPropertiesIcebergDestinationRole6D748BA7"}]}}}}}}},"LogGroup":{"id":"LogGroup","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties/LogGroup","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties/LogGroup/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":731}}},"IcebergDestination":{"id":"IcebergDestination","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties/LogGroup/IcebergDestination","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties/LogGroup/IcebergDestination/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogStream","aws:cdk:cloudformation:props":{"logGroupName":{"Ref":"IcebergDeliveryStreamAllPropertiesLogGroup0ADD9328"}}}}}}}},"Resource":{"id":"Resource","path":"aws-cdk-firehose-iceberg-destination/IcebergDeliveryStreamAllProperties/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KinesisFirehose::DeliveryStream","aws:cdk:cloudformation:props":{"deliveryStreamType":"DirectPut","icebergDestinationConfiguration":{"catalogConfiguration":{"catalogArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":glue:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":catalog"]]},"warehouseLocation":{"Fn::Join":["",["s3://",{"Ref":"IcebergBucket89DD3FA6"},"/warehouse"]]}},"roleArn":{"Fn::GetAtt":["IcebergDeliveryStreamAllPropertiesIcebergDestinationRole6D748BA7","Arn"]},"s3Configuration":{"bucketArn":{"Fn::GetAtt":["IcebergBucket89DD3FA6","Arn"]},"roleArn":{"Fn::GetAtt":["IcebergDeliveryStreamAllPropertiesIcebergDestinationRole6D748BA7","Arn"]},"bufferingHints":{"intervalInSeconds":300,"sizeInMBs":8}},"appendOnly":true,"bufferingHints":{"intervalInSeconds":300,"sizeInMBs":8},"cloudWatchLoggingOptions":{"enabled":true,"logGroupName":{"Ref":"IcebergDeliveryStreamAllPropertiesLogGroup0ADD9328"},"logStreamName":{"Ref":"IcebergDeliveryStreamAllPropertiesLogGroupIcebergDestination982F8BCC"}},"destinationTableConfigurationList":[{"destinationDatabaseName":{"Ref":"IcebergDatabase"},"destinationTableName":{"Ref":"IcebergTable"},"uniqueKeys":["id"],"s3ErrorOutputPrefix":"errors/iceberg_table/"}],"retryOptions":{"durationInSeconds":7200}}}}}}},"Exports":{"id":"Exports","path":"aws-cdk-firehose-iceberg-destination/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"IcebergDeliveryStreamWithWarehouse5D427EB8\"}":{"id":"Output{\"Ref\":\"IcebergDeliveryStreamWithWarehouse5D427EB8\"}","path":"aws-cdk-firehose-iceberg-destination/Exports/Output{\"Ref\":\"IcebergDeliveryStreamWithWarehouse5D427EB8\"}","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Output{\"Ref\":\"IcebergBucket89DD3FA6\"}":{"id":"Output{\"Ref\":\"IcebergBucket89DD3FA6\"}","path":"aws-cdk-firehose-iceberg-destination/Exports/Output{\"Ref\":\"IcebergBucket89DD3FA6\"}","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"aws-cdk-firehose-iceberg-destination/BootstrapVersion","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"aws-cdk-firehose-iceberg-destination/CheckBootstrapVersion","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"integ-tests":{"id":"integ-tests","path":"integ-tests","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"DefaultTest":{"id":"DefaultTest","path":"integ-tests/DefaultTest","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"integ-tests/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"DeployAssert":{"id":"DeployAssert","path":"integ-tests/DefaultTest/DeployAssert","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"AwsApiCallFirehoseputRecord5618c980880fdd2696545c6e893c2cd0":{"id":"AwsApiCallFirehoseputRecord5618c980880fdd2696545c6e893c2cd0","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallFirehoseputRecord5618c980880fdd2696545c6e893c2cd0","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"SdkProvider":{"id":"SdkProvider","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallFirehoseputRecord5618c980880fdd2696545c6e893c2cd0/SdkProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallFirehoseputRecord5618c980880fdd2696545c6e893c2cd0/SdkProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"Default":{"id":"Default","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallFirehoseputRecord5618c980880fdd2696545c6e893c2cd0/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*"]},"children":{"Default":{"id":"Default","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallFirehoseputRecord5618c980880fdd2696545c6e893c2cd0/Default/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}},"SingletonFunction1488541a7b23466481b69b4408076b81":{"id":"SingletonFunction1488541a7b23466481b69b4408076b81","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Staging":{"id":"Staging","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Staging","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Role":{"id":"Role","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Handler":{"id":"Handler","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction1488541a7b23466481b69b4408076b81/Handler","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0":{"id":"AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"SdkProvider":{"id":"SdkProvider","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/SdkProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/SdkProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"Default":{"id":"Default","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2","metadata":["*","*","*"]},"children":{"Default":{"id":"Default","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/Default/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"WaitFor":{"id":"WaitFor","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/WaitFor","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"IsCompleteProvider":{"id":"IsCompleteProvider","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/WaitFor/IsCompleteProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/WaitFor/IsCompleteProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Invoke":{"id":"Invoke","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/WaitFor/IsCompleteProvider/Invoke","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"TimeoutProvider":{"id":"TimeoutProvider","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/WaitFor/TimeoutProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"AssertionsProvider":{"id":"AssertionsProvider","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/WaitFor/TimeoutProvider/AssertionsProvider","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Invoke":{"id":"Invoke","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/WaitFor/TimeoutProvider/Invoke","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"Role":{"id":"Role","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/WaitFor/Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/WaitFor/Resource","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"AssertionResults":{"id":"AssertionResults","path":"integ-tests/DefaultTest/DeployAssert/AwsApiCallS3listObjectsV2faec8aa7f42ddcfc175c8324a37270f0/AssertionResults","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"SingletonFunction76b3e830a873425f8453eddd85c86925":{"id":"SingletonFunction76b3e830a873425f8453eddd85c86925","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction76b3e830a873425f8453eddd85c86925","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Staging":{"id":"Staging","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction76b3e830a873425f8453eddd85c86925/Staging","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Role":{"id":"Role","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction76b3e830a873425f8453eddd85c86925/Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Handler":{"id":"Handler","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction76b3e830a873425f8453eddd85c86925/Handler","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a":{"id":"SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Staging":{"id":"Staging","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a/Staging","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Role":{"id":"Role","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a/Role","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Handler":{"id":"Handler","path":"integ-tests/DefaultTest/DeployAssert/SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41a/Handler","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"integ-tests/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"integ-tests/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}