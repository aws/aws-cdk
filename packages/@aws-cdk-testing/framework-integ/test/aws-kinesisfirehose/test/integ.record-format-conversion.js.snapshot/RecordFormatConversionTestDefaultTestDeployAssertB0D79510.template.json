{
 "Resources": {
  "AwsApiCallFirehosedescribeDeliveryStream1f633a3cab72011e76e59275f2cbb595": {
   "Type": "Custom::DeployAssert@SdkCallFirehosedescribeDeliveryStream",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "describeDeliveryStream",
    "expected": "{\"$ObjectLike\":{\"DeliveryStreamDescription\":{\"Destinations\":[{\"ExtendedS3DestinationDescription\":{\"DataFormatConversionConfiguration\":{\"InputFormatConfiguration\":{\"Deserializer\":{\"HiveJsonSerDe\":{\"TimestampFormats\":[\"millis\",\"yyyy-MM-dd\"]}}}}}}]}}}",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefCustomHiveJsonEF2911B48EFEE2C6"
        },
        "\""
       ]
      ]
     }
    },
    "flattenResponse": "false",
    "salt": "1760594676340"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "SingletonFunction1488541a7b23466481b69b4408076b81Role37ABCE73": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Version": "2012-10-17",
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ]
    },
    "ManagedPolicyArns": [
     {
      "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
     }
    ],
    "Policies": [
     {
      "PolicyName": "Inline",
      "PolicyDocument": {
       "Version": "2012-10-17",
       "Statement": [
        {
         "Action": [
          "firehose:DescribeDeliveryStream"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:PutRecord"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:DescribeDeliveryStream"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:PutRecord"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:DescribeDeliveryStream"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:PutRecord"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:DescribeDeliveryStream"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:PutRecord"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:DescribeDeliveryStream"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:PutRecord"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:DescribeDeliveryStream"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "firehose:PutRecord"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "s3:ListObjectsV2"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "states:StartExecution"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        }
       ]
      }
     }
    ]
   }
  },
  "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Runtime": {
     "Fn::FindInMap": [
      "LatestNodeRuntimeMap",
      {
       "Ref": "AWS::Region"
      },
      "value"
     ]
    },
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "c11608a15785084ea1afe65826e575ee316add10c8b1bb373e93297e26aec564.zip"
    },
    "Timeout": 120,
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81Role37ABCE73",
      "Arn"
     ]
    }
   }
  },
  "AwsApiCallFirehoseputRecord18eae126e1db88bccb665e3cf2382723": {
   "Type": "Custom::DeployAssert@SdkCallFirehoseputRecord",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "putRecord",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefCustomHiveJsonEF2911B48EFEE2C6"
        },
        "\""
       ]
      ]
     },
     "Record": "{\"Data\":\"{\\\"Column_A\\\":\\\"foo\\\",\\\"Column_B\\\":\\\"bar\\\"}\"}"
    },
    "flattenResponse": "false",
    "salt": "1760594676341"
   },
   "DependsOn": [
    "AwsApiCallFirehosedescribeDeliveryStream1f633a3cab72011e76e59275f2cbb595"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallFirehosedescribeDeliveryStream429b2496ec1bb3c217e799457b01c838": {
   "Type": "Custom::DeployAssert@SdkCallFirehosedescribeDeliveryStream",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "describeDeliveryStream",
    "expected": "{\"$ObjectLike\":{\"DeliveryStreamDescription\":{\"Destinations\":[{\"ExtendedS3DestinationDescription\":{\"DataFormatConversionConfiguration\":{\"InputFormatConfiguration\":{\"Deserializer\":{\"OpenXJsonSerDe\":{\"CaseInsensitive\":false,\"ColumnToJsonKeyMappings\":{\"column_yay\":\"Column_A\"},\"ConvertDotsInJsonKeysToUnderscores\":true}}}}}}]}}}",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefCustomOpenXJsonEA227FEF3789EDDA"
        },
        "\""
       ]
      ]
     }
    },
    "flattenResponse": "false",
    "salt": "1760594676352"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallFirehoseputRecordca37e652bd2d5899647ca3a4b0194118": {
   "Type": "Custom::DeployAssert@SdkCallFirehoseputRecord",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "putRecord",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefCustomOpenXJsonEA227FEF3789EDDA"
        },
        "\""
       ]
      ]
     },
     "Record": "{\"Data\":\"{\\\"Column_A\\\":\\\"foo\\\",\\\"Column_B\\\":\\\"bar\\\"}\"}"
    },
    "flattenResponse": "false",
    "salt": "1760594676352"
   },
   "DependsOn": [
    "AwsApiCallFirehosedescribeDeliveryStream429b2496ec1bb3c217e799457b01c838"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallFirehosedescribeDeliveryStream80ff3183e5eb6b5c7dadb7fc094e741d": {
   "Type": "Custom::DeployAssert@SdkCallFirehosedescribeDeliveryStream",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "describeDeliveryStream",
    "expected": "{\"$ObjectLike\":{\"DeliveryStreamDescription\":{\"Destinations\":[{\"ExtendedS3DestinationDescription\":{\"DataFormatConversionConfiguration\":{\"OutputFormatConfiguration\":{\"Serializer\":{\"OrcSerDe\":{\"BlockSizeBytes\":268435456,\"BloomFilterColumns\":[\"column_a\"],\"BloomFilterFalsePositiveProbability\":0.5,\"Compression\":\"NONE\",\"DictionaryKeyThreshold\":0.3,\"FormatVersion\":\"V0_11\",\"EnablePadding\":true,\"PaddingTolerance\":0.4,\"RowIndexStride\":5000,\"StripeSizeBytes\":33554432}}}}}}]}}}",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefCustomOrc771199861FB3EAC4"
        },
        "\""
       ]
      ]
     }
    },
    "flattenResponse": "false",
    "salt": "1760594676352"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallFirehoseputRecord41f6aac146cdbc41984ecab5a08c966c": {
   "Type": "Custom::DeployAssert@SdkCallFirehoseputRecord",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "putRecord",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefCustomOrc771199861FB3EAC4"
        },
        "\""
       ]
      ]
     },
     "Record": "{\"Data\":\"{\\\"Column_A\\\":\\\"foo\\\",\\\"Column_B\\\":\\\"bar\\\"}\"}"
    },
    "flattenResponse": "false",
    "salt": "1760594676353"
   },
   "DependsOn": [
    "AwsApiCallFirehosedescribeDeliveryStream80ff3183e5eb6b5c7dadb7fc094e741d"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallFirehosedescribeDeliveryStream77751255b283a1ea1a4bd3c711269900": {
   "Type": "Custom::DeployAssert@SdkCallFirehosedescribeDeliveryStream",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "describeDeliveryStream",
    "expected": "{\"$ObjectLike\":{\"DeliveryStreamDescription\":{\"Destinations\":[{\"ExtendedS3DestinationDescription\":{\"DataFormatConversionConfiguration\":{\"OutputFormatConfiguration\":{\"Serializer\":{\"ParquetSerDe\":{\"BlockSizeBytes\":134217728,\"PageSizeBytes\":2097152,\"Compression\":\"GZIP\",\"WriterVersion\":\"V2\",\"EnableDictionaryCompression\":true,\"MaxPaddingBytes\":100}}}}}}]}}}",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefCustomParquet17BE234326AD3637"
        },
        "\""
       ]
      ]
     }
    },
    "flattenResponse": "false",
    "salt": "1760594676353"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallFirehoseputRecord32bc5fec135267e9201d75ffff237638": {
   "Type": "Custom::DeployAssert@SdkCallFirehoseputRecord",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "putRecord",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefCustomParquet17BE234326AD3637"
        },
        "\""
       ]
      ]
     },
     "Record": "{\"Data\":\"{\\\"Column_A\\\":\\\"foo\\\",\\\"Column_B\\\":\\\"bar\\\"}\"}"
    },
    "flattenResponse": "false",
    "salt": "1760594676353"
   },
   "DependsOn": [
    "AwsApiCallFirehosedescribeDeliveryStream77751255b283a1ea1a4bd3c711269900"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallFirehosedescribeDeliveryStreamb0d4cd9ba478423252d4278aa95b0414": {
   "Type": "Custom::DeployAssert@SdkCallFirehosedescribeDeliveryStream",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "describeDeliveryStream",
    "expected": "{\"$ObjectLike\":{\"DeliveryStreamDescription\":{\"Destinations\":[{\"ExtendedS3DestinationDescription\":{\"DataFormatConversionConfiguration\":{\"InputFormatConfiguration\":{\"Deserializer\":{\"HiveJsonSerDe\":{}}},\"OutputFormatConfiguration\":{\"Serializer\":{\"OrcSerDe\":{}}}}}}]}}}",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefDefaultHiveJsonOrc16EE3C9068BF05B1"
        },
        "\""
       ]
      ]
     }
    },
    "flattenResponse": "false",
    "salt": "1760594676353"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallFirehoseputRecord7d0453eb6f4a193758747fd8ef3cfb72": {
   "Type": "Custom::DeployAssert@SdkCallFirehoseputRecord",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "putRecord",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefDefaultHiveJsonOrc16EE3C9068BF05B1"
        },
        "\""
       ]
      ]
     },
     "Record": "{\"Data\":\"{\\\"Column_A\\\":\\\"foo\\\",\\\"Column_B\\\":\\\"bar\\\"}\"}"
    },
    "flattenResponse": "false",
    "salt": "1760594676354"
   },
   "DependsOn": [
    "AwsApiCallFirehosedescribeDeliveryStreamb0d4cd9ba478423252d4278aa95b0414"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallFirehosedescribeDeliveryStreamc49aeb8fbb93c449cb71bf766f7246b7": {
   "Type": "Custom::DeployAssert@SdkCallFirehosedescribeDeliveryStream",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "describeDeliveryStream",
    "expected": "{\"$ObjectLike\":{\"DeliveryStreamDescription\":{\"Destinations\":[{\"ExtendedS3DestinationDescription\":{\"DataFormatConversionConfiguration\":{\"InputFormatConfiguration\":{\"Deserializer\":{\"OpenXJsonSerDe\":{}}},\"OutputFormatConfiguration\":{\"Serializer\":{\"ParquetSerDe\":{}}}}}}]}}}",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefDefaultOpenXJsonParquetEB3F4442D7D23EB5"
        },
        "\""
       ]
      ]
     }
    },
    "flattenResponse": "false",
    "salt": "1760594676354"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallFirehoseputRecord1deac183d8f22b5b2d8e923c366d5bd1": {
   "Type": "Custom::DeployAssert@SdkCallFirehoseputRecord",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "Firehose",
    "api": "putRecord",
    "parameters": {
     "DeliveryStreamName": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefDefaultOpenXJsonParquetEB3F4442D7D23EB5"
        },
        "\""
       ]
      ]
     },
     "Record": "{\"Data\":\"{\\\"Column_A\\\":\\\"foo\\\",\\\"Column_B\\\":\\\"bar\\\"}\"}"
    },
    "flattenResponse": "false",
    "salt": "1760594676354"
   },
   "DependsOn": [
    "AwsApiCallFirehosedescribeDeliveryStreamc49aeb8fbb93c449cb71bf766f7246b7"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5b": {
   "Type": "Custom::DeployAssert@SdkCallS3listObjectsV2",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "SingletonFunction1488541a7b23466481b69b4408076b81HandlerCD40AE9F",
      "Arn"
     ]
    },
    "service": "S3",
    "api": "listObjectsV2",
    "expected": "{\"$ObjectLike\":{\"KeyCount\":6}}",
    "stateMachineArn": {
     "Ref": "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5bWaitForB7FE0DC9"
    },
    "parameters": {
     "Bucket": {
      "Fn::Join": [
       "",
       [
        "\"",
        {
         "Fn::ImportValue": "RecordFormatConversion:ExportsOutputRefBucket83908E7781C90AC0"
        },
        "\""
       ]
      ]
     },
     "Prefix": "\"success\""
    },
    "flattenResponse": "false",
    "salt": "1760594676354"
   },
   "DependsOn": [
    "AwsApiCallFirehoseputRecord18eae126e1db88bccb665e3cf2382723",
    "AwsApiCallFirehoseputRecord1deac183d8f22b5b2d8e923c366d5bd1",
    "AwsApiCallFirehoseputRecord32bc5fec135267e9201d75ffff237638",
    "AwsApiCallFirehoseputRecord41f6aac146cdbc41984ecab5a08c966c",
    "AwsApiCallFirehoseputRecord7d0453eb6f4a193758747fd8ef3cfb72",
    "AwsApiCallFirehoseputRecordca37e652bd2d5899647ca3a4b0194118"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5bWaitForIsCompleteProviderInvoke82262A86": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SingletonFunction76b3e830a873425f8453eddd85c86925Handler81461ECE",
      "Arn"
     ]
    },
    "Principal": {
     "Fn::GetAtt": [
      "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5bWaitForRole16B5DE5E",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "AwsApiCallFirehoseputRecord18eae126e1db88bccb665e3cf2382723",
    "AwsApiCallFirehoseputRecord1deac183d8f22b5b2d8e923c366d5bd1",
    "AwsApiCallFirehoseputRecord32bc5fec135267e9201d75ffff237638",
    "AwsApiCallFirehoseputRecord41f6aac146cdbc41984ecab5a08c966c",
    "AwsApiCallFirehoseputRecord7d0453eb6f4a193758747fd8ef3cfb72",
    "AwsApiCallFirehoseputRecordca37e652bd2d5899647ca3a4b0194118"
   ]
  },
  "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5bWaitForTimeoutProviderInvokeB30CEE76": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41aHandlerADF3E6EA",
      "Arn"
     ]
    },
    "Principal": {
     "Fn::GetAtt": [
      "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5bWaitForRole16B5DE5E",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "AwsApiCallFirehoseputRecord18eae126e1db88bccb665e3cf2382723",
    "AwsApiCallFirehoseputRecord1deac183d8f22b5b2d8e923c366d5bd1",
    "AwsApiCallFirehoseputRecord32bc5fec135267e9201d75ffff237638",
    "AwsApiCallFirehoseputRecord41f6aac146cdbc41984ecab5a08c966c",
    "AwsApiCallFirehoseputRecord7d0453eb6f4a193758747fd8ef3cfb72",
    "AwsApiCallFirehoseputRecordca37e652bd2d5899647ca3a4b0194118"
   ]
  },
  "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5bWaitForRole16B5DE5E": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Version": "2012-10-17",
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "states.amazonaws.com"
       }
      }
     ]
    },
    "Policies": [
     {
      "PolicyName": "InlineInvokeFunctions",
      "PolicyDocument": {
       "Version": "2012-10-17",
       "Statement": [
        {
         "Action": "lambda:InvokeFunction",
         "Effect": "Allow",
         "Resource": [
          {
           "Fn::GetAtt": [
            "SingletonFunction76b3e830a873425f8453eddd85c86925Handler81461ECE",
            "Arn"
           ]
          },
          {
           "Fn::GetAtt": [
            "SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41aHandlerADF3E6EA",
            "Arn"
           ]
          }
         ]
        }
       ]
      }
     }
    ]
   },
   "DependsOn": [
    "AwsApiCallFirehoseputRecord18eae126e1db88bccb665e3cf2382723",
    "AwsApiCallFirehoseputRecord1deac183d8f22b5b2d8e923c366d5bd1",
    "AwsApiCallFirehoseputRecord32bc5fec135267e9201d75ffff237638",
    "AwsApiCallFirehoseputRecord41f6aac146cdbc41984ecab5a08c966c",
    "AwsApiCallFirehoseputRecord7d0453eb6f4a193758747fd8ef3cfb72",
    "AwsApiCallFirehoseputRecordca37e652bd2d5899647ca3a4b0194118"
   ]
  },
  "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5bWaitForB7FE0DC9": {
   "Type": "AWS::StepFunctions::StateMachine",
   "Properties": {
    "DefinitionString": {
     "Fn::Join": [
      "",
      [
       "{\"StartAt\":\"framework-isComplete-task\",\"States\":{\"framework-isComplete-task\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"States.ALL\"],\"IntervalSeconds\":5,\"MaxAttempts\":24,\"BackoffRate\":1}],\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"Next\":\"framework-onTimeout-task\"}],\"Type\":\"Task\",\"Resource\":\"",
       {
        "Fn::GetAtt": [
         "SingletonFunction76b3e830a873425f8453eddd85c86925Handler81461ECE",
         "Arn"
        ]
       },
       "\"},\"framework-onTimeout-task\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"",
       {
        "Fn::GetAtt": [
         "SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41aHandlerADF3E6EA",
         "Arn"
        ]
       },
       "\"}}}"
      ]
     ]
    },
    "RoleArn": {
     "Fn::GetAtt": [
      "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5bWaitForRole16B5DE5E",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "AwsApiCallFirehoseputRecord18eae126e1db88bccb665e3cf2382723",
    "AwsApiCallFirehoseputRecord1deac183d8f22b5b2d8e923c366d5bd1",
    "AwsApiCallFirehoseputRecord32bc5fec135267e9201d75ffff237638",
    "AwsApiCallFirehoseputRecord41f6aac146cdbc41984ecab5a08c966c",
    "AwsApiCallFirehoseputRecord7d0453eb6f4a193758747fd8ef3cfb72",
    "AwsApiCallFirehoseputRecordca37e652bd2d5899647ca3a4b0194118",
    "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5bWaitForRole16B5DE5E"
   ]
  },
  "SingletonFunction76b3e830a873425f8453eddd85c86925Role918961BB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Version": "2012-10-17",
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ]
    },
    "ManagedPolicyArns": [
     {
      "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
     }
    ],
    "Policies": [
     {
      "PolicyName": "Inline",
      "PolicyDocument": {
       "Version": "2012-10-17",
       "Statement": [
        {
         "Action": [
          "s3:ListObjectsV2"
         ],
         "Effect": "Allow",
         "Resource": [
          "*"
         ]
        },
        {
         "Action": [
          "s3:ListBucket"
         ],
         "Effect": "Allow",
         "Resource": [
          {
           "Fn::ImportValue": "RecordFormatConversion:ExportsOutputFnGetAttBucket83908E77Arn063C8555"
          }
         ]
        },
        {
         "Action": [
          "s3:GetObject"
         ],
         "Effect": "Allow",
         "Resource": [
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::ImportValue": "RecordFormatConversion:ExportsOutputFnGetAttBucket83908E77Arn063C8555"
             },
             "/*"
            ]
           ]
          }
         ]
        }
       ]
      }
     }
    ]
   }
  },
  "SingletonFunction76b3e830a873425f8453eddd85c86925Handler81461ECE": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Runtime": {
     "Fn::FindInMap": [
      "LatestNodeRuntimeMap",
      {
       "Ref": "AWS::Region"
      },
      "value"
     ]
    },
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "c11608a15785084ea1afe65826e575ee316add10c8b1bb373e93297e26aec564.zip"
    },
    "Timeout": 120,
    "Handler": "index.isComplete",
    "Role": {
     "Fn::GetAtt": [
      "SingletonFunction76b3e830a873425f8453eddd85c86925Role918961BB",
      "Arn"
     ]
    }
   }
  },
  "SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41aRoleB84BD8CE": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Version": "2012-10-17",
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ]
    },
    "ManagedPolicyArns": [
     {
      "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
     }
    ]
   }
  },
  "SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41aHandlerADF3E6EA": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Runtime": {
     "Fn::FindInMap": [
      "LatestNodeRuntimeMap",
      {
       "Ref": "AWS::Region"
      },
      "value"
     ]
    },
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "c11608a15785084ea1afe65826e575ee316add10c8b1bb373e93297e26aec564.zip"
    },
    "Timeout": 120,
    "Handler": "index.onTimeout",
    "Role": {
     "Fn::GetAtt": [
      "SingletonFunction5c1898e096fb4e3e95d5f6c67f3ce41aRoleB84BD8CE",
      "Arn"
     ]
    }
   }
  }
 },
 "Outputs": {
  "AssertionResultsAwsApiCallFirehosedescribeDeliveryStream1f633a3cab72011e76e59275f2cbb595": {
   "Value": {
    "Fn::GetAtt": [
     "AwsApiCallFirehosedescribeDeliveryStream1f633a3cab72011e76e59275f2cbb595",
     "assertion"
    ]
   }
  },
  "AssertionResultsAwsApiCallFirehosedescribeDeliveryStream429b2496ec1bb3c217e799457b01c838": {
   "Value": {
    "Fn::GetAtt": [
     "AwsApiCallFirehosedescribeDeliveryStream429b2496ec1bb3c217e799457b01c838",
     "assertion"
    ]
   }
  },
  "AssertionResultsAwsApiCallFirehosedescribeDeliveryStream80ff3183e5eb6b5c7dadb7fc094e741d": {
   "Value": {
    "Fn::GetAtt": [
     "AwsApiCallFirehosedescribeDeliveryStream80ff3183e5eb6b5c7dadb7fc094e741d",
     "assertion"
    ]
   }
  },
  "AssertionResultsAwsApiCallFirehosedescribeDeliveryStream77751255b283a1ea1a4bd3c711269900": {
   "Value": {
    "Fn::GetAtt": [
     "AwsApiCallFirehosedescribeDeliveryStream77751255b283a1ea1a4bd3c711269900",
     "assertion"
    ]
   }
  },
  "AssertionResultsAwsApiCallFirehosedescribeDeliveryStreamb0d4cd9ba478423252d4278aa95b0414": {
   "Value": {
    "Fn::GetAtt": [
     "AwsApiCallFirehosedescribeDeliveryStreamb0d4cd9ba478423252d4278aa95b0414",
     "assertion"
    ]
   }
  },
  "AssertionResultsAwsApiCallFirehosedescribeDeliveryStreamc49aeb8fbb93c449cb71bf766f7246b7": {
   "Value": {
    "Fn::GetAtt": [
     "AwsApiCallFirehosedescribeDeliveryStreamc49aeb8fbb93c449cb71bf766f7246b7",
     "assertion"
    ]
   }
  },
  "AssertionResultsAwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5b": {
   "Value": {
    "Fn::GetAtt": [
     "AwsApiCallS3listObjectsV2caaf9d160cbf5c2f7e6c52932eddfc5b",
     "assertion"
    ]
   }
  }
 },
 "Mappings": {
  "LatestNodeRuntimeMap": {
   "af-south-1": {
    "value": "nodejs22.x"
   },
   "ap-east-1": {
    "value": "nodejs22.x"
   },
   "ap-east-2": {
    "value": "nodejs22.x"
   },
   "ap-northeast-1": {
    "value": "nodejs22.x"
   },
   "ap-northeast-2": {
    "value": "nodejs22.x"
   },
   "ap-northeast-3": {
    "value": "nodejs22.x"
   },
   "ap-south-1": {
    "value": "nodejs22.x"
   },
   "ap-south-2": {
    "value": "nodejs22.x"
   },
   "ap-southeast-1": {
    "value": "nodejs22.x"
   },
   "ap-southeast-2": {
    "value": "nodejs22.x"
   },
   "ap-southeast-3": {
    "value": "nodejs22.x"
   },
   "ap-southeast-4": {
    "value": "nodejs22.x"
   },
   "ap-southeast-5": {
    "value": "nodejs22.x"
   },
   "ap-southeast-6": {
    "value": "nodejs22.x"
   },
   "ap-southeast-7": {
    "value": "nodejs22.x"
   },
   "ca-central-1": {
    "value": "nodejs22.x"
   },
   "ca-west-1": {
    "value": "nodejs22.x"
   },
   "cn-north-1": {
    "value": "nodejs22.x"
   },
   "cn-northwest-1": {
    "value": "nodejs22.x"
   },
   "eu-central-1": {
    "value": "nodejs22.x"
   },
   "eu-central-2": {
    "value": "nodejs22.x"
   },
   "eu-isoe-west-1": {
    "value": "nodejs22.x"
   },
   "eu-north-1": {
    "value": "nodejs22.x"
   },
   "eu-south-1": {
    "value": "nodejs22.x"
   },
   "eu-south-2": {
    "value": "nodejs22.x"
   },
   "eu-west-1": {
    "value": "nodejs22.x"
   },
   "eu-west-2": {
    "value": "nodejs22.x"
   },
   "eu-west-3": {
    "value": "nodejs22.x"
   },
   "eusc-de-east-1": {
    "value": "nodejs22.x"
   },
   "il-central-1": {
    "value": "nodejs22.x"
   },
   "me-central-1": {
    "value": "nodejs22.x"
   },
   "me-south-1": {
    "value": "nodejs22.x"
   },
   "mx-central-1": {
    "value": "nodejs22.x"
   },
   "sa-east-1": {
    "value": "nodejs22.x"
   },
   "us-east-1": {
    "value": "nodejs22.x"
   },
   "us-east-2": {
    "value": "nodejs22.x"
   },
   "us-gov-east-1": {
    "value": "nodejs22.x"
   },
   "us-gov-west-1": {
    "value": "nodejs22.x"
   },
   "us-iso-east-1": {
    "value": "nodejs22.x"
   },
   "us-iso-west-1": {
    "value": "nodejs22.x"
   },
   "us-isob-east-1": {
    "value": "nodejs18.x"
   },
   "us-isob-west-1": {
    "value": "nodejs18.x"
   },
   "us-isof-east-1": {
    "value": "nodejs22.x"
   },
   "us-isof-south-1": {
    "value": "nodejs22.x"
   },
   "us-west-1": {
    "value": "nodejs22.x"
   },
   "us-west-2": {
    "value": "nodejs22.x"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}