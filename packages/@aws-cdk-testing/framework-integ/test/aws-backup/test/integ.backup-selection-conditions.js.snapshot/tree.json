{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"0.0.0"},"children":{"cdk-backup-selection-conditions":{"id":"cdk-backup-selection-conditions","path":"cdk-backup-selection-conditions","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"Vault":{"id":"Vault","path":"cdk-backup-selection-conditions/Vault","constructInfo":{"fqn":"aws-cdk-lib.aws_backup.BackupVault","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"cdk-backup-selection-conditions/Vault/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_backup.CfnBackupVault","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Backup::BackupVault","aws:cdk:cloudformation:props":{"backupVaultName":"cdkbackupselectionconditionsVault25DAD9E3","lockConfiguration":{"minRetentionDays":5}}}}}},"Plan":{"id":"Plan","path":"cdk-backup-selection-conditions/Plan","constructInfo":{"fqn":"aws-cdk-lib.aws_backup.BackupPlan","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"cdk-backup-selection-conditions/Plan/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_backup.CfnBackupPlan","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Backup::BackupPlan","aws:cdk:cloudformation:props":{"backupPlan":{"backupPlanName":"Plan","backupPlanRule":[{"lifecycle":{"deleteAfterDays":35},"ruleName":"Daily","scheduleExpression":"cron(0 5 * * ? *)","targetBackupVault":{"Fn::GetAtt":["Vault23237E5B","BackupVaultName"]}},{"lifecycle":{"deleteAfterDays":90},"ruleName":"Weekly","scheduleExpression":"cron(0 5 ? * SAT *)","targetBackupVault":{"Fn::GetAtt":["Vault23237E5B","BackupVaultName"]}},{"lifecycle":{"deleteAfterDays":1825,"moveToColdStorageAfterDays":90},"ruleName":"Monthly5Year","scheduleExpression":"cron(0 5 1 * ? *)","targetBackupVault":{"Fn::GetAtt":["Vault23237E5B","BackupVaultName"]}}]}}}},"SelectionWithConditions":{"id":"SelectionWithConditions","path":"cdk-backup-selection-conditions/Plan/SelectionWithConditions","constructInfo":{"fqn":"aws-cdk-lib.aws_backup.BackupSelection","version":"0.0.0"},"children":{"Role":{"id":"Role","path":"cdk-backup-selection-conditions/Plan/SelectionWithConditions/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"cdk-backup-selection-conditions/Plan/SelectionWithConditions/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"backup.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSBackupServiceRolePolicyForBackup"]]}]}}}}},"Resource":{"id":"Resource","path":"cdk-backup-selection-conditions/Plan/SelectionWithConditions/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_backup.CfnBackupSelection","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Backup::BackupSelection","aws:cdk:cloudformation:props":{"backupPlanId":{"Fn::GetAtt":["PlanDAF4E53A","BackupPlanId"]},"backupSelection":{"iamRoleArn":{"Fn::GetAtt":["PlanSelectionWithConditionsRoleDC49D02C","Arn"]},"selectionName":"SelectionWithConditions","resources":["arn:aws:ec2:*:*:volume/*"],"conditions":{"StringEquals":[{"ConditionKey":"aws:ResourceTag/backup-enabled","ConditionValue":"true"}]}}}}}}},"SelectionWithMultipleConditions":{"id":"SelectionWithMultipleConditions","path":"cdk-backup-selection-conditions/Plan/SelectionWithMultipleConditions","constructInfo":{"fqn":"aws-cdk-lib.aws_backup.BackupSelection","version":"0.0.0"},"children":{"Role":{"id":"Role","path":"cdk-backup-selection-conditions/Plan/SelectionWithMultipleConditions/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"cdk-backup-selection-conditions/Plan/SelectionWithMultipleConditions/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"backup.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSBackupServiceRolePolicyForBackup"]]}]}}}}},"Resource":{"id":"Resource","path":"cdk-backup-selection-conditions/Plan/SelectionWithMultipleConditions/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_backup.CfnBackupSelection","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Backup::BackupSelection","aws:cdk:cloudformation:props":{"backupPlanId":{"Fn::GetAtt":["PlanDAF4E53A","BackupPlanId"]},"backupSelection":{"iamRoleArn":{"Fn::GetAtt":["PlanSelectionWithMultipleConditionsRoleF9095871","Arn"]},"selectionName":"SelectionWithMultipleConditions","resources":["arn:aws:rds:*:*:db:*"],"conditions":{"StringEquals":[{"ConditionKey":"aws:ResourceTag/environment","ConditionValue":"production"}],"StringLike":[{"ConditionKey":"aws:ResourceTag/project","ConditionValue":"myproject-*"}],"StringNotEquals":[{"ConditionKey":"aws:ResourceTag/temporary","ConditionValue":"true"}]}}}}}}},"SelectionWithFromTag":{"id":"SelectionWithFromTag","path":"cdk-backup-selection-conditions/Plan/SelectionWithFromTag","constructInfo":{"fqn":"aws-cdk-lib.aws_backup.BackupSelection","version":"0.0.0"},"children":{"Role":{"id":"Role","path":"cdk-backup-selection-conditions/Plan/SelectionWithFromTag/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"0.0.0"},"children":{"Resource":{"id":"Resource","path":"cdk-backup-selection-conditions/Plan/SelectionWithFromTag/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"backup.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSBackupServiceRolePolicyForBackup"]]}]}}}}},"Resource":{"id":"Resource","path":"cdk-backup-selection-conditions/Plan/SelectionWithFromTag/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_backup.CfnBackupSelection","version":"0.0.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Backup::BackupSelection","aws:cdk:cloudformation:props":{"backupPlanId":{"Fn::GetAtt":["PlanDAF4E53A","BackupPlanId"]},"backupSelection":{"iamRoleArn":{"Fn::GetAtt":["PlanSelectionWithFromTagRoleC729FD72","Arn"]},"selectionName":"SelectionWithFromTag","listOfTags":[{"conditionKey":"backup","conditionType":"STRINGEQUALS","conditionValue":"daily"}],"resources":["arn:aws:dynamodb:*:*:table/*"]}}}}}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"cdk-backup-selection-conditions/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"cdk-backup-selection-conditions/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}},"BackupSelectionConditionsTest":{"id":"BackupSelectionConditionsTest","path":"BackupSelectionConditionsTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTest","version":"0.0.0"},"children":{"DefaultTest":{"id":"DefaultTest","path":"BackupSelectionConditionsTest/DefaultTest","constructInfo":{"fqn":"@aws-cdk/integ-tests-alpha.IntegTestCase","version":"0.0.0"},"children":{"Default":{"id":"Default","path":"BackupSelectionConditionsTest/DefaultTest/Default","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"DeployAssert":{"id":"DeployAssert","path":"BackupSelectionConditionsTest/DefaultTest/DeployAssert","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"0.0.0"},"children":{"BootstrapVersion":{"id":"BootstrapVersion","path":"BackupSelectionConditionsTest/DefaultTest/DeployAssert/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"0.0.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BackupSelectionConditionsTest/DefaultTest/DeployAssert/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"0.0.0"}}}}}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}