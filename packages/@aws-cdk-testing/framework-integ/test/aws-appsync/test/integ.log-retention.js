"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = require("path");
const aws_logs_1 = require("aws-cdk-lib/aws-logs");
const aws_cdk_lib_1 = require("aws-cdk-lib");
const integ_tests_alpha_1 = require("@aws-cdk/integ-tests-alpha");
const aws_appsync_1 = require("aws-cdk-lib/aws-appsync");
const app = new aws_cdk_lib_1.App();
const stack = new aws_cdk_lib_1.Stack(app, 'AppSyncIntegLogRetention');
const retentionTime = aws_logs_1.RetentionDays.ONE_WEEK;
const logConfig = {
    retention: retentionTime,
};
const api = new aws_appsync_1.GraphqlApi(stack, 'GraphqlApi', {
    authorizationConfig: {},
    name: 'IntegLogRetention',
    schema: aws_appsync_1.SchemaFile.fromAsset((0, path_1.join)(__dirname, 'appsync.test.graphql')),
    logConfig,
});
const integ = new integ_tests_alpha_1.IntegTest(app, 'Integ', { testCases: [stack] });
const describe = integ.assertions.awsApiCall('CloudWatchLogs', 'describeLogGroups', {
    logGroupNamePrefix: api.logGroup.logGroupName,
});
describe.expect(integ_tests_alpha_1.ExpectedResult.objectLike({
    logGroups: [
        {
            logGroupName: api.logGroup.logGroupName,
            retentionInDays: retentionTime,
        },
    ],
}));
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZWcubG9nLXJldGVudGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImludGVnLmxvZy1yZXRlbnRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBNEI7QUFDNUIsbURBQXFEO0FBQ3JELDZDQUF5QztBQUN6QyxrRUFBdUU7QUFDdkUseURBQTRFO0FBRTVFLE1BQU0sR0FBRyxHQUFHLElBQUksaUJBQUcsRUFBRSxDQUFDO0FBQ3RCLE1BQU0sS0FBSyxHQUFHLElBQUksbUJBQUssQ0FBQyxHQUFHLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztBQUd6RCxNQUFNLGFBQWEsR0FBRyx3QkFBYSxDQUFDLFFBQVEsQ0FBQztBQUM3QyxNQUFNLFNBQVMsR0FBYztJQUMzQixTQUFTLEVBQUUsYUFBYTtDQUN6QixDQUFDO0FBRUYsTUFBTSxHQUFHLEdBQUcsSUFBSSx3QkFBVSxDQUFDLEtBQUssRUFBRSxZQUFZLEVBQUU7SUFDOUMsbUJBQW1CLEVBQUUsRUFBRTtJQUN2QixJQUFJLEVBQUUsbUJBQW1CO0lBQ3pCLE1BQU0sRUFBRSx3QkFBVSxDQUFDLFNBQVMsQ0FBQyxJQUFBLFdBQUksRUFBQyxTQUFTLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztJQUNyRSxTQUFTO0NBQ1YsQ0FBQyxDQUFDO0FBRUgsTUFBTSxLQUFLLEdBQUcsSUFBSSw2QkFBUyxDQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsRUFBRSxTQUFTLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7QUFFbEUsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLEVBQzNELG1CQUFtQixFQUNuQjtJQUNFLGtCQUFrQixFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsWUFBWTtDQUM5QyxDQUFDLENBQUM7QUFFTCxRQUFRLENBQUMsTUFBTSxDQUFDLGtDQUFjLENBQUMsVUFBVSxDQUFDO0lBQ3hDLFNBQVMsRUFBRTtRQUNUO1lBQ0UsWUFBWSxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsWUFBWTtZQUN2QyxlQUFlLEVBQUUsYUFBYTtTQUMvQjtLQUNGO0NBQ0YsQ0FBQyxDQUFDLENBQUM7QUFFSixHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBSZXRlbnRpb25EYXlzIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWxvZ3MnO1xuaW1wb3J0IHsgQXBwLCBTdGFjayB9IGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCB7IEV4cGVjdGVkUmVzdWx0LCBJbnRlZ1Rlc3QgfSBmcm9tICdAYXdzLWNkay9pbnRlZy10ZXN0cy1hbHBoYSc7XG5pbXBvcnQgeyBHcmFwaHFsQXBpLCBMb2dDb25maWcsIFNjaGVtYUZpbGUgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtYXBwc3luYyc7XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbmNvbnN0IHN0YWNrID0gbmV3IFN0YWNrKGFwcCwgJ0FwcFN5bmNJbnRlZ0xvZ1JldGVudGlvbicpO1xuXG5cbmNvbnN0IHJldGVudGlvblRpbWUgPSBSZXRlbnRpb25EYXlzLk9ORV9XRUVLO1xuY29uc3QgbG9nQ29uZmlnOiBMb2dDb25maWcgPSB7XG4gIHJldGVudGlvbjogcmV0ZW50aW9uVGltZSxcbn07XG5cbmNvbnN0IGFwaSA9IG5ldyBHcmFwaHFsQXBpKHN0YWNrLCAnR3JhcGhxbEFwaScsIHtcbiAgYXV0aG9yaXphdGlvbkNvbmZpZzoge30sXG4gIG5hbWU6ICdJbnRlZ0xvZ1JldGVudGlvbicsXG4gIHNjaGVtYTogU2NoZW1hRmlsZS5mcm9tQXNzZXQoam9pbihfX2Rpcm5hbWUsICdhcHBzeW5jLnRlc3QuZ3JhcGhxbCcpKSxcbiAgbG9nQ29uZmlnLFxufSk7XG5cbmNvbnN0IGludGVnID0gbmV3IEludGVnVGVzdChhcHAsICdJbnRlZycsIHsgdGVzdENhc2VzOiBbc3RhY2tdIH0pO1xuXG5jb25zdCBkZXNjcmliZSA9IGludGVnLmFzc2VydGlvbnMuYXdzQXBpQ2FsbCgnQ2xvdWRXYXRjaExvZ3MnLFxuICAnZGVzY3JpYmVMb2dHcm91cHMnLFxuICB7XG4gICAgbG9nR3JvdXBOYW1lUHJlZml4OiBhcGkubG9nR3JvdXAubG9nR3JvdXBOYW1lLFxuICB9KTtcblxuZGVzY3JpYmUuZXhwZWN0KEV4cGVjdGVkUmVzdWx0Lm9iamVjdExpa2Uoe1xuICBsb2dHcm91cHM6IFtcbiAgICB7XG4gICAgICBsb2dHcm91cE5hbWU6IGFwaS5sb2dHcm91cC5sb2dHcm91cE5hbWUsXG4gICAgICByZXRlbnRpb25JbkRheXM6IHJldGVudGlvblRpbWUsXG4gICAgfSxcbiAgXSxcbn0pKTtcblxuYXBwLnN5bnRoKCk7XG4iXX0=